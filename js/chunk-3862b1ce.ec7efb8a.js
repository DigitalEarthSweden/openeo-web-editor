(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3862b1ce"],{"0f29":function(e,t,s){"use strict";var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"textEditor",class:e.languageString},[s("div",{staticClass:"sourceHeader"},[e.title?s("strong",[e._v(e._s(e.title))]):e._e(),s("div",{staticClass:"sourceToolbar"},[s("span",{staticClass:"sepr"},[e.editable?s("button",{attrs:{type:"button",title:"New script / Clear current script"},on:{click:e.confirmClear}},[s("i",{staticClass:"fas fa-file"})]):e._e(),e._t("file-toolbar")],2),e.editable?s("span",{staticClass:"sepr"},[s("button",{attrs:{type:"button",disabled:!e.canUndo,title:"Revert last change"},on:{click:function(t){return e.editor.undo()}}},[s("i",{staticClass:"fas fa-undo-alt"})]),s("button",{attrs:{type:"button",disabled:!e.canRedo,title:"Redo last reverted change"},on:{click:function(t){return e.editor.redo()}}},[s("i",{staticClass:"fas fa-redo-alt"})]),e._t("edit-toolbar")],2):e._e(),s("FullscreenButton",{attrs:{element:e.element}}),e._t("toolbar")],2)]),s("div",{staticClass:"sourceCodeEditor",attrs:{id:e.id}})])},i=[],r=s("025e"),o=s("5472"),n=s("a76e"),l=s("56b3"),c=s.n(l),u=(s("a7be"),s("f9d4"),s("959b"),s("ced6"),s("db91"),s("903e"),s("d7d5"),s("8c33"),s("10b2"),s("0dd0"),s("8822"),s("d2de"),s("4ebc")),d=s.n(u);window.jsonlint=d.a;var h={name:"TextEditor",components:{FullscreenButton:o["a"]},props:{id:String,editable:{type:Boolean,default:!0},value:{required:!0},language:{type:String,default:null},placeholder:{type:String,default:""},title:{type:String}},computed:{...r["a"].mapGetters(["processes"]),languageString(){return"string"===typeof this.language?this.language.toLowerCase():""},editorOptions(){let e={indentUnit:2,lineNumbers:!0,indentWithTabs:!0,matchBrackets:!0,autoCloseBrackets:!0,readOnly:!this.editable,placeholder:this.placeholder};switch(this.languageString){case"r":e.mode="text/x-rsrc";break;case"python":e.mode="text/x-python";break;case"math":e.mode="text/x-mathematica";break;case"markdown":e.mode="text/x-markdown",e.lineWrapping=!0;break;case"javascript":e.mode="text/javascript";break;case"json":case"processgraph":e.mode="application/json",e.gutters=["CodeMirror-lint-markers"],e.lint=!0;break}return e}},data(){return{canUndo:!1,canRedo:!1,editor:null,emitValue:this.value,element:null}},watch:{async value(){this.emitValue!==this.value&&(this.updateContent(),this.editor.clearHistory())},editorOptions(){for(var e in this.editorOptions)this.editor.setOption(e,this.editorOptions[e]);this.updateContent()}},mounted(){this.editor=c()(document.getElementById(this.id),this.editorOptions),this.editor.setSize(null,"100%"),"processgraph"===this.languageString&&this.editor.on("change",()=>this.updateState()),this.updateContent(),this.editor.on("changes",(e,t)=>{try{0===Object.values(t).filter(e=>"setValue"===e.origin).length&&this.commit()}catch(s){this.$emit("error",s)}}),this.element=this.$el},methods:{confirmClear(){var e=confirm("Do you really want to clear the existing code?");e&&(this.insert(""),this.emit(null))},updateState(){this.editor.setOption("lint",!!this.editor.getValue().trim());let e=this.editor.getDoc().historySize();this.canUndo=e.undo>0,this.canRedo=e.redo>0,this.editor.refresh(),this.element=this.$el},commit(){var e=this.editor.getValue();switch(this.languageString){case"math":return this.emit(e.replace(/[\r\n\t]+/," "));case"processgraph":if(e){var t=JSON.parse(e);if(r["a"].size(t)>0){var s=new n["ProcessGraph"](t,this.processes);return s.allowEmpty(),s.parse(),this.emit(t)}}return this.emit(null);case"json":return e?this.emit(JSON.parse(e)):this.emit(null);default:return this.emit(e)}},emit(e){this.emitValue=e,this.$emit("input",e)},insert(e,t=!0){if("string"!==typeof e&&(e=String(e)),t){const t=this.editor.getValue();if(e!==t){const t=this.editor.getScrollInfo();this.editor.setValue(e),this.editor.scrollTo(t.left,t.top)}}else this.editor.replaceSelection(e)},updateContent(){if(this.value)switch(this.languageString){case"processgraph":r["a"].isObject(this.value)?this.insert(JSON.stringify(this.value,null,this.editorOptions.indentUnit)):this.insert("");break;case"json":this.insert(JSON.stringify(this.value,null,this.editorOptions.indentUnit));break;default:this.insert(this.value)}else this.insert("");this.editor.getDoc().clearHistory(),this.updateState()},insertProcess(e){try{this.insert(JSON.stringify(e,null,2),!1)}catch(t){r["a"].exception(this,t)}}}},p=h,m=(s("4f8c"),s("ccbe"),s("2877")),f=Object(m["a"])(p,a,i,!1,null,"100002bb",null);t["a"]=f.exports},3075:function(e,t,s){"use strict";s.d(t,"a",(function(){return i})),s.d(t,"b",(function(){return r})),s.d(t,"c",(function(){return o}));var a=s("025e");class i{constructor(e){Object.assign(this,e),this.context=null}setContext(e){this.context=e}getContext(){return this.context}getUrl(){return this.href}canGroup(){return!1}isBinary(){return!0}download(e=null){let t=document.createElement("a");t.style.display="none",t.href=this.getUrl(),t.setAttribute("download",e||a["a"].makeFileName("result",this.type)),"undefined"===typeof t.download&&t.setAttribute("target","_blank"),document.body.appendChild(t),t.click(),document.body.removeChild(t)}async getData(e){return this.loaded||(this.data=await this.fetchData(e),this.loaded=!0),this.data}async fetchData(e){let t,s=this.getUrl();if(s.startsWith("blob:")){let e=await fetch(s);t=await e.blob()}else t=await e.download(s);let a=new Promise((e,s)=>{let a=new FileReader;a.onload=t=>e(t.target.result),a.onerror=s,this.isBinary()?a.readAsBinaryString(t):a.readAsText(t)}),i=await a;return this.parseData(i)}async parseData(e){return e}}class r extends i{constructor(e,t=null,s="fa-database",a={},i={}){super(e),this.loaded=!1,this.component=t,this.props=a,this.props.data||(this.props.data=this),this.icon=s,this.events=i}isBinary(){return!1}}class o extends i{constructor(e){super(e)}}},"41a2":function(e,t,s){"use strict";var a=s("2f5c"),i=s("025e");t["a"]=(e,t,s,r=!0)=>({components:{DataTable:a["a"]},data(){return{columns:{},syncTimer:null,lastSyncTime:null}},mounted(){r&&this.updateData()},beforeDestroy(){this.stopSyncTimer()},computed:{...i["a"].mapState(e,{data:e}),...i["a"].mapGetters(e,["supportsList","supportsCreate","supportsRead","supportsUpdate","supportsDelete"])},methods:{...i["a"].mapActions(e,["list","create","read","update","delete"]),getTable(){return this.$refs&&this.$refs.table?this.$refs.table:null},onShow(){this.updateData(),this.startSyncTimer()},onHide(){this.stopSyncTimer()},startSyncTimer(){this.supportsList&&null===this.syncTimer&&(this.syncTimer=setInterval(this.updateData,this.getSyncInterval()))},stopSyncTimer(){null!==this.syncTimer&&(clearInterval(this.syncTimer),this.syncTimer=null)},getSyncInterval(){return 60*this.$config.dataRefreshInterval*1e3},async refreshElement(e,s=null){var a=Object.assign({},e);try{let t=await this.read({data:e});"function"===typeof s&&s(t,a)}catch(r){i["a"].exception(this,r,"Load "+t+" error")}},async updateData(){var e=this.getTable(),a=Date.now()-this.getSyncInterval();if(e&&!(this.lastSyncTime>a))if(this.supportsList)if(this.supportsCreate){var r=this.data.length>0;r||e.setNoData("Loading "+s+"..."),this.lastSyncTime=Date.now();try{let s=await this.list();0==s.length&&e.setNoData("Add your first "+t+" here...")}catch(o){r?console.log(o):(i["a"].exception(this,o),e.setNoData("Sorry, unable to load data from the server."))}}else e.setNoData("Sorry, this feature is not supported by the server.");else e.setNoData("Sorry, listing stored "+s+" is not supported by the server.")}}})},4525:function(e,t,s){},"4d98":function(e,t,s){"use strict";s("c98e")},"4f8c":function(e,t,s){"use strict";s("65f5")},"50e5":function(e,t,s){},"55b5":function(e,t,s){"use strict";s("ad68")},"57f6":function(e,t,s){"use strict";var a=s("3075"),i=s("025e"),r=s("601e"),o=s("2721"),n=s("256f"),l=s("f5dd"),c=s("fced");const u="STATISTICS_MINIMUM",d="STATISTICS_MAXIMUM",h="DESCRIPTION";class p extends a["b"]{constructor(e,t){super(e,"MapViewer","fa-map",{removableLayers:!0}),this.bands=[],this.nodata=void 0,this.img=null,this.projection=null,this.extent=null,this.stac=t}isBinary(){return!0}canGroup(){return!0}async getData(){return await this.parseMetadata(),this}async parseMetadata(){let e=this.stac.geometry||this.stac.extent;if(this.projection=await r["a"].addFromStac(this.stac),this.nodata=i["a"].parseNodata(this["file:nodata"]),Array.isArray(this["eo:bands"])&&this["eo:bands"].length>0&&this["eo:bands"].forEach((e,t)=>this.setBandInfo(t,{name:e.name})),Array.isArray(this["raster:bands"])&&this["raster:bands"].length>0&&this["raster:bands"].forEach((e,t)=>{i["a"].isObject(e.statistics)&&this.setBandInfo(t,{min:e.statistics.minimum,max:e.statistics.maximum}),"undefined"===typeof this.nodata&&"undefined"!==typeof e.nodata&&(this.nodata=i["a"].parseNodata(e.nodata))}),0===this.bands.length||null===this.projection||!e||this.bands.find(e=>"undefined"===typeof e.min||"undefined"===typeof e.max)){let s,a=await Object(o["a"])(this.getUrl());this.img=await a.getImage();for(let e=0;e<this.img.getSamplesPerPixel();e++){let t=this.img.getGDALMetadata(e),s={};u in t&&(s.min=parseFloat(t[u])),d in t&&(s.max=parseFloat(t[d])),h in t&&(s.name=t[h]),this.setBandInfo(e,s);let a=this.img.getGDALNoData();"undefined"===typeof this.nodata&&null!==a&&(this.nodata=a)}if(!this.projection&&this.img.geoKeys){let{ProjectedCSTypeGeoKey:e,GeographicTypeGeoKey:t,ProjLinearUnitsGeoKey:a,GeogAngularUnitsGeoKey:i}=this.img.geoKeys;if(e&&(s="EPSG:"+e,this.projection=await r["a"].get(s)),!this.projection&&t&&(s="EPSG:"+t,this.projection=await r["a"].get(s)),!this.projection&&s){const e=a&&Object(c["c"])(a)||i&&Object(c["c"])(i);e&&(this.projection=new l["a"]({code:s,units:e}))}}if(!e)try{let e=this.img.getBoundingBox();this.extent=Object(n["t"])(e,this.projection)}catch(t){console.warn(t)}}}setBandInfo(e,t){this.bands[e]?Object.assign(this.bands[e],t):this.bands.push(Object.assign({id:e+1},t))}getNoData(){return this.nodata}getContext(){return this.stac}getBands(){return this.bands}getProjection(){return this.projection}getExtent(){return this.extent}}t["a"]=p},"601e":function(e,t,s){"use strict";s.d(t,"a",(function(){return l}));var a=s("a79f"),i=s("256f"),r=s("f5dd"),o=s("bc81"),n=s("025e");class l{static async get(e){return e instanceof r["a"]?e:await l._load(e)}static add(e,t){try{return a["a"].defs(e,t),Object(o["a"])(a["a"]),Object(i["n"])(e)}catch(s){return console.error(s),null}}static async addFromStac(e){if(n["a"].isObject(e)&&n["a"].isObject(e.properties)){if(e.properties["proj:epsg"])return await l.get(e.properties["proj:epsg"]);if(e.properties["proj:wkt2"])return l.add(e.id,e.properties["proj:wkt2"])}return null}static async _load(e){let t,a;if("string"===typeof e&&e.match(/^EPSG:\d+$/i))t=e.toUpperCase(),a=e.substr(5);else{if(!Number.isInteger(e))return null;t="EPSG:"+e,a=String(e)}let r=Object(i["n"])(t);if(r)return r;let o=await s.e("chunk-2d0b5f87").then(s.t.bind(null,"1abc",3));return a in o?l.add(t,o[a]):null}}},"65f5":function(e,t,s){},"79f4":function(e,t,s){"use strict";s.d(t,"a",(function(){return o}));var a=s("a76e"),i=s("025e");class r extends a["BaseProcess"]{constructor(e,t){super(e),this.exporter=t}async execute(e){await this.exporter.generateFunction(e)}}class o extends a["ProcessGraph"]{constructor(e,t,s){super(i["a"].isObject(e)?e:{},t),this.connection=s,this.indent=0,this.code=[],this.fnCounter=1,this.allowEmpty(),this.fillUndefinedParameters()}createProcessGraphInstance(e){let t=new o(e,this.processRegistry,this.getJsonSchemaValidator());return this.copyProcessGraphInstanceProperties(t)}copyProcessGraphInstanceProperties(e){return e=super.copyProcessGraphInstanceProperties(e),e.connection=this.connection,e}createProcessInstance(e){return new r(e,this)}isKeyword(e){return this.getKeywords().includes(e.toLowerCase())}getKeywords(){return[]}comment(){}generateImports(){}generateConnection(){}generateAuthentication(){}generateBuilder(){}generateMetadata(){}generateMissingParameter(){}async generateFunction(){}generateFunctionParams(e){return e.map(e=>"undefined"!==typeof e.default?`${e.name} = ${this.e(e.default)}`:e.name)}async generateCallback(){}generateResult(){}makeNull(){return"null"}makeBoolean(e){return e?"true":"false"}makeArray(e){return`[${e.join(", ")}]`}makeObject(e){let t=i["a"].mapObject(e,(e,t)=>`${this.makeString(t)}: ${e}`);return`{${t.join(", ")}}`}makeString(e){return JSON.stringify(e)}makeNumber(e){return e}e(e){return null===e?this.makeNull():"boolean"===typeof e?this.makeBoolean(e):"number"===typeof e?this.makeNumber(e):"string"===typeof e?this.makeString(e):Array.isArray(e)?this.makeArray(e.map(e=>this.e(e))):i["a"].isObject(e)?this.makeObject(i["a"].mapObjectValues(e,e=>this.e(e))):"function"===typeof e?e():this.makeNull()}generateMetadata(){let e=!1;for(let t in this.process){if("process_graph"===t)continue;let s=this.process[t];Array.isArray(s)&&0===s.length||("string"===typeof s&&0===s.length||("boolean"!==typeof s||s)&&(e||(this.newLine(),this.comment("Set the metadata for the process"),e=!0),this.generateMetadataEntry(t,s)))}}async resolveArguments(e,t,s){let a=Array.isArray(e)?[]:{};for(let r in e){let n=e[r];if(!s||!s(r,n))if(i["a"].isObject(n)){if(n.from_node){a[r]=()=>this.var(n.from_node);continue}if(n.from_parameter){a[r]=()=>this.var(n.from_parameter);continue}if(n instanceof o){let e=await t(r);a[r]=()=>e;continue}a[r]=await this.resolveArguments(n,t,s)}else Array.isArray(n)?a[r]=await this.resolveArguments(n,t,s):a[r]=n}return a}async resolveCallback(e,t){let s=e.getArgument(t),a=s.getCallbackParameters();await s.execute(a);let i=this.var(`${t}${this.fnCounter++}`,"fn_"),r=await this.generateCallback(s,a,i);return r||i}async generateArguments(e,t=!1,s=null){let a=await this.resolveArguments(e.arguments,async t=>await this.resolveCallback(e,t),s);return t&&(a=this.orderArguments(e,a)),a}orderArguments(e,t){let s=e.getProcessGraph().getProcess(e);if(s&&Array.isArray(s.parameters)){let e=s.parameters.map(e=>"undefined"!==typeof t[e.name]?t[e.name]:e.optional?void 0:null),a=!1;for(let t=e.length-1;t>=0;t--)"undefined"===typeof e[t]?a?e[t]=null:e.pop():a=!0;return e}}var(e,t="datacube"){return e=String(e),this.isKeyword(e)?e+"_":e.match(/^[a-z_]\w*$/)?e:`${t}${e}`}getTab(){return"\t"}addCode(e,t=""){if("string"!==typeof e)return;let s=this.getTab().repeat(this.indent),a=e.trim().split(/\r\n|\r|\n/g);for(let i of a)this.code.push(`${s}${t}${i}\n`)}newLine(e=1){for(let t=0;t<e;t++)this.addCode("")}getServerUrl(){return this.connection.getUrl()}async toCode(e=!1){this.code=[],e||(this.comment("Import required packages"),this.generateImports(),this.newLine(),this.comment("Connect to the back-end"),this.generateConnection(),this.generateAuthentication(),this.newLine(),this.generateBuilder(),this.generateMetadata(),this.newLine());let t=this.getProcessParameters();if(t.length>0){this.comment("ToDo: Here you need to set values for the parameters");for(let e of t)this.generateMissingParameter(e);this.newLine()}return await this.execute(),e||(this.newLine(),this.comment("The process can be executed synchronously (see below), as batch job or as web service now")),this.generateResult(this.getResultNode(),e),this.code.join("").trim()}async execute(){return await this.validate(),this.reset(),await this.executeNodes(this.getStartNodes()),this.getResultNode()}isMath(){return"undefined"===typeof this._isMath&&(this._isMath=this.processRegistry.isMath(this)),this._isMath}}},8099:function(e,t,s){},"80e5":function(e,t,s){"use strict";s("db4b")},8663:function(e,t,s){"use strict";s("cd65")},"8c66":function(e,t,s){"use strict";var a=function(){var e=this,t=this,s=t.$createElement,a=t._self._c||s;return a("div",{ref:"visualEditor",staticClass:"visualEditor"},[a("div",{staticClass:"sourceHeader"},[t.title?a("strong",[t._v(t._s(t.title))]):t._e(),a("div",{staticClass:"sourceToolbar"},[t.editable?a("span",{staticClass:"sepr"},[a("button",{attrs:{type:"button",title:"New script / Clear current script"},on:{click:t.confirmClear}},[a("i",{staticClass:"fas fa-file"})]),t._t("file-toolbar")],2):t._e(),t.editable?a("span",{staticClass:"sepr"},[a("button",{attrs:{type:"button",disabled:!t.canUndo,title:"Revert last change"},on:{click:function(e){return t.$refs.blocks.undo()}}},[a("i",{staticClass:"fas fa-undo-alt"})]),a("button",{attrs:{type:"button",disabled:!t.canRedo,title:"Redo last reverted change"},on:{click:function(e){return t.$refs.blocks.redo()}}},[a("i",{staticClass:"fas fa-redo-alt"})]),a("button",{attrs:{type:"button",disabled:!t.hasSelection,title:"Delete selected elements"},on:{click:function(e){return t.$refs.blocks.deleteSelected()}}},[a("i",{staticClass:"fas fa-trash"})])]):t._e(),t.editable?a("span",{staticClass:"sepr"},[t.parent?t._e():a("button",{attrs:{type:"button",title:"Edit Process Metadata"},on:{click:function(){return t.editProcess(t.value)}}},[a("i",{staticClass:"fas fa-edit"})]),a("button",{attrs:{type:"button",title:"Add Parameter"},on:{click:t.addParameter}},[a("i",{staticClass:"fas fa-parking"})]),t.supportsMath?a("button",{class:{highlightFormula:t.isMath},attrs:{type:"button",title:"Insert/Edit formula"},on:{click:t.showExpressionModal}},[a("i",{staticClass:"fas fa-square-root-alt"})]):t._e()]):t._e(),a("button",{class:{compactMode:t.compactMode},attrs:{type:"button",title:"Compact Mode"},on:{click:function(e){return t.$refs.blocks.toggleCompact()}}},[a("i",{staticClass:"fas fa-compress-arrows-alt"})]),a("button",{attrs:{type:"button",title:"Scale to perfect size"},on:{click:function(e){return t.$refs.blocks.perfectScale()}}},[a("i",{staticClass:"fas fa-arrows-alt"})]),a("FullscreenButton",{attrs:{element:function(){return e.$refs.visualEditor}},on:{changed:function(s){e.$refs.blocks.perfectScale(),t.isFullScreen=s}}}),t._t("toolbar")],2)]),a("div",{staticClass:"editorSplitter"},[(t.showDiscoveryToolbar||t.isFullScreen)&&t.editable?a("DiscoveryToolbar",{staticClass:"discoveryToolbar",attrs:{onAddProcess:t.insertProcess}}):t._e(),a("div",{staticClass:"graphBuilder",on:{drop:t.onDrop,dragover:t.allowDrop}},[a("ModelBuilder",{ref:"blocks",attrs:{editable:t.editable,id:t.id,processes:t.processes,collections:t.collections,parent:t.parent,parentSchema:t.parentSchema,value:t.value},on:{input:t.commit,error:t.errorHandler,showProcess:function(e,s){return t.emit("showProcess",{id:e,namespace:s})},showCollection:function(e){return t.emit("showCollection",e)},showParameter:function(e){return t.emit("showProcessParameter",e)},editParameter:t.editParameter,editArguments:t.openArgumentEditor,compactMode:function(t){return e.compactMode=t},selectionChanged:t.selectionChanged,historyChanged:t.historyChanged}})],1)],1)])},i=[],r=s("1d9a"),o=s("025e"),n=s("cbd9"),l=s("3115"),c=s("5472"),u=s("fbda"),d=s("db05"),h={name:"VisualEditor",mixins:[l["a"]],components:{ModelBuilder:r["default"],DiscoveryToolbar:n["a"],FullscreenButton:c["a"]},props:{id:String,editable:{type:Boolean,default:!0},value:{type:Object,default:()=>null},parent:{type:Object,default:null},parentSchema:{type:Object,default:null},showDiscoveryToolbar:{type:Boolean,default:!1},title:{type:String},defaultValue:{}},computed:{...o["a"].mapState(["connection","collections"]),...o["a"].mapGetters(["processes","supportsMath"]),...o["a"].mapState("editor",["initialNode"]),isMath(){return this.supportsMath&&this.processes.isMath(this.value)}},data(){return{canUndo:!1,canRedo:!1,compactMode:!1,hasSelection:!1,formula:null,isFullScreen:!1}},watch:{value:{immediate:!0,handler(e){if(this.initialNode&&o["a"].isObject(e)&&o["a"].isObject(e.process_graph))try{let t=this.initialNode;"1"==t&&o["a"].size(e.process_graph)&&(t=Object.keys(e.process_graph)[0]),this.openArgumentEditorForNode(t)}catch(t){o["a"].exception(this,t)}finally{this.setInitialNode(null)}}}},methods:{...o["a"].mapMutations("editor",["setInitialNode"]),commit(e){"undefined"!==typeof this.defaultValue&&o["a"].isObject(e)&&0===o["a"].size(e.process_graph)&&(e=this.defaultValue),this.$emit("input",e)},errorHandler(e,t=null){o["a"].exception(this,e,t)},selectionChanged(e,t){this.hasSelection=Boolean(e.filter(e=>e.$el.allowsDelete).length||t.length)},historyChanged(e,t){this.canUndo=!!e[t-1],this.canRedo=!!e[t+1]},allowDrop(e){e.preventDefault()},onDrop(e){var t=e.dataTransfer.getData("application/vnd.openeo-node");if(t){let s=JSON.parse(t);return this.insertProcess(s,e.pageX,e.pageY),e.preventDefault()}let s=e.dataTransfer.files;if(1===s.length){let t=e.dataTransfer.files[0];if("application/json"===t.type){var a=new FileReader;return a.onload=async e=>{try{let t=JSON.parse(e.target.result);await this.$refs.blocks.import(t)}catch(t){o["a"].exception(this,t,"Parsing JSON file failed")}},a.onerror=e=>o["a"].exception(this,e,"Reading JSON file failed"),a.readAsText(t,"UTF-8"),e.preventDefault()}}},getNameField(e,t="name"){return{value:e,name:t,description:"A unique identifier. Must contain only letters (`a`-`z`), digits (`0`-`9`) and underscores (`_`). `snake_case` is recommended.",label:"Name",schema:{type:"string",pattern:"^\\w+$"},default:null}},getDescriptionField(e,t=!1,s="description",a="Description"){return{value:e,name:s,description:"Provides a detailed description. CommonMark (Markdown) syntax can be used for rich text formatting.",label:a,optional:t,schema:{type:"string",subtype:"commonmark"}}},getOptionalField(e){return{value:e,name:"optional",label:"Optional",description:"Parameters by default are required. CHeck this option to make the parameter optional. For optional parameters a default value should be specified.",optional:!0,schema:{type:"boolean"},default:!1}},getDefaultField(e){return{value:e,name:"default",label:"Default Value",description:"This value is used whenever the user of this process did not specify a value for this parameter.",toggledBy:"optional",optional:!0,schema:{}}},getExperimentalField(e){return{value:e,name:"experimental",label:"Experimental",description:"Declares that this is experimental, which means that it is unstable and likely to change.",optional:!0,schema:{type:"boolean"},default:!1}},getDeprecatedField(e){return{value:e,name:"deprecated",label:"Deprecated",description:"Declares that this is deprecated with the potential to be removed in any of the next versions. It should be transitioned out of usage.",optional:!0,schema:{type:"boolean"},default:!1}},getSchemaField(e,t="schema",s="Data Types"){let a=e?"json-schema":"openeo-datatype";return{value:e,name:t,label:s,description:"Allowed data type(s) as JSON Schema.",schema:[{title:"Single data type",type:"object",subtype:a},{title:"Multiple data types",type:"array",minItems:2,items:{type:"object",subtype:a}}]}},editProcess(e){e=o["a"].isObject(e)?e:{};let t=o["a"].isObject(e.returns)?e.returns:{};var s=[this.getNameField(e.id,"id"),{value:e.summary,name:"summary",description:"A very short description of the process with usually less than 60 characters.",label:"Summary",optional:!0,schema:{type:"string"}},this.getDescriptionField(e.description,!0),{value:e.categories,name:"categories",label:"Categories",optional:!0,schema:{type:"array",items:{type:"string"}}},this.getExperimentalField(e.experimental),this.getDeprecatedField(e.deprecated),{label:"Parameters",description:'The parameters can be edited directly in the "Visual Model" interface.',info:!0},this.getDescriptionField(t.description,!0,"returns_description","Return Value > Description"),this.getSchemaField(t.schema,"returns_schema","Return Value > Data Type"),{value:e.exceptions,name:"exceptions",description:"Declares exceptions (errors) that might occur during execution of this process. This list is just for informative purposes.\n\nThe keys of the object are the error codes, which should only consist of alphanumerical characters. `PascalCase` is recommended.",label:"Errors",optional:!0,schema:{type:"object",additionalProperties:{type:"object",required:["message"],properties:{message:{title:"Error Message",type:"string"},description:{title:"Description",type:"string",subtype:"commonmark"},http:{title:"HTTP Status Code",type:"integer",enum:[400,500,501]}}}}},{value:e.examples,name:"examples",label:"Examples",description:"Example calls for this process with specific values for the parameters (arguments) and the result (return value).",optional:!0,schema:{type:"array",items:{type:"object",required:["arguments"],properties:{title:{title:"Title",type:"string"},title:{title:"Description",type:"string",subtype:"commonmark"},arguments:{title:"Arguments",type:"object",default:{}},returns:{title:"Return Value"}}}}},{value:e.links,name:"links",label:"Links",description:"Links related to this process, e.g. additional documentation.",optional:!0,schema:{type:"array",items:{type:"object",required:["href","rel"],properties:{href:{title:"URL",type:"string"},rel:{title:"Relation",description:"For examples see [IANA relation types](https://www.iana.org/assignments/link-relations/link-relations.xhtml)",type:"string",default:"about"},title:{title:"Title",type:"string"},type:{title:"Media Type",description:"For examples see [IANA media types](https://www.iana.org/assignments/media-types/media-types.xhtml)",type:"string"}}}}}];this.emit("showDataForm","Edit Process",s,async e=>{let t=o["a"].pickFromObject(e,["id","summary","description","categories","experimental","deprecated","exception","examples","links"]);("string"===typeof t.description||o["a"].isObject(t.schema))&&(t.returns={description:e.returns_description,schema:e.returns_schema});let s=this.$refs.blocks.export(!0),a=Object.assign({},s,t);const i={id:"",summary:"",description:"",categories:[],experimental:!1,deprecated:!1,examples:[],links:[],process_graph:{}};for(let r in i)o["a"].equals(i[r],a[r])&&delete a[r];this.commit(a)})},addParameter(){var e=[this.getNameField(),this.getDescriptionField(),this.getOptionalField(),this.getDefaultField(),this.getExperimentalField(),this.getDeprecatedField(),this.getSchemaField()];this.emit("showDataForm","Add Parameter",e,async e=>{"string"===typeof e.name&&e.name.length>0&&await this.$refs.blocks.addPgParameter(e)})},editParameter(e,t="Edit Parameter",s=null){var a=[this.getNameField(e.name),this.getDescriptionField(e.description),this.getOptionalField(e.optional),this.getDefaultField(e.default),this.getExperimentalField(e.experimental),this.getDeprecatedField(e.deprecated),this.getSchemaField(e.schema)];this.emit("showDataForm",t,a,s)},showExpressionModal(){let e=new d["a"](this.value,this.processes,this.connection,!0);e.setCallbackParameters(this.$refs.blocks.getPgParameters().map(e=>e.spec));try{e.parse();let t={process:e},s={save:this.insertNodes};this.emit("showModal","ExpressionModal",t,s)}catch(t){o["a"].exception(this,t)}},openArgumentEditorForNode(e){let t=o["a"].deepClone(this.value),s=t.process_graph[e],a=this.processes.get(s.process_id,s.namespace);this.openArgumentEditor(a.parameters.map(e=>new u["ProcessParameter"](e)).filter(e=>e.isEditable()),s.arguments,a.id,!0,null,e=>{Object.assign(s,{arguments:e}),this.commit(t)})},openArgumentEditor(e,t,s="Edit",a=!0,i=null,r=null,o=null){let n={title:s,parameters:e,data:t,editable:a,selectParameterName:i,parent:o},l={};"function"===typeof r&&(l.save=r),this.emit("showModal","ParameterModal",n,l)},confirmClear(){var e=confirm("Do you really want to clear the existing model?");e&&this.clear()},clear(){this.$refs.blocks&&this.$refs.blocks.clear(),this.commit(null)},insertProcess(e,t=null,s=null){try{var a=this.$refs.blocks.getPositionForPageXY(t,s);let i=e.namespace;"backend"!==i&&"user"!==i||(i=null),this.$refs.blocks.addProcess(e.process_id,e.arguments,a,i)}catch(i){o["a"].exception(this,i)}},async insertNodes(e,t=!1){return await this.$refs.blocks.import({process_graph:e},{clear:t})}}},p=h,m=(s("4d98"),s("2877")),f=Object(m["a"])(p,a,i,!1,null,null,null);t["a"]=f.exports},"916f":function(e,t,s){"use strict";s("ebe9")},ad68:function(e,t,s){},b5d7:function(e,t,s){"use strict";s("50e5")},c98e:function(e,t,s){},ccbe:function(e,t,s){"use strict";s("4525")},cd65:function(e,t,s){},db05:function(e,t,s){"use strict";s.d(t,"a",(function(){return n}));s("d9e2");var a=s("025e"),i=s("79f4"),r=s("2b70");const o=["abstract","arguments","await","boolean","break","byte","case","catch","char","class","const","continue","debugger","default","delete","do","double","else","enum","eval","export","extends","false","final","finally","float","for","function","goto","if","implements","import","in","instanceof","int","interface","let","long","native","new","null","package","private","protected","public","return","short","static","super","switch","synchronized","this","throw","throws","transient","true","try","typeof","var","void","volatile","while","with","yield","builder","connection","formula","openeo","result"];class n extends i["a"]{constructor(e,t,s,a=!1){super(e,t,s),this.generateFormula=a}createProcessGraphInstance(e){let t=new n(e,this.processRegistry,this.getJsonSchemaValidator(),this.generateFormula);return this.copyProcessGraphInstanceProperties(t)}parse(){this.parsed||super.parse()}getKeywords(){return o}comment(e){this.addCode(e,"// ")}generateImports(){this.addCode("import { OpenEO, Formula } from '@openeo/js-client';")}generateConnection(){this.addCode(`let connection = await OpenEO.connect('${this.getServerUrl()}');`)}generateAuthentication(){this.comment("ToDo: Here you need to add your authentication steps")}generateBuilder(){this.addCode("let builder = await connection.buildProcess();")}generateMetadataEntry(e,t){this.addCode(`builder.${e} = ${this.e(t)};`)}async generateFunction(e){let t=this.var(e.id),s=e.getParent()?"this":"builder",i=await this.generateArguments(e,!e.namespace);if(this.comment(e.description),a["a"].isObject(i)){let a=e.namespace?`${e.process_id}@${e.namespace}`:e.process_id;this.addCode(`let ${t} = ${s}.process("${a}", ${this.e(i)});`)}else this.addCode(`let ${t} = ${s}.${e.process_id}(${i.map(e=>this.e(e)).join(", ")});`)}generateMissingParameter(e){this.comment(e.description);let t=this.var(e.name,"param"),s="undefined"!==typeof e.default?e.default:null;this.addCode(`let ${t} = ${this.e(s)};`)}async generateCallback(e,t,s){if(this.generateFormula&&e&&e.isMath()){let t=e.toFormulaString(),s=JSON.stringify(t);return`new Formula(${s})`}{let a=this.generateFunctionParams(t);this.newLine(),this.addCode(`let ${s} = function(${a.join(", ")}) {`),this.indent++,this.addCode(await e.toCode(!0)),this.indent--,this.addCode("}")}}generateResult(e,t){if(!e)return;let s=this.var(e.id);t?this.addCode(`return ${s};`):this.addCode(`let result = await connection.computeResult(${s});`)}toFormulaString(){return this.isMath()?this.nodeToFormula(this.getResultNode()):""}getArrayElementPlaceholder(e){if("array_element"===e.process_id&&"parameter"===e.getArgumentType("data")){let t=e.getRawArgument("data").from_parameter,s=this.getCallbackParameters().findIndex(e=>e.name===t);if(s>=0)return"$".repeat(s+1)+(e.getArgument("label")||e.getArgument("index"))}return null}nodeToFormula(e,t=null){if("array_element"===e.process_id){let t=this.getArrayElementPlaceholder(e);if(t)return t}let s=r["Formula"].reverseOperatorMapping[e.process_id],i=this.processRegistry.get(e.process_id),o="undefined"!==typeof r["Formula"].arrayOperatorMapping[e.process_id],n=t=>{if(a["a"].isObject(t))if(t.from_node){let a=e.getProcessGraph().getNode(t.from_node);t=a?this.nodeToFormula(a,s):"#"+t.from_node}else{if(!t.from_parameter)throw new Error("Objects not allowed");t=t.from_parameter}return t},l=[],c=Array.isArray(i.parameters)?i.parameters:[];for(let a of c){let t=n(e.getRawArgument(a.name));if(o&&Array.isArray(t)&&"data"===a.name){l=t.map(e=>n(e));break}if("undefined"!==typeof t)l.push(t);else{if("undefined"===typeof a.default)throw new Error('Argument for parameter "'+a.name+'" missing');l.push(a.default)}}if(o&&(l=l.filter(e=>null!==e)),s){let e=["/","*"],a=["-","+"],i=l.map(e=>e<0?"("+e+")":e).join(s);return!t||a.includes(t)&&a.includes(s)||"^"===s||a.includes(t)&&e.includes(s)?i:"("+i+")"}return e.process_id+"("+l.join(", ")+")"}}},db4b:function(e,t,s){},e979:function(e,t,s){"use strict";var a=s("025e"),i=s("3075");class r extends i["b"]{constructor(e,t="DataViewer"){super(e,t),this.isGeoJson=!1}async parseData(e){if("string"===typeof e)try{e=JSON.parse(e)}catch(t){console.log(t)}return a["a"].detectGeoJson(e)&&(this.isGeoJson=!0,this.component="MapViewer",this.icon="fa-map"),e}}t["a"]=r},ebe9:function(e,t,s){},f3db:function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"wrapper"}},[s("div",{class:{authenticated:e.isAuthenticated},attrs:{id:"ide"}},[s("header",{staticClass:"navbar"},[s("Logo"),s("ul",{attrs:{id:"menu"}},[s("li",[s("div",{staticClass:"menuItem",attrs:{title:"Start a guided tour"},on:{click:e.showHelp}},[s("i",{staticClass:"fas fa-question fa-fw"}),e._v(" Help")])]),s("li",[s("div",{staticClass:"menuItem",attrs:{title:"Get server information"},on:{click:e.showServerInfo}},[s("i",{staticClass:"fas fa-info fa-fw"}),e._v(" Server")])]),s("li",[s("UserMenu")],1)])],1),s("Splitpanes",{staticClass:"default-theme",on:{resize:e.resized,"pane-maximize":e.resized}},[s("Pane",{attrs:{id:"discovery",size:e.splitpaneSizeH[0]}},[s("DiscoveryToolbar",{staticClass:"toolbar tour-ide-discovery",attrs:{onAddProcess:e.insertProcess,collectionPreview:!0,persist:!0}})],1),s("Pane",{attrs:{id:"workspace",size:e.splitpaneSizeH[1]}},[s("Splitpanes",{staticClass:"default-theme",attrs:{horizontal:""},on:{resize:e.resized,"pane-maximize":e.resized}},[s("Pane",{attrs:{id:"editor",size:e.splitpaneSizeV[0]}},[s("Editor",{ref:"editor",staticClass:"mainEditor tour-ide-editor",attrs:{id:"main",value:e.process,title:e.contextTitle},on:{input:e.updateEditor},scopedSlots:e._u([{key:"file-toolbar",fn:function(){return[s("button",{attrs:{type:"button",title:"Import process from external source"},on:{click:e.importProcess}},[s("i",{staticClass:"fas fa-cloud-download-alt"})]),s("button",{directives:[{name:"show",rawName:"v-show",value:e.saveSupported,expression:"saveSupported"}],attrs:{type:"button",disabled:!e.hasProcess,title:"Save to "+e.contextTitle},on:{click:e.saveProcess}},[s("i",{staticClass:"fas fa-save"})]),s("button",{attrs:{type:"button",disabled:!e.hasProcess,title:"Export into another programming language"},on:{click:e.exportCode}},[s("i",{staticClass:"fas fa-file-export"})]),s("button",{directives:[{name:"show",rawName:"v-show",value:e.validateSupported,expression:"validateSupported"}],attrs:{type:"button",disabled:!e.hasProcess,title:"Validate process on server-side"},on:{click:e.validateProcess}},[s("i",{staticClass:"fas fa-tasks"})])]},proxy:!0}])})],1),s("Pane",{attrs:{id:"user",size:e.splitpaneSizeV[1]}},[e.isAuthenticated?s("UserWorkspace",{staticClass:"userContent tour-ide-workspace"}):s("div",{staticClass:"message info",attrs:{title:"Login is required to interact with the server."}},[s("i",{staticClass:"fas fa-sign-in-alt"}),s("span",{staticClass:"login-message"},[s("strong",[s("a",{on:{click:e.login}},[e._v("Log in")])]),e._v(" is required to interact with the server.")])])],1)],1)],1),s("Pane",{class:{empty:!e.showViewer},attrs:{id:"viewer",size:e.splitpaneSizeH[2]}},[s("Viewer",{staticClass:"tour-ide-viewer",on:{empty:e.onViewerEmpty}})],1)],1)],1)])},i=[],r=s("3115"),o=s("025e"),n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"UserMenu"}},[s("div",{staticClass:"menuItem"},[e._m(0),s("div",{staticClass:"data"},[s("span",{staticClass:"name nowrap"},[s("i",{staticClass:"fas fa-user"}),e._v(" "+e._s(e.userName))]),e.budget?s("span",{staticClass:"credits nowrap"},[s("i",{staticClass:"fas fa-dollar-sign fa-fw"}),e._v(" "+e._s(e.budget))]):e._e(),e.hasStorage?s("span",{staticClass:"storage nowrap"},[s("i",{staticClass:"fas fa-database fa-fw"}),e._v(" "+e._s(e.storageUsedPercent)+"% used")]):e._e()])]),s("div",{staticClass:"dropdown"},[e.profileLink?s("a",{staticClass:"item",attrs:{href:e.profileLink.href,target:"_blank"}},[e._v("Welcome, "+e._s(e.userName)+"!")]):s("div",{staticClass:"item"},[e._v("Welcome, "+e._s(e.userName)+"!")]),e.isAuthenticated?[e.settingsLink?s("a",{staticClass:"item",attrs:{href:e.settingsLink.href,target:"_blank"}},[s("i",{staticClass:"fas fa-user-edit"}),e._v(" "+e._s(e.settingsLink.title||"Edit Profile"))]):e._e(),s("a",{staticClass:"item",on:{click:function(t){return t.preventDefault(),e.logout.apply(null,arguments)}}},[s("i",{staticClass:"fas fa-sign-out-alt"}),e._v(" Logout")])]:[s("a",{staticClass:"item",on:{click:function(t){return t.preventDefault(),e.login.apply(null,arguments)}}},[s("i",{staticClass:"fas fa-sign-in-alt"}),e._v(" Login")]),e.registerLink?s("a",{staticClass:"item",attrs:{href:e.registerLink.href,target:"_blank"}},[s("i",{staticClass:"fas fa-user-plus"}),e._v(" Register")]):e._e(),e.passwordLink?s("a",{staticClass:"item",attrs:{href:e.passwordLink.href,target:"_blank"}},[s("i",{staticClass:"fas fa-key"}),e._v(" Forgotten Password?")]):e._e()],e.$config.serverUrl?e._e():s("a",{staticClass:"item",on:{click:function(t){return t.preventDefault(),e.disconnect.apply(null,arguments)}}},[s("i",{staticClass:"fas fa-sign-out-alt"}),e._v(" Disconnect")]),e.userLinks.length>0?[s("hr"),e._l(e.userLinks,(function(t,a){return s("a",{key:a,staticClass:"item",attrs:{href:t.href,target:"_blank",rel:t.rel}},[e._v(e._s(t.title))])}))]:e._e(),e.budget||e.userInfo.default_plan||e.paymentLink?[s("hr"),s("div",{staticClass:"item"},[s("h4",[e._v("Billing")]),e.userInfo.default_plan?s("div",{staticClass:"secondary-text"},[e._v("Plan: "+e._s(e.userInfo.default_plan))]):e._e(),e.budget?s("div",{staticClass:"secondary-text"},[e._v("Budget: "+e._s(e.budget))]):e._e()]),e.paymentLink?s("a",{staticClass:"item",attrs:{href:e.paymentLink.href,target:"_blank"}},[s("i",{staticClass:"fas fa-credit-card"}),e._v(" "+e._s(e.paymentLink.title||"Recharge"))]):e._e()]:e._e(),e.hasStorage?[s("hr"),s("div",{staticClass:"item"},[s("h4",[e._v("Storage")]),s("div",{staticClass:"secondary-text nowrap"},[e._v("Used "+e._s(e.formatMegabyte(e.storageUsed))+" of "+e._s(e.formatMegabyte(e.userInfo.storage.quota))+".")]),s("div",{staticClass:"storagePercent"},[s("div",{staticClass:"used",style:"width: "+e.storageUsedPercent+"%"})])])]:e._e()],2)])},l=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"down"},[s("i",{staticClass:"fas fa-chevron-down"})])}],c={name:"UserMenu",mixins:[r["a"]],computed:{...o["a"].mapState(["userInfo","isAuthenticated"]),...o["a"].mapGetters(["currency","capabilities"]),userLinks(){return o["a"].friendlyLinks(this.userInfo.links,!0,["self","edit-form","payment","alternate"])},serverLinks(){return this.capabilities?this.capabilities.links():[]},registerLink(){return this.serverLinks.find(e=>"create-form"===e.rel)},passwordLink(){return this.serverLinks.find(e=>"recovery-form"===e.rel)},settingsLink(){return Array.isArray(this.userInfo.links)?this.userInfo.links.find(e=>"edit-form"===e.rel):void 0},paymentLink(){return Array.isArray(this.userInfo.links)?this.userInfo.links.find(e=>"payment"===e.rel):void 0},profileLink(){return Array.isArray(this.userInfo.links)?this.userInfo.links.find(e=>"alternate"===e.rel):void 0},hasStorage(){return o["a"].isObject(this.userInfo.storage)&&"number"===typeof this.userInfo.storage.quota&&"number"===typeof this.userInfo.storage.free},budget(){return o["a"].formatBudget(this.userInfo.budget,this.currency)},userName(){return"string"===typeof this.userInfo.name?this.userInfo.name:"string"===typeof this.userInfo.user_id?this.userInfo.user_id:this.isAuthenticated?"User":"Guest"},storageUsed(){return this.hasStorage?this.userInfo.storage.quota-this.userInfo.storage.free:null},storageUsedPercent(){return this.hasStorage?Math.round(this.storageUsed/this.userInfo.storage.quota*100):null}},methods:{...o["a"].mapActions({logoutUser:"logout"}),...o["a"].mapMutations("editor",{resetEditor:"reset"}),async logout(){await this.logoutUser(!1),o["a"].ok(this,"Logout successful.")},async disconnect(){await this.logoutUser(!0),this.resetEditor(),window.history.pushState({},"","?")},login(){this.emit("showLogin")},formatMegabyte(e){var t=1073741824;return e>t?Math.round(e/t)+" GB":Math.round(e/1048576)+" MB"}}},u=c,d=(s("fdbd"),s("2877")),h=Object(d["a"])(u,n,l,!1,null,"76333d38",null),p=h.exports,m=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("Tabs",{ref:"tabs",attrs:{id:"userContent"}},[e.showJobs?s("Tab",{attrs:{id:"jobs",name:"Data Processing",icon:"fa-tasks"},on:{show:e.onShow,hide:e.onHide}},[s("JobPanel")],1):e._e(),e.showServices?s("Tab",{attrs:{id:"services",name:"Web Services",icon:"fa-cloud"},on:{show:e.onShow,hide:e.onHide}},[s("ServicePanel")],1):e._e(),e.showCustomProcesses?s("Tab",{attrs:{id:"customProcesses",name:"Custom Processes",icon:"fa-sitemap"},on:{show:e.onShow,hide:e.onHide}},[s("CustomProcessPanel")],1):e._e(),e.showFiles?s("Tab",{attrs:{id:"files",name:"Files",icon:"fa-file"},on:{show:e.onShow,hide:e.onHide}},[s("FilePanel")],1):e._e()],1)},f=[],g=s("e7ea"),b=s("bdb2"),w=s("d24e"),y=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("DataTable",{ref:"table",staticClass:"JobPanel",attrs:{data:e.data,columns:e.columns},scopedSlots:e._u([{key:"actions",fn:function(t){return[s("button",{directives:[{name:"show",rawName:"v-show",value:e.supportsRead,expression:"supportsRead"}],attrs:{title:"Details"},on:{click:function(s){return e.showJobInfo(t.row)}}},[s("i",{staticClass:"fas fa-info"})]),s("button",{directives:[{name:"show",rawName:"v-show",value:e.supports("estimateJob"),expression:"supports('estimateJob')"}],attrs:{title:"Estimate"},on:{click:function(s){return e.estimateJob(t.row)}}},[s("i",{staticClass:"fas fa-file-invoice-dollar"})]),s("button",{directives:[{name:"show",rawName:"v-show",value:e.supportsUpdate,expression:"supportsUpdate"}],attrs:{title:"Edit metadata",disabled:!e.isJobInactive(t.row)},on:{click:function(s){return e.editMetadata(t.row)}}},[s("i",{staticClass:"fas fa-edit"})]),s("button",{directives:[{name:"show",rawName:"v-show",value:e.supportsRead,expression:"supportsRead"}],attrs:{title:"Edit process"},on:{click:function(s){return e.showInEditor(t.row)}}},[s("i",{staticClass:"fas fa-project-diagram"})]),s("button",{directives:[{name:"show",rawName:"v-show",value:e.supportsDelete,expression:"supportsDelete"}],attrs:{title:"Delete"},on:{click:function(s){return e.deleteJob(t.row)}}},[s("i",{staticClass:"fas fa-trash"})]),s("button",{directives:[{name:"show",rawName:"v-show",value:e.supports("startJob")&&e.isJobInactive(t.row),expression:"supports('startJob') && isJobInactive(p.row)"}],attrs:{title:"Start processing"},on:{click:function(s){return e.queueJob(t.row)}}},[s("i",{staticClass:"fas fa-play-circle"})]),s("button",{directives:[{name:"show",rawName:"v-show",value:e.supports("stopJob")&&e.isJobActive(t.row),expression:"supports('stopJob') && isJobActive(p.row)"}],attrs:{title:"Cancel processing"},on:{click:function(s){return e.cancelJob(t.row)}}},[s("i",{staticClass:"fas fa-stop-circle"})]),s("button",{directives:[{name:"show",rawName:"v-show",value:e.supports("downloadResults")&&e.mayHaveResults(t.row),expression:"supports('downloadResults') && mayHaveResults(p.row)"}],attrs:{title:"Download"},on:{click:function(s){return e.downloadResults(t.row)}}},[s("i",{staticClass:"fas fa-download"})]),s("button",{directives:[{name:"show",rawName:"v-show",value:e.supports("downloadResults")&&e.mayHaveResults(t.row),expression:"supports('downloadResults') && mayHaveResults(p.row)"}],attrs:{title:"View results"},on:{click:function(s){return e.viewResults(t.row,!0)}}},[s("i",{staticClass:"fas fa-eye"})]),s("button",{directives:[{name:"show",rawName:"v-show",value:e.supports("debugJob"),expression:"supports('debugJob')"}],attrs:{title:"View logs"},on:{click:function(s){return e.showLogs(t.row)}}},[s("i",{staticClass:"fas fa-bug"})])]}}])},[s("template",{slot:"toolbar"},[s("button",{directives:[{name:"show",rawName:"v-show",value:e.supportsCreate,expression:"supportsCreate"}],attrs:{title:"Add new job for batch processing",disabled:!this.hasProcess},on:{click:function(t){return e.createJobFromScript()}}},[s("i",{staticClass:"fas fa-plus"}),e._v(" Create Batch Job")]),s("button",{directives:[{name:"show",rawName:"v-show",value:e.supports("computeResult"),expression:"supports('computeResult')"}],attrs:{title:"Run the process directly and view the results without storing them permanently",disabled:!this.hasProcess},on:{click:e.executeProcess}},[s("i",{staticClass:"fas fa-play"}),e._v(" Run / Preview")])])],2)},v=[],C=s("41a2"),S=s("2b70");const k=Object(C["a"])("jobs","batch job","batch jobs");var x={name:"JobPanel",mixins:[k,r["a"]],data(){return{columns:{id:{name:"ID",primaryKey:!0,hide:!0},title:{name:"Batch Job",computedValue:e=>o["a"].getResourceTitle(e),format:e=>o["a"].formatIdOrTitle(e),edit:this.updateTitle},status:{name:"Status",stylable:!0},created:{name:"Submitted",format:"Timestamp",sort:"desc"},updated:{name:"Last update",format:"Timestamp"},actions:{name:"Actions",filterable:!1,sort:!1}},watchers:{},jobUpdater:null,runId:0}},mounted(){this.listen("replaceProcess",this.replaceProcess)},computed:{...o["a"].mapState(["connection"]),...o["a"].mapGetters(["supports","supportsBilling","supportsBillingPlans"]),...o["a"].mapGetters("editor",["hasProcess"]),...o["a"].mapState("editor",["process"])},watch:{data:{handler:function(e){this.watchers={};for(let t of e)o["a"].isActiveJobStatusCode(t.status)&&(this.watchers[t.id]=t)},deep:!0}},methods:{...o["a"].mapActions("jobs",["queue","cancel"]),startSyncTimer(){k.methods.startSyncTimer.call(this),this.jobUpdater=setInterval(this.executeWatchers,1e4)},stopSyncTimer(){k.methods.stopSyncTimer.call(this),null!==this.jobUpdater&&clearInterval(this.jobUpdater)},showInEditor(e){this.refreshElement(e,e=>this.emit("editProcess",e))},async executeProcess(){let e,t=new S["AbortController"],s={timeout:0,type:"async",buttons:[{text:"Cancel",action:e=>{t.abort(),this.$snotify.remove(e.id,!0)}}]};try{this.runId++;let a="A process is currently executed synchronously...",i="Run / Preview #"+this.runId,r=()=>new Promise(()=>{});e=this.$snotify.async(a,i,r,s);let o=await this.connection.computeResult(this.process,null,null,t);this.emit("viewSyncResult",o)}catch(a){axios.isCancel(a)||("string"===typeof a.message&&o["a"].isObject(a.response)&&[400,500].includes(a.response.status)?(this.emit("viewLogs",[{id:a.id,code:a.code,level:"error",message:a.message,links:a.links||[]}]),o["a"].error(this,"Synchronous processing failed. Please see the logs for details.","Processing Error")):o["a"].exception(this,a,"Server Error"))}finally{e&&this.$snotify.remove(e.id,!0)}},jobCreated(e){var t=[];this.supports("estimateJob")&&t.push({text:"Estimate",action:()=>this.estimateJob(e)}),this.supports("startJob")&&t.push({text:"Start processing",action:()=>this.queueJob(e)}),this.supports("deleteJob")&&t.push({text:"Delete",action:()=>this.deleteJob(e)}),o["a"].confirm(this,'Job "'+o["a"].getResourceTitle(e)+'" created!',t)},getTitleField(e=null){return{name:"title",label:"Title",schema:{type:"string"},default:null,value:e,optional:!0}},getDescriptionField(e=null){return{name:"description",label:"Description",schema:{type:"string",subtype:"commonmark"},default:null,value:e,description:"CommonMark (Markdown) is allowed.",optional:!0}},getBillingPlanField(e){return{name:"plan",label:"Billing plan",schema:{type:"string",subtype:"billing-plan"},value:e,optional:!0}},getBudgetField(e=null){return{name:"budget",label:"Budget",schema:{type:"number",subtype:"budget"},default:null,value:e,optional:!0}},normalizeToDefaultData(e){return"undefined"===typeof e.title||"string"===typeof e.title&&0!==e.title.length||(e.title=null),"undefined"===typeof e.description||"string"===typeof e.description&&0!==e.description.length||(e.description=null),"undefined"===typeof e.plan||"string"===typeof e.plan&&0!==e.plan.length||(e.plan=null),"undefined"!==typeof e.budget&&("number"!==typeof e.budget||e.budget<0)&&(e.budget=null),e},async createJob(e,t){try{t=this.normalizeToDefaultData(t);let s=await this.create({parameters:[e,t.title,t.description,t.plan,t.budget]});this.jobCreated(s)}catch(s){o["a"].exception(this,s,"Create Job Error: "+(t.title||""))}},createJobFromScript(){var e=[this.getTitleField(),this.getDescriptionField(),this.supportsBillingPlans?this.getBillingPlanField():null,this.supportsBilling?this.getBudgetField():null];this.emit("showDataForm","Create new batch job",e,e=>this.createJob(this.process,e))},async deleteJob(e){if(confirm(`Do you really want to delete the batch job "${o["a"].getResourceTitle(e)}"?`))try{await this.delete({data:e}),this.emit("removeBatchJob",e.id)}catch(t){o["a"].exception(this,t,"Delete Job Error: "+o["a"].getResourceTitle(e))}},executeWatchers(){for(var e in this.watchers)this.refreshElement(this.watchers[e],(e,t)=>{if("finished"!==t.status&&"finished"===e.status){var s=[];this.supports("downloadResults")&&(s.push({text:"Download",action:()=>this.downloadResults(e)}),s.push({text:"View",action:()=>this.viewResults(e)})),o["a"].confirm(this,'Job "'+o["a"].getResourceTitle(e)+'" has finished!',s)}else"error"!==t.status&&"error"===e.status&&o["a"].error(this,'Job "'+o["a"].getResourceTitle(e)+'" has stopped due to an error or timeout.');t.status!==e.status&&this.emit("jobStatusUpdated",e,t)})},async showJobInfo(e){this.refreshElement(e,async e=>{let t=null;if("finished"===e.status)try{t=await e.getResultsAsStac()}catch(s){o["a"].exception(this,s,"Load Results Error: "+o["a"].getResourceTitle(e))}this.emit("showModal","JobInfoModal",{job:e.getAll(),result:t})})},async estimateJob(e){try{let t=await e.estimateJob();this.emit("showModal","JobEstimateModal",{job:e.getAll(),estimate:t})}catch(t){o["a"].exception(this,t,"Job Estimate Error: "+o["a"].getResourceTitle(e))}},showLogs(e){this.emit("viewLogs",e)},replaceProcess(e,t){e instanceof S["Job"]&&(this.isJobActive(e)?o["a"].error(this,"Can't update process while batch job is running."):this.updateJob(e,{process:t}))},editMetadata(e){this.refreshElement(e,e=>{var t=[this.getTitleField(e.title),this.getDescriptionField(e.description),this.supportsBillingPlans?this.getBillingPlanField(e.plan):null,this.supportsBilling?this.getBudgetField(e.budget):null];this.emit("showDataForm","Edit batch job",t,t=>this.updateJob(e,t))})},updateTitle(e,t){this.updateJob(e,{title:t})},async updateJob(e,t){try{let s=await this.update({data:e,parameters:this.normalizeToDefaultData(t)});o["a"].ok(this,'Job "'+o["a"].getResourceTitle(s)+'" successfully updated.')}catch(s){o["a"].exception(this,s,"Update Job Error: "+o["a"].getResourceTitle(e))}},async queueJob(e){this.refreshElement(e,async t=>{if("finished"!==t.status||confirm(`The batch job "${o["a"].getResourceTitle(t)}" has already finished with results. Queueing the job again may discard all previous results! Do you really want to queue it again?`))try{let t=await this.queue({data:e});o["a"].ok(this,'Job "'+o["a"].getResourceTitle(t)+'" successfully queued.')}catch(s){o["a"].exception(this,s,"Queue Job Error: "+o["a"].getResourceTitle(e))}})},async cancelJob(e){if(confirm(`Do you really want to cancel the execution of batch job "${o["a"].getResourceTitle(e)}"?`))try{let t=await this.cancel({data:e});o["a"].ok(this,'Job "'+o["a"].getResourceTitle(t)+'" successfully canceled.')}catch(t){o["a"].exception(this,t,"Cancel Job Error: "+o["a"].getResourceTitle(e))}},async viewResults(e){try{let t=await e.getResultsAsStac();if(0==o["a"].size(t.assets))return void o["a"].error(this,'No results available for job "'+o["a"].getResourceTitle(e)+'".');this.emit("viewJobResults",t,e)}catch(t){o["a"].exception(this,t,"View Result Error: "+o["a"].getResourceTitle(e))}},async downloadResults(e){try{let t=await e.getResultsAsStac();if(0==o["a"].size(t.assets))return void o["a"].error(this,'No results available for job "'+o["a"].getResourceTitle(e)+'".');this.emit("showModal","DownloadAssetsModal",{job:e,result:t})}catch(t){o["a"].exception(this,t,"Download Result Error: "+o["a"].getResourceTitle(e))}},mayHaveResults(e){return"string"!==typeof e.status||"finished"==e.status.toLowerCase()},isJobInactive(e){return!0!==o["a"].isActiveJobStatusCode(e.status)},isJobActive(e){return!1!==o["a"].isActiveJobStatusCode(e.status)}}},P=x,T=(s("8663"),Object(d["a"])(P,y,v,!1,null,null,null)),_=T.exports,D=s("f0fa"),F=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("DataTable",{ref:"table",staticClass:"ServicePanel",attrs:{data:e.data,columns:e.columns},scopedSlots:e._u([{key:"actions",fn:function(t){return[s("button",{directives:[{name:"show",rawName:"v-show",value:e.supportsRead,expression:"supportsRead"}],attrs:{title:"Details"},on:{click:function(s){return e.serviceInfo(t.row)}}},[s("i",{staticClass:"fas fa-info"})]),s("button",{directives:[{name:"show",rawName:"v-show",value:e.supportsUpdate,expression:"supportsUpdate"}],attrs:{title:"Edit metadata"},on:{click:function(s){return e.editMetadata(t.row)}}},[s("i",{staticClass:"fas fa-edit"})]),s("button",{directives:[{name:"show",rawName:"v-show",value:e.supportsRead,expression:"supportsRead"}],attrs:{title:"Edit process"},on:{click:function(s){return e.showInEditor(t.row)}}},[s("i",{staticClass:"fas fa-project-diagram"})]),s("button",{directives:[{name:"show",rawName:"v-show",value:e.supportsDelete,expression:"supportsDelete"}],attrs:{title:"Delete"},on:{click:function(s){return e.deleteService(t.row)}}},[s("i",{staticClass:"fas fa-trash"})]),s("button",{directives:[{name:"show",rawName:"v-show",value:t.row.enabled&&e.isMapServiceSupported(t.row.type),expression:"p.row.enabled && isMapServiceSupported(p.row.type)"}],attrs:{title:"View on map"},on:{click:function(s){return e.viewService(t.row)}}},[s("i",{staticClass:"fas fa-map"})]),s("button",{directives:[{name:"show",rawName:"v-show",value:e.supports("debugService"),expression:"supports('debugService')"}],attrs:{title:"View logs"},on:{click:function(s){return e.showLogs(t.row)}}},[s("i",{staticClass:"fas fa-bug"})])]}}])},[s("template",{slot:"toolbar"},[s("button",{directives:[{name:"show",rawName:"v-show",value:e.supportsCreate,expression:"supportsCreate"}],attrs:{title:"Add new service",disabled:!this.hasProcess},on:{click:function(t){return e.createServiceFromScript()}}},[s("i",{staticClass:"fas fa-plus"}),e._v(" Create")])])],2)},j=[],E={name:"ServicePanel",mixins:[Object(C["a"])("services","web service","web services"),r["a"]],data(){return{columns:{id:{name:"ID",primaryKey:!0,hide:!0},title:{name:"Web Service",computedValue:e=>o["a"].getResourceTitle(e),format:e=>o["a"].formatIdOrTitle(e),edit:this.updateTitle},type:{name:"Type",format:e=>"string"===typeof e?e.toUpperCase():e},enabled:{name:"Enabled",edit:this.toggleEnabled},created:{name:"Submitted",format:"Timestamp",sort:"desc"},actions:{name:"Actions",filterable:!1,sort:!1}}}},computed:{...o["a"].mapState("editor",["process"]),...o["a"].mapGetters("editor",["hasProcess"]),...o["a"].mapState(["serviceTypes"]),...o["a"].mapGetters(["supports","supportsBilling","supportsBillingPlans"])},mounted(){this.listen("replaceProcess",this.replaceProcess)},methods:{isMapServiceSupported(e){return o["a"].isMapServiceSupported(e)},showInEditor(e){this.refreshElement(e,e=>this.emit("editProcess",e))},showLogs(e){this.emit("viewLogs",e)},serviceCreated(e){var t=[];this.isMapServiceSupported(e.type)&&t.push({text:"View on map",action:()=>this.viewService(e)}),this.supportsRead&&t.push({text:"Details",action:()=>this.serviceInfo(e)}),this.supportsDelete&&t.push({text:"Delete",action:()=>this.deleteService(e)}),o["a"].confirm(this,"Web Service created!",t)},getTitleField(e=null){return{name:"title",label:"Title",schema:{type:"string"},default:null,value:e,optional:!0}},getDescriptionField(e=null){return{name:"description",label:"Description",schema:{type:"string",subtype:"commonmark"},default:null,value:e,description:"CommonMark (Markdown) is allowed.",optional:!0}},getServiceTypeField(e){return{name:"type",label:"Type",schema:{type:"string",subtype:"service-type"},value:e}},getBillingPlanField(e){return{name:"plan",label:"Billing plan",schema:{type:"string",subtype:"billing-plan"},value:e,optional:!0}},getBudgetField(e=null){return{name:"budget",label:"Budget",schema:{type:"number",subtype:"budget"},default:null,value:e,optional:!0}},getEnabledField(e=!0){return{name:"enabled",label:"Enabled",schema:{type:"boolean"},default:!0,value:e,optional:!0}},getConfigField(e){return{name:"configuration",label:"Service Configuration",schema:{type:"object",subtype:"service-config"},value:e,optional:!0}},normalizeToDefaultData(e){return"undefined"===typeof e.title||"string"===typeof e.title&&0!==e.title.length||(e.title=null),"undefined"===typeof e.description||"string"===typeof e.description&&0!==e.description.length||(e.description=null),"undefined"!==typeof e.enabled&&"boolean"!==typeof e.enabled&&(e.enabled=!0),"undefined"===typeof e.configuration||o["a"].isObject(e.configuration)||(e.configuration={}),"undefined"===typeof e.plan||"string"===typeof e.plan&&0!==e.plan.length||(e.plan=null),"undefined"!==typeof e.budget&&("number"!==typeof e.budget||e.budget<0)&&(e.budget=null),e},async createService(e,t){t=this.normalizeToDefaultData(t);try{let s=await this.create({parameters:[e,t.type,t.title,t.description,t.enabled,t.configuration,t.plan,t.budget]});this.serviceCreated(s)}catch(s){o["a"].exception(this,s,"Create Service Error: "+(t.title||""))}},createServiceFromScript(){var e=[this.getTitleField(),this.getDescriptionField(),this.getServiceTypeField(),this.getEnabledField(),this.supportsBillingPlans?this.getBillingPlanField():null,this.supportsBilling?this.getBudgetField():null,this.getConfigField()];this.emit("showDataForm","Create new web service",e,e=>this.createService(this.process,e))},editMetadata(e){this.refreshElement(e,e=>{var t=[this.getTitleField(e.title),this.getDescriptionField(e.description),this.getEnabledField(e.enabled),this.supportsBillingPlans?this.getBillingPlanField(e.plan):null,this.supportsBilling?this.getBudgetField(e.budget):null,this.getConfigField(e.configuration)];this.emit("showDataForm","Edit web service",t,t=>this.updateService(e,t))})},serviceInfo(e){this.refreshElement(e,e=>{this.emit("showModal","ServiceInfoModal",{service:e.getAll()})})},replaceProcess(e,t){e instanceof S["Service"]&&this.updateService(e,{process:t})},updateTitle(e,t){this.updateService(e,{title:t})},toggleEnabled(e){this.updateService(e,{enabled:!e.enabled})},async updateService(e,t){try{let s=await this.update({data:e,parameters:this.normalizeToDefaultData(t)});o["a"].ok(this,'Service "'+o["a"].getResourceTitle(s)+'" successfully updated.')}catch(s){o["a"].exception(this,s,"Update Service Error: "+o["a"].getResourceTitle(e))}},async deleteService(e){if(confirm(`Do you really want to delete the service "${o["a"].getResourceTitle(e)}"?`))try{await this.delete({data:e}),this.emit("removeWebService",e.id)}catch(t){o["a"].exception(this,t,"Delete Service Error: "+o["a"].getResourceTitle(e))}},viewService(e){this.emit("viewWebService",e)}}},A=E,R=(s("916f"),Object(d["a"])(A,F,j,!1,null,null,null)),I=R.exports,M={name:"UserWorkspace",components:{FilePanel:w["a"],JobPanel:_,CustomProcessPanel:D["a"],ServicePanel:I,Tabs:g["default"],Tab:b["default"]},computed:{...o["a"].mapGetters(["supports"]),showJobs(){return this.supports("listJobs")||this.supports("createJob")},showServices(){return this.supports("listServices")||this.supports("createService")},showCustomProcesses(){return this.supports("listUserProcesses")||this.supports("setUserProcess")},showFiles(){return this.supports("listFiles")||this.supports("uploadFile")}},methods:{onShow(e){e.$children.length&&"function"===typeof e.$children[0].onShow&&e.$children[0].onShow()},onHide(e){e.$children.length&&"function"===typeof e.$children[0].onHide&&e.$children[0].onHide()}}},$=M,J=(s("b5d7"),Object(d["a"])($,m,f,!1,null,null,null)),L=J.exports,O=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"viewerContainer",on:{drop:e.onDrop,dragover:e.allowDrop}},[s("Tabs",{ref:"tabs",attrs:{id:"viewerTabs"},on:{empty:e.onTabsEmpty},scopedSlots:e._u([{key:"empty",fn:function(){return[e._v("Nothing to show right now...")]},proxy:!0},{key:"dynamic",fn:function(t){var a=t.tab;return[e.logViewerIcons.includes(a.icon)?s("LogViewer",{attrs:{data:a.data}}):"fa-map"===a.icon?s("MapViewer",{attrs:{data:a.data,removableLayers:e.isCollectionPreview(a.data)},on:{show:e.onShow,hide:e.onHide}}):a.data.component?s(a.data.component,e._g(e._b({tag:"component",on:{show:e.onShow,hide:e.onHide}},"component",a.data.props,!1),a.data.events)):s("div",{staticClass:"unsupported"},[e._v(" Sorry, the viewer doesn't support showing this type of data. "),e.isFormat(a.data)?[e._v(" Instead, you can download the data by clicking the link below."),s("br"),s("a",{attrs:{href:a.data.getUrl(),download:""}},[e._v("Download")])]:e._e()],2)]}}])})],1)},N=[],U=(s("d9e2"),s("b40f")),B=s.n(U),V=s("3075");class z extends V["b"]{constructor(e){super(e,"ImageViewer","fa-image")}isBinary(){return!0}async fetchData(){let e=new Image;return e.crossOrigin="anonymous",e.src=this.getUrl(),e}}var G=z;class H extends V["b"]{constructor(e,t=[",",";"]){super(e,"TableViewer","fa-table"),this.delim=t}async parseData(e){if("string"===typeof e){let t=this.parseCSV(e.trim());return t.map(e=>e.map(e=>{let t=Number.parseFloat(e);return Number.isNaN(t)?e:t}))}return e}parseCSV(e){for(var t=[],s=!1,a=0,i=0,r=0;r<e.length;r++){var o=e[r],n=e[r+1];t[a]=t[a]||[],t[a][i]=t[a][i]||"",'"'==o&&s&&'"'==n?(t[a][i]+=o,++r):'"'!=o?!this.delim.includes(o)||s?"\r"!=o||"\n"!=n||s?("\n"!=o||s)&&("\r"!=o||s)?t[a][i]+=o:(++a,i=0):(++a,i=0,++r):++i:s=!s}return t}}var q=H,W=s("57f6"),K=s("e979");class X extends V["b"]{constructor(e){super(e,"DataViewer")}}var Q=X;class Y extends q{constructor(e){super(e,["\t"])}}var Z=Y;class ee{constructor(){}createFilesFromSTAC(e,t=null){let s=Object.values(e.assets).map(t=>this.createFileFromAsset(t,e));return t&&s.forEach(e=>e.setContext(t)),s}createFilesFromBlob(e){if(!(e instanceof Blob))throw new Error("Given data is not a valid Blob");return this.createFilesFromSTAC({stac_version:"1.0.0",type:"Feature",geometry:null,properties:{},links:[],assets:{result:{href:URL.createObjectURL(e),type:e.type}}})}createFileFromAsset(e,t){try{if("string"===typeof e.type){let s=B.a.parse(e.type.toLowerCase());switch(s.type){case"image/png":case"image/jpg":case"image/jpeg":case"image/gif":case"image/webp":return new G(e);case"application/json":case"text/json":case"application/geo+json":return new K["a"](e);case"text/plain":return new Q(e);case"text/csv":return new q(e);case"text/tab-separated-values":return new Z(e);case"image/tiff":return new W["a"](e,t)}}if("string"===typeof e.href){let s=e.href.split(/[#?]/)[0].split(".").pop().trim().toLowerCase();switch(s){case"png":case"jpg":case"jpeg":case"gif":case"webp":return new G(e);case"json":case"geojson":return new K["a"](e);case"txt":return new Q(e);case"csv":return new q(e);case"tsv":return new Z(e);case"tif":case"tiff":return new W["a"](e,t)}}}catch(s){console.log(s)}return new V["c"](e)}}var te={name:"Viewer",mixins:[r["a"]],components:{Tabs:g["default"],DataViewer:()=>s.e("chunk-06323022").then(s.bind(null,"39d6")),TableViewer:()=>Promise.all([s.e("chunk-cf520b28"),s.e("chunk-2d0f00ac")]).then(s.bind(null,"9f85")),ImageViewer:()=>s.e("chunk-b2ed7b82").then(s.bind(null,"3ae0")),LogViewer:()=>s.e("chunk-59b9f0ba").then(s.bind(null,"3f19")),MapViewer:()=>Promise.all([s.e("chunk-5690d2e4"),s.e("chunk-35b3eade"),s.e("chunk-22009db5"),s.e("chunk-6af83bb0"),s.e("chunk-0f229619"),s.e("chunk-3af191a7"),s.e("chunk-61302aa1"),s.e("chunk-6cab871c"),s.e("chunk-58c5f8f8"),s.e("chunk-fb557d00"),s.e("chunk-30f176f2"),s.e("chunk-36edecc3"),s.e("chunk-f66f989c"),s.e("chunk-2dc2e4e7")]).then(s.bind(null,"9115"))},mounted(){this.listen("viewSyncResult",this.showSyncResults),this.listen("viewJobResults",this.showJobResults),this.listen("viewWebService",this.showWebService),this.listen("showCollectionPreview",this.showCollectionPreview),this.listen("viewLogs",this.showLogs),this.listen("removeWebService",this.closeTabWithLogs),this.listen("removeBatchJob",this.closeTabWithLogs)},data(){return{registry:new ee,tabTitleCounter:{},tabIdCounter:0,logViewerIcons:["fa-bug","fa-bomb","fa-tasks"]}},computed:{...o["a"].mapState(["connection","userLocation"]),nextTabId(){return"viewer~"+this.tabIdCounter}},methods:{...o["a"].mapActions(["describeCollection"]),isCollectionPreview(e){return e instanceof S["Service"]&&o["a"].isObject(e.attributes)&&!0===e.attributes.preview},isFormat(e){return e instanceof V["a"]},async showCollectionPreview(e){if("string"===typeof e)try{e=await this.describeCollection(e)}catch(a){return void o["a"].error(this,"Sorry, can't load collection '"+e+"'.")}let t=o["a"].getPreviewLinkFromSTAC(e);t||o["a"].error(this,"No visualizations found for collection");let s=new S["Service"](null,"collection-preview~"+e.id);s.url=t.href,s.type=t.rel.toLowerCase(),s.attributes={preview:!0,bbox:o["a"].extentToBBox(e.extent.spatial.bbox[0])},"wmts"===t.rel.toLowerCase()&&("string"===typeof t["wmts:layer"]?s.attributes.layers=[t["wmts:layer"]]:Array.isArray(t["wmts:layer"])&&(s.attributes.layers=t["wmts:layer"]),s.attributes.dimensions=t["wmts:dimensions"]),this.showMapViewer(s,s.id,o["a"].getResourceTitle(e,!0),!0)},showWebService(e){this.showMapViewer(e,e.id,null,!0)},showLogs(e,t="Logs",s=!0,a="fa-bug"){let i=Array.isArray(e)?t:o["a"].getResourceTitle(e,"Logs"),r=Array.isArray(e)?null:"logs~"+e.id;this.$refs.tabs.addTab(i,a,e,r,s,!0,e=>this.onShow(e),e=>this.onHide(e))},closeTabWithLogs(e){this.closeTab(e),this.closeTab("logs~"+e)},closeTab(e){let t=this.$refs.tabs.getTab(e);t&&this.$refs.tabs.closeTab(t)},showSyncResults(e){let t=this.makeTitle("Result"),s=this.registry.createFilesFromBlob(e.data);s.forEach(e=>e.download()),this.showViewer(s,t).finally(()=>{Array.isArray(e.logs)&&e.logs.length>0&&this.showLogs(e.logs,t,!1)})},showJobResults(e,t){let s=this.registry.createFilesFromSTAC(e,t);this.showViewer(s,o["a"].getResourceTitle(t,!0))},showMapViewer(e,t=null,s=null,a=!1){if(s||(s=o["a"].getResourceTitle(e,!0)),t){if(a){let e=this.$refs.tabs.getTab(t);if(e)return this.$refs.tabs.selectTab(e)}}else if(t=this.nextTabId,this.tabIdCounter++,a)throw new Error("Tabs without id can't be re-used");this.$refs.tabs.addTab(s,"fa-map",e,t,!0,!0,e=>this.onShow(e),e=>this.onHide(e))},async showViewer(e,t=null){for(let a of e)try{let e=a.getContext(),s=e?e.id:null;!t&&e?t=o["a"].getResourceTitle(e,!0):t||(t=this.makeTitle("Untitled")),await a.getData(this.connection),this.$refs.tabs.addTab(t,a.icon,a,s,!0,!0,e=>this.onShow(e),e=>this.onHide(e))}catch(s){o["a"].exception(this,s,"Viewer Error")}},async callChildFunction(e,t,...s){let a;if(1===e.$children.length&&"function"===typeof e.$children[0][t])a=e.$children[0][t](...s);else{if("function"!==typeof e[t])return Promise.reject();a=e[t](...s)}return a instanceof Promise&&(a=await a),a},async onDrop(e){var t=e.dataTransfer.getData("application/vnd.openeo-node");if(!t)return;let s=JSON.parse(t);if("load_collection"===s.process_id){e.preventDefault();let t=o["a"].isObject(s.arguments)?s.arguments.id:null;try{let e=await this.describeCollection(t);this.showCollectionPreview(e)}catch(a){o["a"].error(this,"Sorry, can't load collection details for '"+t+"'.")}}},allowDrop(e){e.preventDefault()},onShow(e){this.callChildFunction(e,"onShow")},onHide(e){this.callChildFunction(e,"onHide")},onTabsEmpty(e){this.$emit("empty",e)},uniqueTitle(e){return this.tabTitleCounter[e]?(this.tabTitleCounter[e]++,e+" ("+this.tabTitleCounter[e]+")"):(this.tabTitleCounter[e]=1,e)},makeTitle(e,t,s=!0){return e?s?this.uniqueTitle(e):e:this.uniqueTitle(t)}}},se=te,ae=(s("55b5"),Object(d["a"])(se,O,N,!1,null,null,null)),ie=ae.exports,re=s("ceb0"),oe=s("2241"),ne=s("cbd9"),le=s("fbda"),ce=s("9def"),ue={name:"IDE",mixins:[r["a"]],components:{DiscoveryToolbar:ne["a"],Editor:re["default"],Logo:oe["a"],Viewer:ie,UserMenu:p,UserWorkspace:L,Splitpanes:ce["b"],Pane:ce["a"]},data(){return{showViewer:!1,resizeListener:null,userInfoUpdater:null}},computed:{...o["a"].mapState(["connection","isAuthenticated"]),...o["a"].mapState("editor",["context","process","collectionPreview"]),...o["a"].mapGetters(["title","apiVersion","supports"]),...o["a"].mapGetters("jobs",{supportsJobUpdate:"supportsUpdate"}),...o["a"].mapGetters("services",{supportsServiceUpdate:"supportsUpdate"}),...o["a"].mapGetters("userProcesses",{supportsUserProcessUpdate:"supportsUpdate"}),contextTitle(){return null!==this.context?o["a"].getResourceTitle(this.context,!0):""},saveSupported(){return null!==this.context&&(this.context instanceof S["Job"]&&this.supportsJobUpdate||this.context instanceof S["Service"]&&this.supportsServiceUpdate||this.context instanceof S["UserProcess"]&&this.supportsUserProcessUpdate)},hasProcess(){return o["a"].size(this.process)>0},validateSupported(){return this.supports("validateProcess")},splitpaneSizeH(){return this.showViewer?[20,40,40]:[25,75,0]},splitpaneSizeV(){return this.isAuthenticated?[50,50]:[99,1]}},async mounted(){this.listen("showDataForm",this.showDataForm),this.listen("editProcess",this.editProcess),this.listen("showLogin",this.login),this.resizeListener=e=>this.resized(e),window.addEventListener("resize",this.resizeListener),this.isAuthenticated&&(this.userInfoUpdater=setInterval(this.describeAccount,60*this.$config.dataRefreshInterval*1e3)),this.emit("title",this.title),this.collectionPreview&&this.$nextTick(()=>{this.emit("showCollectionPreview",this.collectionPreview),this.setCollectionPreview(null)})},beforeDestroy(){null!==this.resizeListener&&window.removeEventListener("resize",this.resizeListener),null!==this.userInfoUpdater&&clearInterval(this.userInfoUpdater)},methods:{...o["a"].mapActions(["describeAccount"]),...o["a"].mapMutations(["discoveryCompleted"]),...o["a"].mapMutations("editor",["setContext","setProcess","setCollectionPreview"]),resized(e){this.emit("windowResized",e)},onViewerEmpty(e){this.showViewer=!e},login(){this.discoveryCompleted(!1)},importProcess(){let e={save:this.updateEditor};this.emit("showModal","ImportProcessModal",{},e)},saveProcess(){this.emit("replaceProcess",this.context,this.process)},async exportCode(){this.emit("showModal","ExportCodeModal")},async validateProcess(){if(!this.validateSupported)return o["a"].error(this,"Server doesn't support validation");if(!this.hasProcess)return o["a"].info(this,"Nothing to validate...");try{let e=await this.connection.validateProcess(this.process);e.length>0?(e.forEach(e=>e.level="error"),this.emit("viewLogs",e,"Validation Result","fa-tasks")):o["a"].ok(this,"The process is valid")}catch(e){o["a"].exception(this,e,"Validation rejected")}},updateEditor(e){this.setProcess(e),null===e&&this.setContext(null)},editProcess(e){this.setContext(e)},insertProcess(e){this.$refs.editor.insertProcess(e)},showServerInfo(){this.emit("showModal","ServerInfoModal")},showHelp(){this.emit("showTour","ide")},showDataForm(e,t,s=null,a=null){var i="function"===typeof s,r={},o=[];for(let c of t)null!==c&&(o.push(new le["ProcessParameter"](c)),r[c.name]=c.value);let n={title:e,parameters:o,data:r,editable:i},l={};"function"===typeof s&&(l.save=s),"function"===typeof a&&(l.closed=a),this.emit("showModal","ParameterModal",n,l)}}},de=ue,he=(s("80e5"),Object(d["a"])(de,a,i,!1,null,null,null));t["default"]=he.exports},fdbd:function(e,t,s){"use strict";s("8099")}}]);
//# sourceMappingURL=chunk-3862b1ce.ec7efb8a.js.map