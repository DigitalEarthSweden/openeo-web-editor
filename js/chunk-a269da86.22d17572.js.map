{"version":3,"sources":["webpack:///./node_modules/ol-ext/control/LayerSwitcher.js","webpack:///./node_modules/ol/MapBrowserEventType.js","webpack:///./node_modules/ol/CollectionEventType.js","webpack:///./node_modules/ol/Kinetic.js","webpack:///./node_modules/ol/Observable.js","webpack:///./node_modules/ol-ext/control/Timeline.js","webpack:///./node_modules/ol/ViewHint.js","webpack:///./node_modules/ol/Feature.js","webpack:///./node_modules/ol/MapBrowserEvent.js","webpack:///./node_modules/ol/TileQueue.js","webpack:///./node_modules/ol/MapEventType.js","webpack:///./node_modules/ol/LayerType.js","webpack:///./node_modules/ol/Tile.js","webpack:///./node_modules/ol/MapBrowserEventHandler.js","webpack:///./node_modules/ol/MapProperty.js","webpack:///./node_modules/ol/PluggableMap.js","webpack:///./node_modules/ol/Map.js","webpack:///./node_modules/ol-ext/util/element.js","webpack:///./node_modules/ol/MapEvent.js","webpack:///./node_modules/ol/ObjectEventType.js","webpack:///./node_modules/ol/ImageTile.js","webpack:///./node_modules/ol/AssertionError.js","webpack:///./node_modules/ol/ImageState.js","webpack:///./node_modules/ol/TileCache.js","webpack:///./node_modules/ol/ViewProperty.js","webpack:///./node_modules/ol/View.js","webpack:///./node_modules/ol/TileState.js","webpack:///./node_modules/ol-ext/util/ext.js","webpack:///./node_modules/ol-ext/control/Swipe.js","webpack:///./node_modules/ol/Disposable.js","webpack:///./node_modules/ol/TileRange.js","webpack:///./node_modules/ol/MapBrowserPointerEvent.js","webpack:///./node_modules/ol/Object.js","webpack:///./node_modules/ol/Collection.js","webpack:///./node_modules/ol/ImageBase.js","webpack:///./node_modules/ol/ImageCanvas.js"],"names":["ol_control_LayerSwitcher","options","element","self","this","dcount","show_progress","oninfo","onextent","hasextent","extent","hastrash","trash","reordering","_layers","_layerGroup","layerGroup","getLayers","displayInLayerSwitcher","target","create","className","switcherClass","collapsed","classList","add","button","type","parent","addEventListener","e","toggle","dispatchEvent","contains","preventDefault","overflow","mouseover","remove","topv","click","botv","panel_","addListener","Math","max","min","wheelDelta","detail","stopPropagation","header_","call","set","drawDelay","prototype","tip","up","down","info","plus","layer","get","setMap","map","drawPanel","_listener","change","moveend","size","on","viewChange","bind","getLayerGroup","show","hide","isOpen","setHeader","html","setHTML","dir","hidden","setStyle","height","h","outerHeight","hp","dh","offsetTop","top","lh","getStyle","querySelectorAll","round","_setLayerForLI","li","listeners","push","setLayerOpacity","setLayerVisibility","key","i","querySelector","style","left","getOpacity","checked","getVisible","_clearLayerForLI","forEach","l","_getLayerForLI","testLayerVisibility","getMap","setTimeout","drawPanel_","dragging_","drawList","switchLayerVisibility","layers","setVisible","res","getView","getResolution","getMaxResolution","getMinResolution","ex0","getExtent","ex","calculateExtent","getSize","dragOrdering_","pageY","dragElt","group","elt","currentTarget","parentNode","start","panel","pageY0","touches","length","changedTouches","stop","drop","collection","getArray","removeAt","j","insertAt","removeListener","document","move","abs","innerHTML","position","offsetLeft","opacity","width","outerWidth","offsetRect","scrollTop","elementFromPoint","clientX","clientY","tagName","dragOpacity_","x","pageX","delta","nextElementSibling","setOpacity","ul","setVisibility","onInfo","zoomExtent","fit","removeLayer","getLength","layer_buttons","d","title","unselectable","userSelect","nb","p","setprogress_","layerswitcher_progress","op","offsetX","ul2","loaded","loading","draw","toFixed","getSource","SINGLECLICK","CLICK","DBLCLICK","POINTERDRAG","POINTERMOVE","POINTERDOWN","POINTERUP","POINTEROVER","POINTEROUT","POINTERENTER","POINTERLEAVE","POINTERCANCEL","ADD","REMOVE","Kinetic","decay","minVelocity","delay","decay_","minVelocity_","delay_","points_","angle_","initialVelocity_","begin","update","y","Date","now","end","lastIndex","firstIndex","duration","dx","dy","atan2","sqrt","getDistance","getAngle","Observable","EventTarget","revision_","__proto__","Object","constructor","changed","CHANGE","getRevision","listener","Array","isArray","len","keys","once","un","ii","unByKey","ol_control_Timeline","zoomButton","_scrollDiv","_buttons","addButton","handleClick","zoom","refresh","_intervalDiv","_select","scrollListener","_setScrollLeft","clearTimeout","date","getDate","dateStart","dateEnd","scrollTimeout","scrollDiv","onmove","b","_moving","_tline","_scrollLeft","maxWidth","minDate","Infinity","maxDate","graduation","minZoom","maxZoom","setInterval","interval","getHTML","_getHTML","getFeatureDate","_getFeatureDate","endFeatureDate","_endFeatureDate","setFeatures","features","source","undefined","test","parseFloat","feature","isCollapsed","collapse","_features","_source","getFeatures","first","d2","tline","f","isNaN","sort","a","div","_minDate","_maxDate","isFinite","scale","_scale","_drawTime","line","lineHeight","fdiv","t","img","ondragstart","minWidth","pos","_nbline","setDate","anim","_getOffsetFromDate","_getDateFromOffset","offset","scrollLeft","_getScrollLeft","dt","month","dmonth","tdiv","heigth","year","getFullYear","setFullYear","String","dyear","setMonth","toLocaleDateString","dday","day","offdate","getMonth","indexOf","roundDate","stick","_roundTo","r","getStartDate","getEndDate","ANIMATING","INTERACTING","Feature","BaseObject","opt_geometryOrProperties","id_","geometryName_","style_","styleFunction_","geometryChangeKey_","handleGeometryChanged_","getSimplifiedGeometry","geometry","setGeometry","properties","setProperties","clone","getProperties","setGeometryName","getGeometryName","getGeometry","getId","getStyleFunction","handleGeometryChange_","createStyleFunction","setId","id","name","obj","styles","getZIndex","MapBrowserEvent","MapEvent","browserEvent","opt_dragging","opt_frameState","originalEvent","pixel","getEventPixel","coordinate","getCoordinateFromPixel","dragging","TileQueue","PriorityQueue","tilePriorityFunction","tileChangeCallback","apply","getKey","tileChangeCallback_","tilesLoading_","tilesLoadingKeys_","enqueue","added","tile","handleTileChange","getTilesLoading","event","state","getState","LOADED","ERROR","EMPTY","ABORT","tileKey","loadMoreTiles","maxTotalLoading","maxNewLoads","newLoads","abortedTiles","getCount","dequeue","IDLE","load","POSTRENDER","MOVESTART","MOVEEND","IMAGE","TILE","VECTOR_TILE","VECTOR","Tile","tileCoord","opt_options","interimTile","transition_","transition","transitionStarts_","getInterimTile","refreshInterimChain","prev","LOADING","getTileCoord","setState","getAlpha","time","inTransition","endTransition","MapBrowserEventHandler","moveTolerance","map_","clickTimeoutId_","dragListenerKeys_","moveTolerance_","down_","getViewport","activePointers_","trackedTouches_","pointerEventHandler_","PointerEventHandler","documentPointerEventHandler_","pointerdownListenerKey_","handlePointerDown_","relayedListenerKey_","relayEvent_","emulateClick_","pointerEvent","newEvent","MapBrowserPointerEvent","MapBrowserEventType","updateActivePointers_","pointerId","handlePointerUp_","propagationStopped","isMouseActionButton_","dispose","handlePointerMove_","isMoving_","disposeInternal","LAYERGROUP","SIZE","TARGET","VIEW","PluggableMap","optionsInternal","createOptionsInternal","maxTilesLoading_","maxTilesLoading","loadTilesWhileAnimating_","loadTilesWhileAnimating","loadTilesWhileInteracting_","loadTilesWhileInteracting","pixelRatio_","pixelRatio","animationDelayKey_","animationDelay_","renderFrame_","coordinateToPixelTransform_","pixelToCoordinateTransform_","frameIndex_","frameState_","previousExtent_","viewPropertyListenerKey_","viewChangeListenerKey_","layerGroupPropertyListenerKeys_","viewport_","createElement","msTouchAction","touchAction","overlayContainer_","appendChild","overlayContainerStopEvent_","overlayEvents","MOUSEDOWN","TOUCHSTART","MSPOINTERDOWN","MOUSEWHEEL","WHEEL","mapBrowserEventHandler_","handleMapBrowserEvent","keyboardEventTarget_","keyboardEventTarget","keyHandlerKeys_","CONTEXTMENU","handleBrowserEvent","controls","Collection","interactions","overlays_","overlays","overlayIdIndex_","renderer_","createRenderer","handleResize_","focus_","postRenderFunctions_","tileQueue_","getTilePriority","handleTileChange_","skippedFeatureUids_","MapProperty","handleLayerGroupChanged_","handleViewChanged_","handleSizeChanged_","handleTargetChanged_","values","control","CollectionEventType","interaction","addOverlayInternal_","overlay","toString","Error","addControl","getControls","addInteraction","getInteractions","addLayer","addOverlay","getOverlays","removeEventListener","RESIZE","cancelAnimationFrame","setTarget","forEachFeatureAtPixel","callback","hitTolerance","layerFilter","forEachFeatureAtCoordinate","getFeaturesAtPixel","forEachLayerAtPixel","hasFeatureAtPixel","hasFeatureAtCoordinate","getEventCoordinate","viewportPosition","getBoundingClientRect","eventPosition","getTarget","getTargetElement","getElementById","frameState","pixelToCoordinateTransform","slice","getOverlayById","getPixelFromCoordinate","coordinateToPixelTransform","getRenderer","getOverlayContainer","getOverlayContainerStopEvent","tileSourceKey","tileCenter","tileResolution","wantedTiles","deltaX","focus","deltaY","log","opt_type","mapBrowserEvent","interactionsArray","getActive","cont","handleEvent","handlePostRender","tileQueue","isEmpty","hints","viewHints","ViewHint","reprioritize","hasListener","RENDERCOMPLETE","animate","getLoading","dispatchRenderEvent","postRenderFunctions","render","targetElement","KEYDOWN","KEYPRESS","updateSize","window","removeLayerRenderers","handleViewPropertyChanged_","view","setAttribute","ObjectEventType","PROPERTYCHANGE","isRendered","renderSync","requestAnimationFrame","removeControl","removeInteraction","removeOverlay","viewState","previousFrameState","isDef","getHints","layerStatesArray","getLayerStatesArray","layerStates","center","index","skippedFeatureUids","usedTiles","resolution","rotation","renderFrame","moveStart","MapEventType","idle","setLayerGroup","setSize","setView","skipFeature","computedStyle","getComputedStyle","offsetWidth","offsetHeight","unskipFeature","View","Map","renderer","registerLayerRenderers","ol_ext_element","createTextNode","attr","trim","Element","label","input","after","value","val","text","eventType","fn","useCapture","split","display","el","st","s","styleProp","defaultView","ownerDocument","replace","toLowerCase","getPropertyValue","currentStyle","str","letter","toUpperCase","oldLeft","oldRsLeft","runtimeStyle","pixelLeft","parseInt","rect","pageYOffset","documentElement","body","pageXOffset","bottom","right","speed","page","vertical","scroll","moving","to","step","mousewheel","eventName","CustomEvent","createEvent","initCustomEvent","Event","ImageTile","src","crossOrigin","tileLoadFunction","crossOrigin_","src_","image_","Image","imageListenerKeys_","tileLoadFunction_","unlistenImage_","getBlankImage","getImage","handleImageError_","handleImageLoad_","image","naturalWidth","naturalHeight","LOAD","ctx","fillStyle","fillRect","canvas","AssertionError","code","path","message","TileCache","LRUCache","opt_highWaterMark","expireCache","canExpireCache","peekLast","zKey","pop","pruneExceptNewestZ","peekFirstKey","z","CENTER","RESOLUTION","ROTATION","DEFAULT_MIN_ZOOM","hints_","animations_","updateAnimationKey_","updateAnimations_","projection_","projection","applyOptions_","ViewProperty","resolutionConstraintInfo","createResolutionConstraint","maxResolution_","maxResolution","minResolution_","minResolution","zoomFactor_","zoomFactor","resolutions_","resolutions","minZoom_","centerConstraint","createCenterConstraint","resolutionConstraint","constraint","rotationConstraint","createRotationConstraint","constraints_","constrainResolution","Number","options_","getUpdatedOptions_","newOptions","getZoom","getCenter","getRotation","var_args","arguments$1","arguments","animationCount","setCenter","setZoom","setRotation","animationCallback","series","animation","complete","anchor","easing","sourceCenter","targetCenter","sourceResolution","targetResolution","sourceRotation","PI","targetRotation","isNoopAnimation","setHint","getAnimating","getInteracting","cancelAnimations","more","seriesComplete","jj","elapsed","fraction","progress","x0","y0","x1","y1","calculateCenterZoom","calculateCenterRotate","filter","Boolean","currentCenter","currentResolution","getSizeFromViewport_","selector","metrics","constrainCenter","opt_delta","opt_direction","direction","constrainRotation","getConstraints","opt_hints","opt_size","getMaxZoom","getZoomForResolution","setMaxZoom","getMinZoom","setMinZoom","getProjection","getResolutions","getResolutionForExtent","xResolution","yResolution","getResolutionForValueFunction","opt_power","power","pow","getValueForResolutionFunction","pixelResolution","nearest","getResolutionForZoom","geometryOrExtent","getType","GeometryType","CIRCLE","rotate","padding","coords","getFlatCoordinates","cosAngle","cos","sinAngle","sin","minRotX","minRotY","maxRotX","maxRotY","stride","getStride","rotX","rotY","constrainedResolution","centerRotX","centerRotY","centerX","centerY","setResolution","centerOn","opt_anchor","hint","returnValue","defaultMaxZoom","defaultZoomFactor","Units","DEGREES","getMetersPerUnit","defaultMaxResolution","defaultMinResolution","floor","enableRotation","ol","ext","ol_ext_inherits","child","inherits","NodeList","removeChild","ol_control_Swipe","precomposeRight_","precomposeRight","precomposeLeft_","precomposeLeft","postcompose_","postcompose","rightLayers","orientation","isLayer_","k","splice","isMoving","clientLeft","clientTop","_drawRect","pts","tr","inversePixelTransform","pt","context","lineTo","moveTo","ratio","save","beginPath","clip","getClassName","restore","Disposable","disposed_","TileRange","minX","maxX","minY","maxY","createOrUpdate","tileRange","containsXY","containsTileRange","equals","extend","getHeight","getWidth","intersects","ObjectEvent","oldValue","opt_values","values_","hasOwnProperty","getKeys","notify","getChangeEventType","opt_silent","unset","changeEventTypeCache","Property","LENGTH","CollectionEvent","opt_element","opt_array","unique_","unique","array_","assertUnique_","updateLength_","clear","arr","array","item","elem","n","setAt","opt_except","ImageBase","EventType","getPixelRatio","ImageCanvas","opt_loader","ImageState","loader_","canvas_","error_","getError","handleLoad_","err"],"mappings":"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","file":"js/chunk-a269da86.22d17572.js","sourcesContent":["/*\tCopyright (c) 2015 Jean-Marc VIGLINO, \r\n  released under the CeCILL-B license (French BSD license)\r\n  (http://www.cecill.info/licences/Licence_CeCILL-B_V1-en.txt).\r\n*/\r\nimport ol_ext_inherits from '../util/ext'\r\nimport {unByKey as ol_Observable_unByKey} from 'ol/Observable'\r\nimport ol_control_Control from 'ol/control/Control'\r\nimport ol_layer_Tile from 'ol/layer/Tile'\r\nimport ol_layer_Vector from 'ol/layer/Vector'\r\nimport ol_layer_VectorTile from 'ol/layer/VectorTile'\r\nimport ol_layer_Image from 'ol/layer/Image'\r\nimport ol_layer_Heatmap from 'ol/layer/Heatmap'\r\nimport {intersects as ol_extent_intersects} from 'ol/extent'\r\n\r\nimport ol_ext_element from '../util/element'\r\n\r\n/** Layer Switcher Control.\r\n * @fires drawlist\r\n * @fires toggle\r\n * @fires reorder-start\r\n * @fires reorder-end\r\n * @fires layer:visible\r\n * @fires layer:opacity\r\n * \r\n * @constructor\r\n * @extends {ol_control_Control}\r\n * @param {Object=} options\r\n *  @param {function} options.displayInLayerSwitcher function that takes a layer and return a boolean if the layer is displayed in the switcher, default test the displayInLayerSwitcher layer attribute\r\n *  @param {boolean} options.show_progress show a progress bar on tile layers, default false\r\n *  @param {boolean} options.mouseover show the panel on mouseover, default false\r\n *  @param {boolean} options.reordering allow layer reordering, default true\r\n *  @param {boolean} options.trash add a trash button to delete the layer, default false\r\n *  @param {function} options.oninfo callback on click on info button, if none no info button is shown DEPRECATED: use on(info) instead\r\n *  @param {boolean} options.extent add an extent button to zoom to the extent of the layer\r\n *  @param {function} options.onextent callback when click on extent, default fits view to extent\r\n *  @param {number} options.drawDelay delay in ms to redraw the layer (usefull to prevent flickering when manipulating the layers)\r\n *  @param {boolean} options.collapsed collapse the layerswitcher at beginning, default true\r\n *  @param {ol.layer.Group} options.layerGroup a layer group to display in the switcher, default display all layers of the map\r\n *\r\n * Layers attributes that control the switcher\r\n *\t- allwaysOnTop {boolean} true to force layer stay on top of the others while reordering, default false\r\n *\t- displayInLayerSwitcher {boolean} display the layer in switcher, default true\r\n *\t- noSwitcherDelete {boolean} to prevent layer deletion (w. trash option = true), default false\r\n */\r\nvar ol_control_LayerSwitcher = function(options) {\r\n  options = options || {};\r\n  var self = this;\r\n  this.dcount = 0;\r\n  this.show_progress = options.show_progress;\r\n  this.oninfo = (typeof (options.oninfo) == \"function\" ? options.oninfo: null);\r\n  this.onextent = (typeof (options.onextent) == \"function\" ? options.onextent: null);\r\n  this.hasextent = options.extent || options.onextent;\r\n  this.hastrash = options.trash;\r\n  this.reordering = (options.reordering!==false);\r\n  this._layers = [];\r\n  this._layerGroup = (options.layerGroup && options.layerGroup.getLayers) ? options.layerGroup : null;\r\n\r\n  // displayInLayerSwitcher\r\n  if (typeof(options.displayInLayerSwitcher) === 'function') {\r\n    this.displayInLayerSwitcher = options.displayInLayerSwitcher;\r\n  }\r\n\r\n  var element;\r\n  if (options.target) {\r\n    element = ol_ext_element.create('DIV', {\r\n      className: options.switcherClass || \"ol-layerswitcher\"\r\n    });\r\n  } else {\r\n    element = ol_ext_element.create('DIV', {\r\n      className: (options.switcherClass || \"ol-layerswitcher\") +' ol-unselectable ol-control'\r\n    });\r\n    if (options.collapsed !== false) element.classList.add('ol-collapsed'); \r\n    else element.classList.add('ol-forceopen'); \r\n  \r\n    this.button = ol_ext_element.create('BUTTON', {\r\n      type: 'button',\r\n      parent: element\r\n    });\r\n    this.button.addEventListener('touchstart', function(e){\r\n      element.classList.toggle('ol-collapsed');\r\n      self.dispatchEvent({ type: 'toggle', collapsed: element.classList.contains('ol-collapsed') });\r\n      e.preventDefault(); \r\n      self.overflow();\r\n    });\r\n    this.button.addEventListener('click', function(){\r\n      element.classList.toggle('ol-forceopen');\r\n      element.classList.add('ol-collapsed'); \r\n      self.dispatchEvent({ type: 'toggle', collapsed: !element.classList.contains('ol-forceopen') });\r\n      self.overflow();\r\n    });\r\n\r\n    if (options.mouseover) {\r\n      element.addEventListener ('mouseleave', function(){ \r\n        element.classList.add(\"ol-collapsed\"); \r\n        self.dispatchEvent({ type: 'toggle', collapsed: true });\r\n      });\r\n      element.addEventListener ('mouseover', function(){ \r\n        element.classList.remove(\"ol-collapsed\"); \r\n        self.dispatchEvent({ type: 'toggle', collapsed: false });\r\n      });\r\n    }\r\n\r\n    this.topv = ol_ext_element.create('DIV', {\r\n      className: 'ol-switchertopdiv',\r\n      parent: element,\r\n      click: function() {\r\n        self.overflow(\"+50%\");\r\n      }\r\n    });\r\n\r\n    this.botv = ol_ext_element.create('DIV', {\r\n      className: 'ol-switcherbottomdiv',\r\n      parent: element,\r\n      click: function() {\r\n        self.overflow(\"-50%\");\r\n      }\r\n    });\r\n  }\r\n\r\n  this.panel_ = ol_ext_element.create ('UL', {\r\n    className: 'panel',\r\n    parent: element\r\n  });\r\n  ol_ext_element.addListener (this.panel_, 'mousewheel DOMMouseScroll onmousewheel', function(e) {\r\n    if (self.overflow(Math.max(-1, Math.min(1, (e.wheelDelta || -e.detail))))) {\r\n      e.stopPropagation();\r\n      e.preventDefault();\r\n    }\r\n  });\r\n\r\n  this.header_ = ol_ext_element.create('LI', {\r\n    className: 'ol-header',\r\n    parent: this.panel_\r\n  });\r\n\r\n  ol_control_Control.call (this, {\r\n    element: element,\r\n    target: options.target\r\n  });\r\n\r\n  this.set('drawDelay',options.drawDelay||0);\r\n};\r\nol_ext_inherits(ol_control_LayerSwitcher, ol_control_Control);\r\n\r\n/** List of tips for internationalization purposes\r\n*/\r\nol_control_LayerSwitcher.prototype.tip = {\r\n  up: \"up/down\",\r\n  down: \"down\",\r\n  info: \"informations...\",\r\n  extent: \"zoom to extent\",\r\n  trash: \"remove layer\",\r\n  plus: \"expand/shrink\"\r\n};\r\n\r\n/** Test if a layer should be displayed in the switcher\r\n * @param {ol.layer} layer\r\n * @return {boolean} true if the layer is displayed\r\n */\r\nol_control_LayerSwitcher.prototype.displayInLayerSwitcher = function(layer) {\r\n  return (layer.get('displayInLayerSwitcher')!==false);\r\n};\r\n\r\n/**\r\n * Set the map instance the control is associated with.\r\n * @param {_ol_Map_} map The map instance.\r\n */\r\nol_control_LayerSwitcher.prototype.setMap = function(map) {\r\n  ol_control_Control.prototype.setMap.call(this, map);\r\n  this.drawPanel();\r\n  \r\n  if (this._listener) {\r\n    if (this._listener) ol_Observable_unByKey(this._listener.change);\r\n    if (this._listener) ol_Observable_unByKey(this._listener.moveend);\r\n    if (this._listener) ol_Observable_unByKey(this._listener.size);\r\n  }\r\n  this._listener = null;\r\n\r\n  // Get change (new layer added or removed)\r\n  if (map) {\r\n    this._listener = {\r\n      moveend: map.on('moveend', this.viewChange.bind(this)),\r\n      size: map.on('change:size', this.overflow.bind(this))\r\n    }\r\n    // Listen to a layer group\r\n    if (this._layerGroup) {\r\n      this._listener.change = this._layerGroup.getLayers().on('change:length', this.drawPanel.bind(this));\r\n    } else  {\r\n      //Listen to all layers\r\n      this._listener.change = map.getLayerGroup().getLayers().on('change:length', this.drawPanel.bind(this));\r\n    }\r\n  }\r\n};\r\n\r\n/** Show control\r\n */\r\nol_control_LayerSwitcher.prototype.show = function() {\r\n  this.element.classList.add(\"ol-forceopen\");\r\n  this.overflow();\r\n};\r\n\r\n/** Hide control\r\n */\r\nol_control_LayerSwitcher.prototype.hide = function() {\r\n  this.element.classList.remove(\"ol-forceopen\");\r\n  this.overflow();\r\n};\r\n\r\n/** Toggle control\r\n */\r\nol_control_LayerSwitcher.prototype.toggle = function() {\r\n  this.element.classList.toggle(\"ol-forceopen\");\r\n  this.overflow();\r\n};\r\n\r\n/** Is control open\r\n * @return {boolean}\r\n */\r\nol_control_LayerSwitcher.prototype.isOpen = function() {\r\n  return this.element.classList.contains(\"ol-forceopen\");\r\n};\r\n\r\n/** Add a custom header\r\n * @param {Element|string} html content html\r\n */\r\nol_control_LayerSwitcher.prototype.setHeader = function(html) {\r\n  ol_ext_element.setHTML(this.header_, html);\r\n};\r\n\r\n/** Calculate overflow and add scrolls\r\n *\t@param {Number} dir scroll direction -1|0|1|'+50%'|'-50%'\r\n */\r\nol_control_LayerSwitcher.prototype.overflow = function(dir) {\t\r\n  if (this.button) {\r\n    // Nothing to show\r\n    if (ol_ext_element.hidden(this.panel_)) {\r\n      ol_ext_element.setStyle(this.element, { height: 'auto' });\r\n      return;\r\n    }\r\n    // Calculate offset\r\n    var h = ol_ext_element.outerHeight(this.element);\r\n    var hp = ol_ext_element.outerHeight(this.panel_);\r\n    var dh = this.button.offsetTop + ol_ext_element.outerHeight(this.button);\r\n    //var dh = this.button.position().top + this.button.outerHeight(true);\r\n\r\n    var top = this.panel_.offsetTop - dh;\r\n    if (hp > h-dh) {\r\n      // Bug IE: need to have an height defined\r\n      ol_ext_element.setStyle(this.element, { height: '100%' });\r\n      var lh = 2 * ol_ext_element.getStyle(this.panel_.querySelectorAll('li.visible .li-content')[0], 'height');\r\n      switch (dir) {\r\n        case 1: top += lh; break;\r\n        case -1: top -= lh; break;\r\n        case \"+50%\": top += Math.round(h/2); break;\r\n        case \"-50%\": top -= Math.round(h/2); break;\r\n        default: break;\r\n      }\r\n      // Scroll div\r\n      if (top+hp <= h-3*dh/2) {\r\n        top = h-3*dh/2-hp;\r\n        ol_ext_element.hide(this.botv);\r\n      } else {\r\n        ol_ext_element.show(this.botv);\r\n      }\r\n      if (top >= 0) {\r\n        top = 0;\r\n        ol_ext_element.hide(this.topv);\r\n      } else {\r\n        ol_ext_element.show(this.topv);\r\n      }\r\n      // Scroll ?\r\n      ol_ext_element.setStyle(this.panel_, { top: top+\"px\" });\r\n      return true;\r\n    } else {\r\n      ol_ext_element.setStyle(this.element, { height: \"auto\" });\r\n      ol_ext_element.setStyle(this.panel_, { top: 0 });\r\n      ol_ext_element.hide(this.botv);\r\n      ol_ext_element.hide(this.topv);\r\n      return false;\r\n    }\r\n  }\r\n  else return false;\r\n};\r\n\r\n/** Set the layer associated with a li\r\n * @param {Element} li\r\n * @param {ol.layer} layer\r\n */\r\nol_control_LayerSwitcher.prototype._setLayerForLI = function(li, layer) {\r\n  var listeners = [];\r\n  if (layer.getLayers) {\r\n    listeners.push(layer.getLayers().on('change:length', this.drawPanel.bind(this)));\r\n  }\r\n  if (li) {\r\n    // Handle opacity change\r\n    listeners.push(layer.on('change:opacity', (function() {\r\n      this.setLayerOpacity(layer, li);\r\n    }).bind(this)));\r\n    // Handle visibility chage\r\n    listeners.push(layer.on('change:visible', (function() {\r\n      this.setLayerVisibility(layer, li);\r\n    }).bind(this)));\r\n  }\r\n  // Other properties\r\n  listeners.push(layer.on('propertychange', (function(e) {\r\n    if (e.key === 'displayInLayerSwitcher'\r\n      || e.key === 'openInLayerSwitcher') {\r\n      this.drawPanel(e);\r\n    }\r\n  }).bind(this)));\r\n  this._layers.push({ li:li, layer:layer, listeners: listeners });\r\n};\r\n\r\n/** Set opacity for a layer\r\n * @param {ol.layer.Layer} layer\r\n * @param {Element} li the list element\r\n * @api\r\n */\r\nol_control_LayerSwitcher.prototype.setLayerOpacity = function(layer, li) {\r\n  var i = li.querySelector('.layerswitcher-opacity-cursor')\r\n  if (i) i.style.left = (layer.getOpacity()*100)+\"%\"\r\n  this.dispatchEvent({ type: 'layer:opacity', layer: layer });\r\n};\r\n\r\n/** Set visibility for a layer\r\n * @param {ol.layer.Layer} layer\r\n * @param {Element} li the list element\r\n * @api\r\n */\r\nol_control_LayerSwitcher.prototype.setLayerVisibility = function(layer, li) {\r\n  var i = li.querySelector('.ol-visibility');\r\n  if (i) i.checked = layer.getVisible();\r\n  if (layer.getVisible()) li.classList.add('ol-visible');\r\n  else li.classList.remove('ol-visible');\r\n  this.dispatchEvent({ type: 'layer:visible', layer: layer });\r\n};\r\n\r\n/** Clear layers associated with li\r\n */\r\nol_control_LayerSwitcher.prototype._clearLayerForLI = function() {\r\n  this._layers.forEach(function (li) {\r\n    li.listeners.forEach(function(l) {\r\n      ol_Observable_unByKey(l);\r\n    });\r\n  })\r\n  this._layers = [];\r\n};\r\n\r\n/** Get the layer associated with a li\r\n * @param {Element} li\r\n * @return {ol.layer}\r\n */\r\nol_control_LayerSwitcher.prototype._getLayerForLI = function(li) {\r\n  for (var i=0, l; l=this._layers[i]; i++) {\r\n    if (l.li===li) return l.layer;\r\n  }\r\n  return null;\r\n};\r\n\r\n/**\r\n * On view change hide layer depending on resolution / extent\r\n * @private\r\n */\r\nol_control_LayerSwitcher.prototype.viewChange = function() {\r\n  this.panel_.querySelectorAll('li').forEach( function(li) {\r\n    var l = this._getLayerForLI(li);\r\n    if (l) {\r\n      if (this.testLayerVisibility(l)) li.classList.remove('ol-layer-hidden');\r\n      else li.classList.add('ol-layer-hidden');\r\n    }\r\n  }.bind(this));\r\n};\r\n\r\n/**\r\n *\tDraw the panel control (prevent multiple draw due to layers manipulation on the map with a delay function)\r\n*/\r\nol_control_LayerSwitcher.prototype.drawPanel = function() {\r\n  if (!this.getMap()) return;\r\n  var self = this;\r\n  // Multiple event simultaneously / draw once => put drawing in the event queue\r\n  this.dcount++;\r\n  setTimeout (function(){ self.drawPanel_(); }, this.get('drawDelay') || 0);\r\n};\r\n\r\n/** Delayed draw panel control \r\n * @private\r\n */\r\nol_control_LayerSwitcher.prototype.drawPanel_ = function() {\r\n  if (--this.dcount || this.dragging_) return;\r\n  // Remove existing layers\r\n  this._clearLayerForLI();\r\n  this.panel_.querySelectorAll('li').forEach (function(li) {\r\n    if (!li.classList.contains('ol-header')) li.remove();\r\n  }.bind(this));\r\n  // Draw list\r\n  this.drawList (this.panel_, this._layerGroup ?  this._layerGroup.getLayers() : this.getMap().getLayers());\r\n};\r\n\r\n/** Change layer visibility according to the baselayer option\r\n * @param {ol.layer}\r\n * @param {Array<ol.layer>} related layers\r\n */\r\nol_control_LayerSwitcher.prototype.switchLayerVisibility = function(l, layers) {\r\n  if (!l.get('baseLayer')) {\r\n    l.setVisible(!l.getVisible());\r\n  } else {\r\n    if (!l.getVisible()) l.setVisible(true);\r\n    layers.forEach(function(li) {\r\n      if (l!==li && li.get('baseLayer') && li.getVisible()) li.setVisible(false);\r\n    });\r\n  }\r\n};\r\n\r\n/** Check if layer is on the map (depending on zoom and extent)\r\n * @param {ol.layer}\r\n * @return {boolean}\r\n */\r\nol_control_LayerSwitcher.prototype.testLayerVisibility = function(layer) {\r\n  if (!this.getMap()) return true;\r\n  var res = this.getMap().getView().getResolution();\r\n  if (layer.getMaxResolution()<=res || layer.getMinResolution()>=res) {\r\n    return false;\r\n  } else {\r\n    var ex0 = layer.getExtent();\r\n    if (ex0) {\r\n      var ex = this.getMap().getView().calculateExtent(this.getMap().getSize());\r\n      return ol_extent_intersects(ex, ex0);\r\n    }\r\n    return true;\r\n  }\r\n};\r\n\r\n\r\n/** Start ordering the list\r\n*\t@param {event} e drag event\r\n*\t@private\r\n*/\r\nol_control_LayerSwitcher.prototype.dragOrdering_ = function(e) {\r\n  e.stopPropagation();\r\n  e.preventDefault();\r\n  // Get params\r\n  var self = this;\r\n  var elt = e.currentTarget.parentNode.parentNode;\r\n  var start = true;\r\n  var panel = this.panel_; \r\n  var pageY;\r\n  var pageY0 = e.pageY \r\n    || (e.touches && e.touches.length && e.touches[0].pageY) \r\n    || (e.changedTouches && e.changedTouches.length && e.changedTouches[0].pageY);\r\n  var target, dragElt;\r\n  var layer, group;\r\n  elt.parentNode.classList.add('drag');\r\n\r\n  // Stop ordering\r\n  function stop() {\r\n    if (target) {\r\n      // Get drag on parent\r\n      var drop = layer;\r\n      if (drop && target) {\r\n        var collection ;\r\n        if (group) collection = group.getLayers();\r\n        else collection = self._layerGroup ?  self._layerGroup.getLayers() : self.getMap().getLayers();\r\n        var layers = collection.getArray();\r\n        // Switch layers\r\n        for (var i=0; i<layers.length; i++) {\r\n          if (layers[i]==drop) {\r\n            collection.removeAt (i);\r\n            break;\r\n          }\r\n        }\r\n        for (var j=0; j<layers.length; j++) {\r\n          if (layers[j]==target) {\r\n            if (i>j) collection.insertAt (j,drop);\r\n            else collection.insertAt (j+1,drop);\r\n            break;\r\n          }\r\n        }\r\n      }\r\n\r\n      self.dispatchEvent({ type: \"reorder-end\", layer: drop, group: group });\r\n    }\r\n    \r\n    elt.parentNode.querySelectorAll('li').forEach(function(li){\r\n      li.classList.remove('dropover');\r\n      li.classList.remove('dropover-after');\r\n      li.classList.remove('dropover-before');\r\n    });\r\n    elt.classList.remove(\"drag\");\r\n    elt.parentNode.classList.remove(\"drag\");\r\n    self.element.classList.remove('drag');\r\n    if (dragElt) dragElt.remove();\r\n\r\n    ol_ext_element.removeListener(document, 'mousemove touchmove', move);\r\n    ol_ext_element.removeListener(document, 'mouseup touchend touchcancel', stop);\r\n  }\r\n\r\n  // Ordering\r\n  function move(e) {\r\n    // First drag (more than 2 px) => show drag element (ghost)\r\n    pageY = e.pageY \r\n        || (e.touches && e.touches.length && e.touches[0].pageY) \r\n        || (e.changedTouches && e.changedTouches.length && e.changedTouches[0].pageY);\r\n    if (start && Math.abs(pageY0 - pageY) > 2) {\r\n      start = false;\r\n      elt.classList.add(\"drag\");\r\n      layer = self._getLayerForLI(elt);\r\n      target = false;\r\n      group = self._getLayerForLI(elt.parentNode.parentNode);\r\n      // Ghost div\r\n      dragElt = ol_ext_element.create('LI', { \r\n        className: 'ol-dragover',\r\n        html: elt.innerHTML,\r\n        style: { \r\n          position: \"absolute\", \r\n          \"z-index\": 10000, \r\n          left: elt.offsetLeft, \r\n          opacity: 0.5,\r\n          width: ol_ext_element.outerWidth(elt),\r\n          height: ol_ext_element.getStyle(elt,'height'),\r\n        },\r\n        parent: panel \r\n      });\r\n      self.element.classList.add('drag');\r\n      self.dispatchEvent({ type: \"reorder-start\", layer: layer, group: group });\r\n    }\r\n    // Start a new drag sequence\r\n    if (!start) {\r\n      e.preventDefault();\r\n      e.stopPropagation();\r\n\r\n      // Ghost div\r\n      ol_ext_element.setStyle(dragElt, { top: pageY - ol_ext_element.offsetRect(panel).top + panel.scrollTop +5 });\r\n      \r\n      var li;\r\n      if (!e.touches) {\r\n        li = e.target;\r\n      } else {\r\n        li = document.elementFromPoint(e.touches[0].clientX, e.touches[0].clientY);\r\n      }\r\n      if (li.classList.contains(\"ol-switcherbottomdiv\")) {\r\n        self.overflow(-1);\r\n      } else if (li.classList.contains(\"ol-switchertopdiv\")) {\r\n        self.overflow(1);\r\n      }\r\n      // Get associated li\r\n      while (li && li.tagName!=='LI') {\r\n        li = li.parentNode;\r\n      }\r\n      if (!li || !li.classList.contains('dropover')) {\r\n        elt.parentNode.querySelectorAll('li').forEach(function(li) {\r\n          li.classList.remove('dropover');\r\n          li.classList.remove('dropover-after');\r\n          li.classList.remove('dropover-before');\r\n        });\r\n      }\r\n      if (li && li.parentNode.classList.contains('drag') && li !== elt) {\r\n        target = self._getLayerForLI(li);\r\n        // Don't mix layer level\r\n        if (target && !target.get('allwaysOnTop') == !layer.get('allwaysOnTop')) {\r\n          li.classList.add(\"dropover\");\r\n          li.classList.add((elt.offsetTop < li.offsetTop) ? 'dropover-after' : 'dropover-before');\r\n        } else {\r\n          target = false;\r\n        }\r\n        ol_ext_element.show(dragElt);\r\n      } else {\r\n        target = false;\r\n        if (li===elt) ol_ext_element.hide(dragElt);\r\n        else ol_ext_element.show(dragElt);\r\n      }\r\n      \r\n      if (!target) dragElt.classList.add(\"forbidden\");\r\n      else dragElt.classList.remove(\"forbidden\");\r\n    }\r\n  }\r\n\r\n  // Start ordering\r\n  ol_ext_element.addListener(document, 'mousemove touchmove', move);\r\n  ol_ext_element.addListener(document, 'mouseup touchend touchcancel', stop);\r\n};\r\n\r\n\r\n/** Change opacity on drag \r\n*\t@param {event} e drag event\r\n*\t@private\r\n*/\r\nol_control_LayerSwitcher.prototype.dragOpacity_ = function(e) {\r\n  e.stopPropagation();\r\n  e.preventDefault();\r\n  var self = this\r\n  // Register start params\r\n  var elt = e.target;\r\n  var layer = this._getLayerForLI(elt.parentNode.parentNode.parentNode);\r\n  if (!layer) return;\r\n  var x = e.pageX \r\n    || (e.touches && e.touches.length && e.touches[0].pageX) \r\n    || (e.changedTouches && e.changedTouches.length && e.changedTouches[0].pageX);\r\n  var start = ol_ext_element.getStyle (elt, 'left') - x;\r\n  self.dragging_ = true;\r\n\r\n  // stop dragging\r\n  function stop() {\r\n    ol_ext_element.removeListener(document, \"mouseup touchend touchcancel\", stop);\r\n    ol_ext_element.removeListener(document, \"mousemove touchmove\", move);\r\n    self.dragging_ = false;\r\n  }\r\n  // On draggin\r\n  function move(e) {\r\n    var x = e.pageX \r\n      || (e.touches && e.touches.length && e.touches[0].pageX) \r\n      || (e.changedTouches && e.changedTouches.length && e.changedTouches[0].pageX);\r\n    var delta = (start + x) / ol_ext_element.getStyle(elt.parentNode, 'width');\r\n    var opacity = Math.max (0, Math.min(1, delta));\r\n    ol_ext_element.setStyle (elt, { left: (opacity*100) + \"%\" });\r\n    elt.parentNode.nextElementSibling.innerHTML = Math.round(opacity*100);\r\n    layer.setOpacity(opacity);\r\n  }\r\n  // Register move\r\n  ol_ext_element.addListener(document, \"mouseup touchend touchcancel\", stop);\r\n  ol_ext_element.addListener(document, \"mousemove touchmove\", move);\r\n};\r\n\r\n\r\n/** Render a list of layer\r\n * @param {Elemen} element to render\r\n * @layers {Array{ol.layer}} list of layer to show\r\n * @api stable\r\n */\r\nol_control_LayerSwitcher.prototype.drawList = function(ul, collection) {\r\n  var self = this;\r\n  var layers = collection.getArray();\r\n\r\n  // Change layer visibility\r\n  var setVisibility = function(e) {\r\n    e.stopPropagation();\r\n    e.preventDefault();\r\n    var l = self._getLayerForLI(this.parentNode.parentNode);\r\n    self.switchLayerVisibility(l, collection);\r\n  };\r\n  // Info button click\r\n  function onInfo(e) {\r\n    e.stopPropagation();\r\n    e.preventDefault(); \r\n    var l = self._getLayerForLI(this.parentNode.parentNode);\r\n    self.oninfo(l); \r\n    self.dispatchEvent({ type: \"info\", layer: l });\r\n  }\r\n  // Zoom to extent button\r\n  function zoomExtent(e) {\r\n    e.stopPropagation();\r\n    e.preventDefault(); \r\n    var l = self._getLayerForLI(this.parentNode.parentNode);\r\n    if (self.onextent) self.onextent(l); \r\n    else self.getMap().getView().fit (l.getExtent(), self.getMap().getSize()); \r\n    self.dispatchEvent({ type: \"extent\", layer: l });\r\n  }\r\n  // Remove a layer on trash click\r\n  function removeLayer(e) {\r\n    e.stopPropagation();\r\n    e.preventDefault();\r\n    var li = this.parentNode.parentNode.parentNode.parentNode;\r\n    var layer, group = self._getLayerForLI(li);\r\n    // Remove the layer from a group or from a map\r\n    if (group) {\r\n      layer = self._getLayerForLI(this.parentNode.parentNode);\r\n      group.getLayers().remove(layer);\r\n      if (group.getLayers().getLength()==0 && !group.get('noSwitcherDelete')) {\r\n        removeLayer.call(li.querySelectorAll('.layerTrash')[0], e);\r\n      }\r\n    } else {\r\n      li = this.parentNode.parentNode;\r\n      self.getMap().removeLayer(self._getLayerForLI(li));\r\n    }\r\n  }\r\n  \r\n  // Add the layer list\r\n  for (var i=layers.length-1; i>=0; i--) {\r\n    var layer = layers[i];\r\n\r\n    if (!self.displayInLayerSwitcher(layer)) {\r\n      this._setLayerForLI(null, layer);\r\n      continue;\r\n    } \r\n\r\n    var li = ol_ext_element.create('LI', {\r\n      className: (layer.getVisible()?\"visible \":\" \")+(layer.get('baseLayer')?\"baselayer\":\"\"),\r\n      parent: ul\r\n    });\r\n    this._setLayerForLI(li, layer);\r\n\r\n    var layer_buttons = ol_ext_element.create('DIV', {\r\n      className: 'ol-layerswitcher-buttons',\r\n      parent: li\r\n    });\r\n\r\n    // Content div\r\n    var d = ol_ext_element.create('DIV', {\r\n      className: 'li-content',// + (this.testLayerVisibility(layer) ? '' : ' ol-layer-hidden'),\r\n      parent: li\r\n    });\r\n    \r\n    // Visibility\r\n    ol_ext_element.create('INPUT', {\r\n      type: layer.get('baseLayer') ? 'radio' : 'checkbox',\r\n      className: 'ol-visibility',\r\n      checked: layer.getVisible(),\r\n      click: setVisibility,\r\n      parent: d\r\n    });\r\n    // Label\r\n    ol_ext_element.create('LABEL', {\r\n      html: layer.get(\"title\") || layer.get(\"name\"),\r\n      title: layer.get(\"title\") || layer.get(\"name\"),\r\n      click: setVisibility,\r\n      unselectable: 'on',\r\n      style: {\r\n        userSelect: 'none'\r\n      },\r\n      parent: d\r\n    }).addEventListener('selectstart', function(){ return false; });\r\n\r\n    //  up/down\r\n    if (this.reordering) {\r\n      if ( (i<layers.length-1 && (layer.get(\"allwaysOnTop\") || !layers[i+1].get(\"allwaysOnTop\")) )\r\n      || (i>0 && (!layer.get(\"allwaysOnTop\") || layers[i-1].get(\"allwaysOnTop\")) ) ) {\r\n        ol_ext_element.create('DIV', {\r\n          className: 'layerup',\r\n          title: this.tip.up,\r\n          on: { 'mousedown touchstart': function(e) { self.dragOrdering_(e) } },\r\n          parent: layer_buttons\r\n        });\r\n      }\r\n    }\r\n\r\n    // Show/hide sub layers\r\n    if (layer.getLayers) {\r\n      var nb = 0;\r\n      layer.getLayers().forEach(function(l) {\r\n        if (self.displayInLayerSwitcher(l)) nb++;\r\n      });\r\n      if (nb) {\r\n        ol_ext_element.create('DIV', {\r\n          className: layer.get(\"openInLayerSwitcher\") ? \"collapse-layers\" : \"expend-layers\",\r\n          title: this.tip.plus,\r\n          click: function() {\r\n            var l = self._getLayerForLI(this.parentNode.parentNode);\r\n            l.set(\"openInLayerSwitcher\", !l.get(\"openInLayerSwitcher\") )\r\n          },\r\n          parent: layer_buttons\r\n        });\r\n      }\r\n    }\r\n\r\n    // Info button\r\n    if (this.oninfo) {\r\n      ol_ext_element.create('DIV', {\r\n        className: 'layerInfo',\r\n        title: this.tip.info,\r\n        click: onInfo,\r\n        parent: layer_buttons\r\n      });\r\n    }\r\n    // Layer remove\r\n    if (this.hastrash && !layer.get(\"noSwitcherDelete\")) {\r\n      ol_ext_element.create('DIV', {\r\n        className: 'layerTrash',\r\n        title: this.tip.trash,\r\n        click: removeLayer,\r\n        parent: layer_buttons\r\n      });\r\n    }\r\n    // Layer extent\r\n    if (this.hasextent && layers[i].getExtent()) {\r\n      var ex = layers[i].getExtent();\r\n      if (ex.length==4 && ex[0]<ex[2] && ex[1]<ex[3]) {\r\n        ol_ext_element.create('DIV', {\r\n          className: 'layerExtent',\r\n          title: this.tip.extent,\r\n          click: zoomExtent,\r\n          parent: layer_buttons  \r\n        });\r\n      }\r\n    }\r\n\r\n    // Progress\r\n    if (this.show_progress && layer instanceof ol_layer_Tile) {\r\n      var p = ol_ext_element.create('DIV', {\r\n        className: 'layerswitcher-progress',\r\n        parent: d\r\n      });\r\n      this.setprogress_(layer);\r\n      layer.layerswitcher_progress = ol_ext_element.create('DIV', { parent: p });\r\n    }\r\n\r\n    // Opacity\r\n    var opacity = ol_ext_element.create('DIV', {\r\n      className: 'layerswitcher-opacity',\r\n      // Click on the opacity line\r\n      click: function(e){\r\n        if (e.target !== this) return;\r\n        e.stopPropagation();\r\n        e.preventDefault();\r\n        var op = Math.max ( 0, Math.min( 1, e.offsetX / ol_ext_element.getStyle(this, 'width')));\r\n        self._getLayerForLI(this.parentNode.parentNode).setOpacity(op);\r\n      },\r\n      parent: d\r\n    });\r\n    // Start dragging\r\n    ol_ext_element.create('DIV', {\r\n      className: 'layerswitcher-opacity-cursor',\r\n      style: { left: (layer.getOpacity()*100)+\"%\" },\r\n      on: {\r\n        'mousedown touchstart': function(e) { self.dragOpacity_ (e); }\r\n      },\r\n      parent: opacity\r\n    });\r\n    // Percent\r\n    ol_ext_element.create('DIV', {\r\n      className: 'layerswitcher-opacity-label',\r\n      html: Math.round(layer.getOpacity()*100),\r\n      parent: d\r\n    });\r\n\r\n    // Layer group\r\n    if (layer.getLayers) {\r\n      li.classList.add('ol-layer-group');\r\n      if (layer.get(\"openInLayerSwitcher\") === true) {\r\n        var ul2 = ol_ext_element.create('UL', {\r\n          parent: li\r\n        });\r\n        this.drawList (ul2, layer.getLayers());\r\n      }\r\n    }\r\n    else if (layer instanceof ol_layer_Vector) li.classList.add('ol-layer-vector');\r\n    else if (layer instanceof ol_layer_VectorTile) li.classList.add('ol-layer-vector');\r\n    else if (layer instanceof ol_layer_Tile) li.classList.add('ol-layer-tile');\r\n    else if (layer instanceof ol_layer_Image) li.classList.add('ol-layer-image');\r\n    else if (layer instanceof ol_layer_Heatmap) li.classList.add('ol-layer-heatmap');\r\n\r\n    // Dispatch a dralist event to allow customisation\r\n    this.dispatchEvent({ type:'drawlist', layer:layer, li:li });\r\n  }\r\n\r\n  this.viewChange();\r\n\r\n  if (ul === this.panel_) this.overflow();\r\n};\r\n\r\n/** Handle progress bar for a layer\r\n*\t@private\r\n*/\r\nol_control_LayerSwitcher.prototype.setprogress_ = function(layer) {\r\n  if (!layer.layerswitcher_progress) {\r\n    var loaded = 0;\r\n    var loading = 0;\r\n    var draw = function() {\r\n      if (loading === loaded) {\r\n        loading = loaded = 0;\r\n        ol_ext_element.setStyle(layer.layerswitcher_progress, { width: 0 });// layer.layerswitcher_progress.width(0);\r\n      } else {\r\n        ol_ext_element.setStyle(layer.layerswitcher_progress, { width: (loaded / loading * 100).toFixed(1) + '%' });// layer.layerswitcher_progress.css('width', (loaded / loading * 100).toFixed(1) + '%');\r\n      }\r\n    }\r\n    layer.getSource().on('tileloadstart', function() {\r\n      loading++;\r\n      draw();\r\n    });\r\n    layer.getSource().on('tileloadend', function() {\r\n      loaded++;\r\n      draw();\r\n    });\r\n    layer.getSource().on('tileloaderror', function() {\r\n      loaded++;\r\n      draw();\r\n    });\r\n  }\r\n};\r\n\r\nexport default ol_control_LayerSwitcher\r\n","/**\n * @module ol/MapBrowserEventType\n */\nimport EventType from './events/EventType.js';\n\n/**\n * Constants for event names.\n * @enum {string}\n */\nexport default {\n\n  /**\n   * A true single click with no dragging and no double click. Note that this\n   * event is delayed by 250 ms to ensure that it is not a double click.\n   * @event module:ol/MapBrowserEvent~MapBrowserEvent#singleclick\n   * @api\n   */\n  SINGLECLICK: 'singleclick',\n\n  /**\n   * A click with no dragging. A double click will fire two of this.\n   * @event module:ol/MapBrowserEvent~MapBrowserEvent#click\n   * @api\n   */\n  CLICK: EventType.CLICK,\n\n  /**\n   * A true double click, with no dragging.\n   * @event module:ol/MapBrowserEvent~MapBrowserEvent#dblclick\n   * @api\n   */\n  DBLCLICK: EventType.DBLCLICK,\n\n  /**\n   * Triggered when a pointer is dragged.\n   * @event module:ol/MapBrowserEvent~MapBrowserEvent#pointerdrag\n   * @api\n   */\n  POINTERDRAG: 'pointerdrag',\n\n  /**\n   * Triggered when a pointer is moved. Note that on touch devices this is\n   * triggered when the map is panned, so is not the same as mousemove.\n   * @event module:ol/MapBrowserEvent~MapBrowserEvent#pointermove\n   * @api\n   */\n  POINTERMOVE: 'pointermove',\n\n  POINTERDOWN: 'pointerdown',\n  POINTERUP: 'pointerup',\n  POINTEROVER: 'pointerover',\n  POINTEROUT: 'pointerout',\n  POINTERENTER: 'pointerenter',\n  POINTERLEAVE: 'pointerleave',\n  POINTERCANCEL: 'pointercancel'\n};\n\n//# sourceMappingURL=MapBrowserEventType.js.map","/**\n * @module ol/CollectionEventType\n */\n\n/**\n * @enum {string}\n */\nexport default {\n  /**\n   * Triggered when an item is added to the collection.\n   * @event module:ol/Collection.CollectionEvent#add\n   * @api\n   */\n  ADD: 'add',\n  /**\n   * Triggered when an item is removed from the collection.\n   * @event module:ol/Collection.CollectionEvent#remove\n   * @api\n   */\n  REMOVE: 'remove'\n};\n\n//# sourceMappingURL=CollectionEventType.js.map","/**\n * @module ol/Kinetic\n */\n\n/**\n * @classdesc\n * Implementation of inertial deceleration for map movement.\n *\n * @api\n */\nvar Kinetic = function Kinetic(decay, minVelocity, delay) {\n\n  /**\n   * @private\n   * @type {number}\n   */\n  this.decay_ = decay;\n\n  /**\n   * @private\n   * @type {number}\n   */\n  this.minVelocity_ = minVelocity;\n\n  /**\n   * @private\n   * @type {number}\n   */\n  this.delay_ = delay;\n\n  /**\n   * @private\n   * @type {Array<number>}\n   */\n  this.points_ = [];\n\n  /**\n   * @private\n   * @type {number}\n   */\n  this.angle_ = 0;\n\n  /**\n   * @private\n   * @type {number}\n   */\n  this.initialVelocity_ = 0;\n};\n\n/**\n * FIXME empty description for jsdoc\n */\nKinetic.prototype.begin = function begin () {\n  this.points_.length = 0;\n  this.angle_ = 0;\n  this.initialVelocity_ = 0;\n};\n\n/**\n * @param {number} x X.\n * @param {number} y Y.\n */\nKinetic.prototype.update = function update (x, y) {\n  this.points_.push(x, y, Date.now());\n};\n\n/**\n * @return {boolean} Whether we should do kinetic animation.\n */\nKinetic.prototype.end = function end () {\n  if (this.points_.length < 6) {\n    // at least 2 points are required (i.e. there must be at least 6 elements\n    // in the array)\n    return false;\n  }\n  var delay = Date.now() - this.delay_;\n  var lastIndex = this.points_.length - 3;\n  if (this.points_[lastIndex + 2] < delay) {\n    // the last tracked point is too old, which means that the user stopped\n    // panning before releasing the map\n    return false;\n  }\n\n  // get the first point which still falls into the delay time\n  var firstIndex = lastIndex - 3;\n  while (firstIndex > 0 && this.points_[firstIndex + 2] > delay) {\n    firstIndex -= 3;\n  }\n\n  var duration = this.points_[lastIndex + 2] - this.points_[firstIndex + 2];\n  // we don't want a duration of 0 (divide by zero)\n  // we also make sure the user panned for a duration of at least one frame\n  // (1/60s) to compute sane displacement values\n  if (duration < 1000 / 60) {\n    return false;\n  }\n\n  var dx = this.points_[lastIndex] - this.points_[firstIndex];\n  var dy = this.points_[lastIndex + 1] - this.points_[firstIndex + 1];\n  this.angle_ = Math.atan2(dy, dx);\n  this.initialVelocity_ = Math.sqrt(dx * dx + dy * dy) / duration;\n  return this.initialVelocity_ > this.minVelocity_;\n};\n\n/**\n * @return {number} Total distance travelled (pixels).\n */\nKinetic.prototype.getDistance = function getDistance () {\n  return (this.minVelocity_ - this.initialVelocity_) / this.decay_;\n};\n\n/**\n * @return {number} Angle of the kinetic panning animation (radians).\n */\nKinetic.prototype.getAngle = function getAngle () {\n  return this.angle_;\n};\n\nexport default Kinetic;\n\n//# sourceMappingURL=Kinetic.js.map","/**\n * @module ol/Observable\n */\nimport {listen, unlistenByKey, unlisten, listenOnce} from './events.js';\nimport EventTarget from './events/Target.js';\nimport EventType from './events/EventType.js';\n\n/**\n * @classdesc\n * Abstract base class; normally only used for creating subclasses and not\n * instantiated in apps.\n * An event target providing convenient methods for listener registration\n * and unregistration. A generic `change` event is always available through\n * {@link module:ol/Observable~Observable#changed}.\n *\n * @fires import(\"./events/Event.js\").Event\n * @api\n */\nvar Observable = /*@__PURE__*/(function (EventTarget) {\n  function Observable() {\n\n    EventTarget.call(this);\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.revision_ = 0;\n\n  }\n\n  if ( EventTarget ) Observable.__proto__ = EventTarget;\n  Observable.prototype = Object.create( EventTarget && EventTarget.prototype );\n  Observable.prototype.constructor = Observable;\n\n  /**\n   * Increases the revision counter and dispatches a 'change' event.\n   * @api\n   */\n  Observable.prototype.changed = function changed () {\n    ++this.revision_;\n    this.dispatchEvent(EventType.CHANGE);\n  };\n\n  /**\n   * Get the version number for this object.  Each time the object is modified,\n   * its version number will be incremented.\n   * @return {number} Revision.\n   * @api\n   */\n  Observable.prototype.getRevision = function getRevision () {\n    return this.revision_;\n  };\n\n  /**\n   * Listen for a certain type of event.\n   * @param {string|Array<string>} type The event type or array of event types.\n   * @param {function(?): ?} listener The listener function.\n   * @return {import(\"./events.js\").EventsKey|Array<import(\"./events.js\").EventsKey>} Unique key for the listener. If\n   *     called with an array of event types as the first argument, the return\n   *     will be an array of keys.\n   * @api\n   */\n  Observable.prototype.on = function on (type, listener) {\n    if (Array.isArray(type)) {\n      var len = type.length;\n      var keys = new Array(len);\n      for (var i = 0; i < len; ++i) {\n        keys[i] = listen(this, type[i], listener);\n      }\n      return keys;\n    } else {\n      return listen(this, /** @type {string} */ (type), listener);\n    }\n  };\n\n  /**\n   * Listen once for a certain type of event.\n   * @param {string|Array<string>} type The event type or array of event types.\n   * @param {function(?): ?} listener The listener function.\n   * @return {import(\"./events.js\").EventsKey|Array<import(\"./events.js\").EventsKey>} Unique key for the listener. If\n   *     called with an array of event types as the first argument, the return\n   *     will be an array of keys.\n   * @api\n   */\n  Observable.prototype.once = function once (type, listener) {\n    if (Array.isArray(type)) {\n      var len = type.length;\n      var keys = new Array(len);\n      for (var i = 0; i < len; ++i) {\n        keys[i] = listenOnce(this, type[i], listener);\n      }\n      return keys;\n    } else {\n      return listenOnce(this, /** @type {string} */ (type), listener);\n    }\n  };\n\n  /**\n   * Unlisten for a certain type of event.\n   * @param {string|Array<string>} type The event type or array of event types.\n   * @param {function(?): ?} listener The listener function.\n   * @api\n   */\n  Observable.prototype.un = function un (type, listener) {\n    if (Array.isArray(type)) {\n      for (var i = 0, ii = type.length; i < ii; ++i) {\n        unlisten(this, type[i], listener);\n      }\n      return;\n    } else {\n      unlisten(this, /** @type {string} */ (type), listener);\n    }\n  };\n\n  return Observable;\n}(EventTarget));\n\n\n/**\n * Removes an event listener using the key returned by `on()` or `once()`.\n * @param {import(\"./events.js\").EventsKey|Array<import(\"./events.js\").EventsKey>} key The key returned by `on()`\n *     or `once()` (or an array of keys).\n * @api\n */\nexport function unByKey(key) {\n  if (Array.isArray(key)) {\n    for (var i = 0, ii = key.length; i < ii; ++i) {\n      unlistenByKey(key[i]);\n    }\n  } else {\n    unlistenByKey(/** @type {import(\"./events.js\").EventsKey} */ (key));\n  }\n}\n\n\nexport default Observable;\n\n//# sourceMappingURL=Observable.js.map","/*eslint no-constant-condition: [\"error\", { \"checkLoops\": false }]*/\r\nimport ol_ext_inherits from '../util/ext'\r\nimport ol_source_Vector from 'ol/source/Vector'\r\nimport ol_control_Control from 'ol/control/Control'\r\nimport ol_ext_element from '../util/element'\r\n\r\n/** Timeline control\r\n *\r\n * @constructor\r\n * @extends {ol.control.Control}\r\n * @fires select\r\n * @fires scroll\r\n * @fires collapse\r\n * @param {Object=} options Control options.\r\n *\t@param {String} options.className class of the control\r\n *\t@param {Array<ol.Feature>} options.features Features to show in the timeline\r\n *\t@param {ol.SourceImageOptions.vector} options.source class of the control\r\n *\t@param {Number} options.interval time interval length in ms or a text with a format d, h, mn, s (31 days = '31d'), default none\r\n *\t@param {String} options.maxWidth width of the time line in px, default 2000px\r\n *\t@param {String} options.minDate minimum date \r\n *\t@param {String} options.maxDate maximum date \r\n *\t@param {Number} options.minZoom Minimum zoom for the line, default .2\r\n *\t@param {Number} options.maxZoom Maximum zoom for the line, default 4\r\n *\t@param {boolean} options.zoomButton Are zoom buttons avaliable, default false\r\n *\t@param {function} options.getHTML a function that takes a feature and returns the html to display\r\n *\t@param {function} options.getFeatureDate a function that takes a feature and returns its date, default the date propertie\r\n *\t@param {function} options.endFeatureDate a function that takes a feature and returns its end date, default no end date\r\n *\t@param {String} options.graduation day|month to show month or day graduation, default show only years\r\n *\t@param {String} options.scrollTimeout Time in milliseconds to get a scroll event, default 15ms\r\n */\r\nvar ol_control_Timeline = function(options) {\r\n\r\n  var element = ol_ext_element.create('DIV', {\r\n    className: (options.className || '') + ' ol-timeline'\r\n      + (options.target ? '': ' ol-unselectable ol-control')\r\n      + (options.zoomButton ? ' ol-hasbutton':'')\r\n  });\r\n\r\n  // Initialize\r\n  ol_control_Control.call(this, {\r\n    element: element,\r\n    target: options.target\r\n  });\r\n\r\n  // Scroll div\r\n  this._scrollDiv = ol_ext_element.create('DIV', {\r\n    className: 'ol-scroll',\r\n    parent: this.element\r\n  });\r\n\r\n  // Add a button bar\r\n  this._buttons = ol_ext_element.create('DIV', {\r\n    className: 'ol-buttons',\r\n    parent: this.element\r\n  });\r\n  // Zoom buttons\r\n  if (options.zoomButton) {\r\n    // Zoom in\r\n    this.addButton({\r\n      className: 'ol-zoom-in',\r\n      handleClick: function(){\r\n        var zoom = this.get('zoom');\r\n        if (zoom>=1) {\r\n          zoom++;\r\n        } else {\r\n          zoom = Math.min(1, zoom + 0.1);\r\n        }\r\n        zoom = Math.round(zoom*100)/100;\r\n        this.refresh(zoom);\r\n      }.bind(this)\r\n    });\r\n    // Zoom out\r\n    this.addButton({\r\n      className: 'ol-zoom-out',\r\n      handleClick: function(){\r\n        var zoom = this.get('zoom');\r\n        if (zoom>1) {\r\n          zoom--;\r\n        } else {\r\n          zoom -= 0.1;\r\n        }\r\n        zoom = Math.round(zoom*100)/100;\r\n        this.refresh(zoom);\r\n      }.bind(this)\r\n    });\r\n  }\r\n\r\n  // Draw center date\r\n  this._intervalDiv = ol_ext_element.create('DIV', {\r\n    className: 'ol-center-date',\r\n    parent: this.element\r\n  });\r\n\r\n  // Remove selection\r\n  this.element.addEventListener('mouseover', function(){\r\n    if (this._select) this._select.elt.classList.remove('ol-select');\r\n  }.bind(this));\r\n\r\n  // Trigger scroll event\r\n  var scrollListener = null;\r\n  this._scrollDiv.addEventListener('scroll', function() {\r\n    this._setScrollLeft();\r\n    if (scrollListener) {\r\n      clearTimeout(scrollListener);\r\n      scrollListener = null;\r\n    }\r\n    scrollListener = setTimeout(function() {\r\n      this.dispatchEvent({ \r\n        type: 'scroll', \r\n        date: this.getDate(), \r\n        dateStart: this.getDate('start'), \r\n        dateEnd: this.getDate('end')\r\n      });\r\n    }.bind(this), options.scrollTimeout || 15);\r\n  }.bind(this));\r\n  // Magic to give \"live\" scroll events on touch devices\r\n  // this._scrollDiv.addEventListener('gesturechange', function() {});\r\n\r\n  // Scroll timeline\r\n  ol_ext_element.scrollDiv(this._scrollDiv, {\r\n    onmove: function(b) {\r\n      // Prevent selection on moving\r\n      this._moving = b; \r\n    }.bind(this)\r\n  });\r\n\r\n  this._tline = [];\r\n\r\n  // Parameters\r\n  this._scrollLeft = 0;\r\n  this.set('maxWidth', options.maxWidth || 2000);\r\n  this.set('minDate', options.minDate || Infinity);\r\n  this.set('maxDate', options.maxDate || -Infinity);\r\n  this.set('graduation', options.graduation);\r\n  this.set('minZoom', options.minZoom || .2);\r\n  this.set('maxZoom', options.maxZoom || 4);\r\n  this.setInterval(options.interval);\r\n  if (options.getHTML) this._getHTML =  options.getHTML;\r\n  if (options.getFeatureDate) this._getFeatureDate =  options.getFeatureDate;\r\n  if (options.endFeatureDate) this._endFeatureDate =  options.endFeatureDate;\r\n\r\n  // Feature source \r\n  this.setFeatures(options.features || options.source, options.zoom);\r\n};\r\nol_ext_inherits(ol_control_Timeline, ol_control_Control);\r\n\r\n/**\r\n * Set the map instance the control is associated with\r\n * and add interaction attached to it to this map.\r\n * @param {_ol_Map_} map The map instance.\r\n */\r\nol_control_Timeline.prototype.setMap = function(map) {\r\n  ol_control_Control.prototype.setMap.call(this, map);\r\n  this.refresh(this.get('zoom')||1, true);\r\n};\r\n\r\n/** Add a button on the timeline\r\n * @param {*} button\r\n *  @param {string} button.className\r\n *  @param {title} button.className\r\n *  @param {Element|string} button.html Content of the element\r\n *  @param {function} button.click a function called when the button is clicked\r\n */\r\nol_control_Timeline.prototype.addButton = function(button) {\r\n  this.element.classList.add('ol-hasbutton');\r\n  ol_ext_element.create('BUTTON', {\r\n    className: button.className || undefined,\r\n    title: button.title,\r\n    html : button.html,\r\n    click: button.handleClick,\r\n    parent: this._buttons\r\n  })\r\n};\r\n\r\n/** Set an interval\r\n * @param {number|string} length the interval length in ms or a farmatted text ie. end with y, 1d, h, mn, s (31 days = '31d'), default none\r\n */\r\nol_control_Timeline.prototype.setInterval = function(length) {\r\n  if (typeof(length)==='string') {\r\n    if (/s$/.test(length)) {\r\n      length = parseFloat(length) * 1000;\r\n    } else if (/mn$/.test(length)) {\r\n      length = parseFloat(length) * 1000 * 60;\r\n    } else if (/h$/.test(length)) {\r\n      length = parseFloat(length) * 1000 * 3600;\r\n    } else if (/d$/.test(length)) {\r\n      length = parseFloat(length) * 1000 * 3600 * 24;\r\n    } else if (/y$/.test(length)) {\r\n      length = parseFloat(length) * 1000 * 3600 * 24 * 365;\r\n    } else {\r\n      length = 0;\r\n    }\r\n  }\r\n  this.set('interval', length || 0);\r\n  if (length) this.element.classList.add('ol-interval');\r\n  else this.element.classList.remove('ol-interval');\r\n  this.refresh(this.get('zoom'));\r\n}\r\n\r\n/** Default html to show in the line\r\n * @param {ol.Feature} feature\r\n * @return {DOMElement|string}\r\n * @private\r\n */\r\nol_control_Timeline.prototype._getHTML = function(feature) {\r\n  return feature.get('name') || '';\r\n};\r\n\r\n/** Default function to get the date of a feature, returns the date attribute\r\n * @param {ol.Feature} feature\r\n * @return {Data|string}\r\n * @private\r\n */\r\nol_control_Timeline.prototype._getFeatureDate = function(feature) {\r\n  return (feature && feature.get) ? feature.get('date') : null;\r\n};\r\n\r\n/** Default function to get the end date of a feature, return undefined\r\n * @param {ol.Feature} feature\r\n * @return {Data|string}\r\n * @private\r\n */\r\nol_control_Timeline.prototype._endFeatureDate = function(/* feature */) {\r\n  return undefined;\r\n};\r\n\r\n/** Is the line collapsed\r\n * @return {boolean}\r\n */\r\nol_control_Timeline.prototype.isCollapsed = function() {\r\n  return this.element.classList.contains('ol-collapsed');\r\n};\r\n\r\n/** Collapse the line\r\n * @param {boolean} b\r\n */\r\nol_control_Timeline.prototype.collapse = function(b) {\r\n  if (b) this.element.classList.add('ol-collapsed');\r\n  else this.element.classList.remove('ol-collapsed');\r\n  this.dispatchEvent({ type: 'collapse', collapsed: this.isCollapsed() });\r\n};\r\n\r\n/** Collapse the line\r\n */\r\nol_control_Timeline.prototype.toggle = function() {\r\n  this.element.classList.toggle('ol-collapsed');\r\n  this.dispatchEvent({ type: 'collapse', collapsed: this.isCollapsed() });\r\n};\r\n\r\n/** Set the features to display in the timeline\r\n * @param {Array<ol.Features>|ol.source.Vector} features An array of features or a vector source\r\n * @param {number} zoom zoom to draw the line default 1\r\n */\r\nol_control_Timeline.prototype.setFeatures = function(features, zoom) {\r\n  this._features = this._source = null;\r\n  if (features instanceof ol_source_Vector) this._source = features;\r\n  else if (features instanceof Array) this._features = features;\r\n  else this._features = [];\r\n  this.refresh(zoom);\r\n};\r\n\r\n/**\r\n * Get features\r\n * @return {Array<ol.Feature>}\r\n */\r\nol_control_Timeline.prototype.getFeatures = function() {\r\n  return this._features || this._source.getFeatures();\r\n}\r\n\r\n/**\r\n * Refresh the timeline with new data\r\n * @param {Number} zoom Zoom factor from 0.25 to 10, default 1\r\n */\r\nol_control_Timeline.prototype.refresh = function(zoom, first) {\r\n  if (!this.getMap()) return;\r\n  if (!zoom) zoom = this.get('zoom');\r\n  zoom = Math.min(this.get('maxZoom'), Math.max(this.get('minZoom'), zoom || 1));\r\n  this.set('zoom', zoom);\r\n  this._scrollDiv.innerHTML = '';\r\n  var features = this.getFeatures();\r\n  var d, d2;\r\n\r\n  // Get features sorted by date\r\n  var tline = this._tline = [];\r\n  features.forEach(function(f) {\r\n    if (d = this._getFeatureDate(f)) {\r\n      if (!(d instanceof Date)) {\r\n        d = new Date(d)\r\n      }\r\n      if (this._endFeatureDate) {\r\n        d2 = this._endFeatureDate(f);\r\n        if (!(d2 instanceof Date)) {\r\n          d2 = new Date(d2)\r\n        }\r\n      }\r\n      if (!isNaN(d)) {\r\n        tline.push({\r\n          date: d,\r\n          end: isNaN(d2) ? null : d2,\r\n          feature: f\r\n        });\r\n      }\r\n    }\r\n  }.bind(this));\r\n\r\n  tline.sort(function(a,b) { \r\n    return (a.date < b.date ? -1 : (a.date===b.date ? 0: 1))\r\n  });\r\n\r\n  // Draw\r\n  var div = ol_ext_element.create('DIV', {\r\n    parent: this._scrollDiv\r\n  });\r\n\r\n  // Calculate width\r\n  var min = this._minDate = Math.min(this.get('minDate'), tline.length ? tline[0].date : Infinity);\r\n  var max = this._maxDate = Math.max(this.get('maxDate'), tline.length ? tline[tline.length-1].date : -Infinity);\r\n  if (!isFinite(min)) this._minDate = min = new Date();\r\n  if (!isFinite(max)) this._maxDate = max = new Date();\r\n  var delta = (max-min);\r\n  var maxWidth = this.get('maxWidth');\r\n  var scale = this._scale = (delta > maxWidth ? maxWidth/delta : 1) * zoom;\r\n  // Leave 10px on right\r\n  min = this._minDate = this._minDate - 10/scale;\r\n  delta = (max-min) * scale;\r\n  ol_ext_element.setStyle(div, {\r\n    width: delta,\r\n    maxWidth: 'unset'\r\n  });\r\n\r\n  // Draw time's bar\r\n  this._drawTime(div, min, max, scale);\r\n\r\n  // Set interval\r\n  if (this.get('interval')) {\r\n    ol_ext_element.setStyle (this._intervalDiv, { width: this.get('interval') * scale });\r\n  } else {\r\n    ol_ext_element.setStyle (this._intervalDiv, { width: '' });\r\n  }\r\n\r\n  // Draw features\r\n  var line = [];\r\n  var lineHeight = ol_ext_element.getStyle(this._scrollDiv, 'lineHeight');\r\n  \r\n  // Wrapper\r\n  var fdiv = ol_ext_element.create('DIV', {\r\n      className: 'ol-features',\r\n      parent: div\r\n  });\r\n\r\n  // Add features on the line\r\n  tline.forEach(function(f) {\r\n    var d = f.date;\r\n    var t = f.elt = ol_ext_element.create('DIV', {\r\n      className: 'ol-feature',\r\n      style: {\r\n        left: Math.round((d-min)*scale),\r\n      },\r\n      html: this._getHTML(f.feature),\r\n      parent: fdiv\r\n    });\r\n    // Prevent image dragging\r\n    var img = t.querySelectorAll('img');\r\n    for (var i=0; i<img.length; i++) {\r\n      img[i].ondragstart = function(){ return false; };\r\n    }\r\n\r\n    // Calculate image width\r\n    if (f.end) {\r\n      ol_ext_element.setStyle(t, { \r\n        minWidth: (f.end-d) * scale, \r\n        width: (f.end-d) * scale, \r\n        maxWidth: 'unset'\r\n      });\r\n    }\r\n    var left = ol_ext_element.getStyle(t, 'left');\r\n    // Select on click\r\n    t.addEventListener('click', function() {\r\n      if (!this._moving) {\r\n        this.dispatchEvent({type: 'select', feature: f.feature });\r\n      }\r\n    }.bind(this));\r\n\r\n    // Find first free Y position\r\n    var pos, l;\r\n    for (pos=0; l=line[pos]; pos++) {\r\n      if (left > l) {\r\n        break;\r\n      }\r\n    }\r\n    line[pos] = left + ol_ext_element.getStyle(t, 'width');\r\n    ol_ext_element.setStyle(t, { top: pos*lineHeight });\r\n  }.bind(this));\r\n  this._nbline = line.length;\r\n\r\n  if (first) this.setDate(this._minDate, { anim: false, position: 'start' });\r\n  // Dispatch scroll event\r\n  this.dispatchEvent({ \r\n    type: 'scroll', \r\n    date: this.getDate(), \r\n    dateStart: this.getDate('start'), \r\n    dateEnd: this.getDate('end')\r\n  });\r\n};\r\n\r\n/** Get offset given a date\r\n * @param {Date} date\r\n * @return {number}\r\n * @private\r\n */\r\nol_control_Timeline.prototype._getOffsetFromDate = function(date) {\r\n  return (date - this._minDate) * this._scale;\r\n};\r\n\r\n/** Get date given an offset\r\n * @param {Date} date\r\n * @return {number}\r\n * @private\r\n */\r\nol_control_Timeline.prototype._getDateFromOffset = function(offset) {\r\n  return offset / this._scale + this._minDate;\r\n};\r\n\r\n/** Set the current position \r\n * @param {number} scrollLeft current position (undefined when scrolling)\r\n * @returns {number}\r\n * @private\r\n */\r\nol_control_Timeline.prototype._setScrollLeft = function(scrollLeft) {\r\n  this._scrollLeft = scrollLeft;\r\n  if (scrollLeft !== undefined) {\r\n    this._scrollDiv.scrollLeft = scrollLeft;\r\n  }\r\n};\r\n\r\n/** Get the current position \r\n * @returns {number}\r\n * @private\r\n */\r\nol_control_Timeline.prototype._getScrollLeft = function() {\r\n  // Unset when scrolling\r\n  if (this._scrollLeft === undefined) {\r\n    return this._scrollDiv.scrollLeft;\r\n  } else {\r\n    // St by user\r\n    return this._scrollLeft;\r\n  }\r\n};\r\n\r\n/**\r\n * Draw dates on line\r\n * @private\r\n */\r\nol_control_Timeline.prototype._drawTime = function(div, min, max, scale) {\r\n  // Times div\r\n  var tdiv = ol_ext_element.create('DIV', {\r\n    className: 'ol-times',\r\n    parent: div\r\n  });\r\n  var d, dt, month, dmonth;\r\n  var dx = ol_ext_element.getStyle(tdiv, 'left');\r\n  var heigth = ol_ext_element.getStyle(tdiv, 'height');\r\n  // Year\r\n  var year = (new Date(this._minDate)).getFullYear();\r\n  dt = ((new Date(0)).setFullYear(String(year)) - new Date(0).setFullYear(String(year-1))) * scale;\r\n  var dyear = Math.round(2*heigth/dt)+1;\r\n  while(true) {\r\n    d = new Date(0).setFullYear(year);\r\n    if (d > this._maxDate) break;\r\n    ol_ext_element.create('DIV', {\r\n      className: 'ol-time ol-year',\r\n      style: {\r\n        left: this._getOffsetFromDate(d) - dx\r\n      },\r\n      html: year,\r\n      parent: tdiv\r\n    });\r\n    year += dyear;\r\n  }\r\n  // Month\r\n  if (/day|month/.test(this.get('graduation'))) {\r\n    dt = ((new Date(0,0,1)).setFullYear(String(year)) - new Date(0,0,1).setFullYear(String(year-1))) * scale;\r\n    dmonth = Math.max(1, Math.round(12 / Math.round(dt/heigth/2)));\r\n    if (dmonth < 12) {\r\n      year = (new Date(this._minDate)).getFullYear();\r\n      month = dmonth+1;\r\n      while(true) {\r\n        d = new Date(0,0,1);\r\n        d.setFullYear(year);\r\n        d.setMonth(month-1);\r\n        if (d > this._maxDate) break;\r\n        ol_ext_element.create('DIV', {\r\n          className: 'ol-time ol-month',\r\n          style: {\r\n            left: this._getOffsetFromDate(d) - dx\r\n          },\r\n          html: d.toLocaleDateString(undefined, { month: 'short'}),\r\n          parent: tdiv\r\n        });\r\n        month += dmonth;\r\n        if (month > 12) {\r\n          year++;\r\n          month = dmonth+1;\r\n        }\r\n      }\r\n    }\r\n  }\r\n  // Day\r\n  if (this.get('graduation')==='day') {\r\n    dt = (new Date(0,1,1) - new Date(0,0,1)) * scale;\r\n    var dday = Math.max(1, Math.round(31 / Math.round(dt/heigth/2)));\r\n    if (dday < 31) {\r\n      year = (new Date(this._minDate)).getFullYear();\r\n      month = 0;\r\n      var day = dday;\r\n      while(true) {\r\n        d = new Date(0,0,1);\r\n        d.setFullYear(year);\r\n        d.setMonth(month);\r\n        d.setDate(day);\r\n        if (isNaN(d)) {\r\n          month++;\r\n          if (month>12) {\r\n            month = 1;\r\n            year++;\r\n          }\r\n          day = dday;\r\n        } else {\r\n          if (d > this._maxDate) break;\r\n          if (day>1) {\r\n            var offdate = this._getOffsetFromDate(d);\r\n            if (this._getOffsetFromDate(new Date(year, month+1, 1)) - offdate > heigth) {\r\n              ol_ext_element.create('DIV', {\r\n                className: 'ol-time ol-day',\r\n                style: {\r\n                  left: offdate - dx\r\n                },\r\n                html: day,\r\n                parent: tdiv\r\n              });\r\n            }\r\n          }\r\n          year = d.getFullYear();\r\n          month = d.getMonth();\r\n          day = d.getDate() + dday;\r\n          if (day > new Date(year, month+1, 0).getDate()) {\r\n            month++;\r\n            day = dday;\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n};\r\n\r\n/** Center timeline on a date\r\n * @param {Date|String|ol.feature} feature a date or a feature with a date\r\n * @param {Object} options\r\n *  @param {boolean} options.anim animate scroll\r\n *  @param {string} options.position start, end or middle, default middle\r\n */\r\nol_control_Timeline.prototype.setDate = function(feature, options) {\r\n  var date;\r\n  options = options || {};\r\n  // It's a date\r\n  if (feature instanceof Date) {\r\n    date = feature;\r\n  } else {\r\n    // Get date from Feature\r\n    if (this.getFeatures().indexOf(feature) >= 0) {\r\n      date = this._getFeatureDate(feature);\r\n    }\r\n    if (date && !(date instanceof Date)) {\r\n      date = new Date(date);\r\n    }\r\n    if (!date || isNaN(date)) {\r\n      date = new Date(String(feature));\r\n    }\r\n  }\r\n  if (!isNaN(date)) {\r\n    if (options.anim === false) this._scrollDiv.classList.add('ol-move');\r\n    var scrollLeft = this._getOffsetFromDate(date);\r\n    if (options.position==='start') {\r\n      scrollLeft += ol_ext_element.outerWidth(this._scrollDiv)/2 - ol_ext_element.getStyle(this._scrollDiv, 'marginLeft')/2;\r\n    } else if (options.position==='end') {\r\n      scrollLeft -= ol_ext_element.outerWidth(this._scrollDiv)/2 - ol_ext_element.getStyle(this._scrollDiv, 'marginLeft')/2;\r\n    }\r\n    this._setScrollLeft(scrollLeft);\r\n    if (options.anim === false) this._scrollDiv.classList.remove('ol-move');\r\n    if (feature) {\r\n      for (var i=0, f; f = this._tline[i]; i++) {\r\n        if (f.feature === feature) {\r\n          f.elt.classList.add('ol-select');\r\n          this._select = f;\r\n        } else {\r\n          f.elt.classList.remove('ol-select');\r\n        }\r\n      }\r\n    }\r\n  }\r\n};\r\n\r\n/** Get round date (sticked to mn, hour day or month)\r\n * @param {Date} d\r\n * @param {string} stick sticking option to stick date to: 'mn', 'hour', 'day', 'month', default no stick\r\n * @return {Date}\r\n */\r\nol_control_Timeline.prototype.roundDate = function(d, stick) {\r\n  switch (stick) {\r\n    case 'mn': {\r\n      return new Date(this._roundTo(d, 60*1000));\r\n    }\r\n    case 'hour': {\r\n      return new Date(this._roundTo(d, 60*60*1000));\r\n    }\r\n    case 'day': {\r\n      return new Date(this._roundTo(d, 24*60*60*1000));\r\n    }\r\n    case 'month': {\r\n      d = new Date(this._roundTo(d, 24*60*60*1000));\r\n      if (d.getDate() > 15) {\r\n        d = new Date(d.setMonth(d.getMonth() + 1));\r\n      }\r\n      d = d.setDate(1);\r\n      return new Date(d);\r\n    }\r\n    default: return new Date(d);\r\n  }\r\n};\r\n\r\n/** Get the date of the center\r\n * @param {string} position position to get 'start', 'end' or 'middle', default middle\r\n * @param {string} stick sticking option to stick date to: 'mn', 'hour', 'day', 'month', default no stick\r\n * @return {Date}\r\n */\r\nol_control_Timeline.prototype.getDate = function(position, stick) {\r\n  var pos;\r\n  if (!stick) stick = position;\r\n  switch (position) {\r\n    case 'start': {\r\n      if (this.get('interval')) {\r\n        pos = - ol_ext_element.getStyle(this._intervalDiv, 'width')/2 + ol_ext_element.getStyle(this._scrollDiv, 'marginLeft')/2;\r\n      } else {\r\n        pos = - ol_ext_element.outerWidth(this._scrollDiv)/2 + ol_ext_element.getStyle(this._scrollDiv, 'marginLeft')/2;\r\n      }\r\n      break;\r\n    }\r\n    case 'end': {\r\n      if (this.get('interval')) {\r\n        pos = ol_ext_element.getStyle(this._intervalDiv, 'width')/2 - ol_ext_element.getStyle(this._scrollDiv, 'marginLeft')/2;\r\n      } else {\r\n        pos = ol_ext_element.outerWidth(this._scrollDiv)/2 - ol_ext_element.getStyle(this._scrollDiv, 'marginLeft')/2;\r\n      }\r\n      break;\r\n    }\r\n    default: {\r\n      pos = 0;\r\n      break;\r\n    }\r\n  }\r\n  var d = this._getDateFromOffset(this._getScrollLeft() + pos);\r\n  d = this.roundDate(d, stick);\r\n  return new Date(d);\r\n};\r\n\r\n/** Round number to \r\n * @param {number} d\r\n * @param {number} r\r\n * @return {number}\r\n * @private\r\n */\r\nol_control_Timeline.prototype._roundTo = function(d, r) {\r\n  return Math.round(d/r) * r;\r\n};\r\n\r\n/** Get the start date of the control\r\n * @return {Date}\r\n */\r\nol_control_Timeline.prototype.getStartDate = function() {\r\n  return new Date(this.get('minDate'));\r\n}\r\n\r\n/** Get the end date of the control\r\n * @return {Date}\r\n */\r\nol_control_Timeline.prototype.getEndDate = function() {\r\n  return new Date(this.get('maxDate'));\r\n}\r\n\r\nexport default ol_control_Timeline","/**\n * @module ol/ViewHint\n */\n\n/**\n * @enum {number}\n */\nexport default {\n  ANIMATING: 0,\n  INTERACTING: 1\n};\n\n//# sourceMappingURL=ViewHint.js.map","/**\n * @module ol/Feature\n */\nimport {assert} from './asserts.js';\nimport {listen, unlisten, unlistenByKey} from './events.js';\nimport EventType from './events/EventType.js';\nimport BaseObject, {getChangeEventType} from './Object.js';\n\n/**\n * @typedef {typeof Feature|typeof import(\"./render/Feature.js\").default} FeatureClass\n */\n\n/**\n * @typedef {Feature|import(\"./render/Feature.js\").default} FeatureLike\n */\n\n/**\n * @classdesc\n * A vector object for geographic features with a geometry and other\n * attribute properties, similar to the features in vector file formats like\n * GeoJSON.\n *\n * Features can be styled individually with `setStyle`; otherwise they use the\n * style of their vector layer.\n *\n * Note that attribute properties are set as {@link module:ol/Object} properties on\n * the feature object, so they are observable, and have get/set accessors.\n *\n * Typically, a feature has a single geometry property. You can set the\n * geometry using the `setGeometry` method and get it with `getGeometry`.\n * It is possible to store more than one geometry on a feature using attribute\n * properties. By default, the geometry used for rendering is identified by\n * the property name `geometry`. If you want to use another geometry property\n * for rendering, use the `setGeometryName` method to change the attribute\n * property associated with the geometry for the feature.  For example:\n *\n * ```js\n *\n * import Feature from 'ol/Feature';\n * import Polygon from 'ol/geom/Polygon';\n * import Point from 'ol/geom/Point';\n *\n * var feature = new Feature({\n *   geometry: new Polygon(polyCoords),\n *   labelPoint: new Point(labelCoords),\n *   name: 'My Polygon'\n * });\n *\n * // get the polygon geometry\n * var poly = feature.getGeometry();\n *\n * // Render the feature as a point using the coordinates from labelPoint\n * feature.setGeometryName('labelPoint');\n *\n * // get the point geometry\n * var point = feature.getGeometry();\n * ```\n *\n * @api\n */\nvar Feature = /*@__PURE__*/(function (BaseObject) {\n  function Feature(opt_geometryOrProperties) {\n\n    BaseObject.call(this);\n\n    /**\n     * @private\n     * @type {number|string|undefined}\n     */\n    this.id_ = undefined;\n\n    /**\n     * @type {string}\n     * @private\n     */\n    this.geometryName_ = 'geometry';\n\n    /**\n     * User provided style.\n     * @private\n     * @type {import(\"./style/Style.js\").StyleLike}\n     */\n    this.style_ = null;\n\n    /**\n     * @private\n     * @type {import(\"./style/Style.js\").StyleFunction|undefined}\n     */\n    this.styleFunction_ = undefined;\n\n    /**\n     * @private\n     * @type {?import(\"./events.js\").EventsKey}\n     */\n    this.geometryChangeKey_ = null;\n\n    listen(\n      this, getChangeEventType(this.geometryName_),\n      this.handleGeometryChanged_, this);\n\n    if (opt_geometryOrProperties) {\n      if (typeof /** @type {?} */ (opt_geometryOrProperties).getSimplifiedGeometry === 'function') {\n        var geometry = /** @type {import(\"./geom/Geometry.js\").default} */ (opt_geometryOrProperties);\n        this.setGeometry(geometry);\n      } else {\n        /** @type {Object<string, *>} */\n        var properties = opt_geometryOrProperties;\n        this.setProperties(properties);\n      }\n    }\n  }\n\n  if ( BaseObject ) Feature.__proto__ = BaseObject;\n  Feature.prototype = Object.create( BaseObject && BaseObject.prototype );\n  Feature.prototype.constructor = Feature;\n\n  /**\n   * Clone this feature. If the original feature has a geometry it\n   * is also cloned. The feature id is not set in the clone.\n   * @return {Feature} The clone.\n   * @api\n   */\n  Feature.prototype.clone = function clone () {\n    var clone = new Feature(this.getProperties());\n    clone.setGeometryName(this.getGeometryName());\n    var geometry = this.getGeometry();\n    if (geometry) {\n      clone.setGeometry(geometry.clone());\n    }\n    var style = this.getStyle();\n    if (style) {\n      clone.setStyle(style);\n    }\n    return clone;\n  };\n\n  /**\n   * Get the feature's default geometry.  A feature may have any number of named\n   * geometries.  The \"default\" geometry (the one that is rendered by default) is\n   * set when calling {@link module:ol/Feature~Feature#setGeometry}.\n   * @return {import(\"./geom/Geometry.js\").default|undefined} The default geometry for the feature.\n   * @api\n   * @observable\n   */\n  Feature.prototype.getGeometry = function getGeometry () {\n    return (\n      /** @type {import(\"./geom/Geometry.js\").default|undefined} */ (this.get(this.geometryName_))\n    );\n  };\n\n  /**\n   * Get the feature identifier.  This is a stable identifier for the feature and\n   * is either set when reading data from a remote source or set explicitly by\n   * calling {@link module:ol/Feature~Feature#setId}.\n   * @return {number|string|undefined} Id.\n   * @api\n   */\n  Feature.prototype.getId = function getId () {\n    return this.id_;\n  };\n\n  /**\n   * Get the name of the feature's default geometry.  By default, the default\n   * geometry is named `geometry`.\n   * @return {string} Get the property name associated with the default geometry\n   *     for this feature.\n   * @api\n   */\n  Feature.prototype.getGeometryName = function getGeometryName () {\n    return this.geometryName_;\n  };\n\n  /**\n   * Get the feature's style. Will return what was provided to the\n   * {@link module:ol/Feature~Feature#setStyle} method.\n   * @return {import(\"./style/Style.js\").StyleLike} The feature style.\n   * @api\n   */\n  Feature.prototype.getStyle = function getStyle () {\n    return this.style_;\n  };\n\n  /**\n   * Get the feature's style function.\n   * @return {import(\"./style/Style.js\").StyleFunction|undefined} Return a function\n   * representing the current style of this feature.\n   * @api\n   */\n  Feature.prototype.getStyleFunction = function getStyleFunction () {\n    return this.styleFunction_;\n  };\n\n  /**\n   * @private\n   */\n  Feature.prototype.handleGeometryChange_ = function handleGeometryChange_ () {\n    this.changed();\n  };\n\n  /**\n   * @private\n   */\n  Feature.prototype.handleGeometryChanged_ = function handleGeometryChanged_ () {\n    if (this.geometryChangeKey_) {\n      unlistenByKey(this.geometryChangeKey_);\n      this.geometryChangeKey_ = null;\n    }\n    var geometry = this.getGeometry();\n    if (geometry) {\n      this.geometryChangeKey_ = listen(geometry,\n        EventType.CHANGE, this.handleGeometryChange_, this);\n    }\n    this.changed();\n  };\n\n  /**\n   * Set the default geometry for the feature.  This will update the property\n   * with the name returned by {@link module:ol/Feature~Feature#getGeometryName}.\n   * @param {import(\"./geom/Geometry.js\").default|undefined} geometry The new geometry.\n   * @api\n   * @observable\n   */\n  Feature.prototype.setGeometry = function setGeometry (geometry) {\n    this.set(this.geometryName_, geometry);\n  };\n\n  /**\n   * Set the style for the feature.  This can be a single style object, an array\n   * of styles, or a function that takes a resolution and returns an array of\n   * styles. If it is `null` the feature has no style (a `null` style).\n   * @param {import(\"./style/Style.js\").StyleLike} style Style for this feature.\n   * @api\n   * @fires module:ol/events/Event~Event#event:change\n   */\n  Feature.prototype.setStyle = function setStyle (style) {\n    this.style_ = style;\n    this.styleFunction_ = !style ? undefined : createStyleFunction(style);\n    this.changed();\n  };\n\n  /**\n   * Set the feature id.  The feature id is considered stable and may be used when\n   * requesting features or comparing identifiers returned from a remote source.\n   * The feature id can be used with the\n   * {@link module:ol/source/Vector~VectorSource#getFeatureById} method.\n   * @param {number|string|undefined} id The feature id.\n   * @api\n   * @fires module:ol/events/Event~Event#event:change\n   */\n  Feature.prototype.setId = function setId (id) {\n    this.id_ = id;\n    this.changed();\n  };\n\n  /**\n   * Set the property name to be used when getting the feature's default geometry.\n   * When calling {@link module:ol/Feature~Feature#getGeometry}, the value of the property with\n   * this name will be returned.\n   * @param {string} name The property name of the default geometry.\n   * @api\n   */\n  Feature.prototype.setGeometryName = function setGeometryName (name) {\n    unlisten(\n      this, getChangeEventType(this.geometryName_),\n      this.handleGeometryChanged_, this);\n    this.geometryName_ = name;\n    listen(\n      this, getChangeEventType(this.geometryName_),\n      this.handleGeometryChanged_, this);\n    this.handleGeometryChanged_();\n  };\n\n  return Feature;\n}(BaseObject));\n\n\n/**\n * Convert the provided object into a feature style function.  Functions passed\n * through unchanged.  Arrays of Style or single style objects wrapped\n * in a new feature style function.\n * @param {!import(\"./style/Style.js\").StyleFunction|!Array<import(\"./style/Style.js\").default>|!import(\"./style/Style.js\").default} obj\n *     A feature style function, a single style, or an array of styles.\n * @return {import(\"./style/Style.js\").StyleFunction} A style function.\n */\nexport function createStyleFunction(obj) {\n  if (typeof obj === 'function') {\n    return obj;\n  } else {\n    /**\n     * @type {Array<import(\"./style/Style.js\").default>}\n     */\n    var styles;\n    if (Array.isArray(obj)) {\n      styles = obj;\n    } else {\n      assert(typeof /** @type {?} */ (obj).getZIndex === 'function',\n        41); // Expected an `import(\"./style/Style.js\").Style` or an array of `import(\"./style/Style.js\").Style`\n      var style = /** @type {import(\"./style/Style.js\").default} */ (obj);\n      styles = [style];\n    }\n    return function() {\n      return styles;\n    };\n  }\n}\nexport default Feature;\n\n//# sourceMappingURL=Feature.js.map","/**\n * @module ol/MapBrowserEvent\n */\nimport MapEvent from './MapEvent.js';\n\n/**\n * @classdesc\n * Events emitted as map browser events are instances of this type.\n * See {@link module:ol/PluggableMap~PluggableMap} for which events trigger a map browser event.\n */\nvar MapBrowserEvent = /*@__PURE__*/(function (MapEvent) {\n  function MapBrowserEvent(type, map, browserEvent, opt_dragging, opt_frameState) {\n\n    MapEvent.call(this, type, map, opt_frameState);\n\n    /**\n     * The original browser event.\n     * @const\n     * @type {Event}\n     * @api\n     */\n    this.originalEvent = browserEvent;\n\n    /**\n     * The map pixel relative to the viewport corresponding to the original browser event.\n     * @type {import(\"./pixel.js\").Pixel}\n     * @api\n     */\n    this.pixel = map.getEventPixel(browserEvent);\n\n    /**\n     * The coordinate in view projection corresponding to the original browser event.\n     * @type {import(\"./coordinate.js\").Coordinate}\n     * @api\n     */\n    this.coordinate = map.getCoordinateFromPixel(this.pixel);\n\n    /**\n     * Indicates if the map is currently being dragged. Only set for\n     * `POINTERDRAG` and `POINTERMOVE` events. Default is `false`.\n     *\n     * @type {boolean}\n     * @api\n     */\n    this.dragging = opt_dragging !== undefined ? opt_dragging : false;\n\n  }\n\n  if ( MapEvent ) MapBrowserEvent.__proto__ = MapEvent;\n  MapBrowserEvent.prototype = Object.create( MapEvent && MapEvent.prototype );\n  MapBrowserEvent.prototype.constructor = MapBrowserEvent;\n\n  /**\n   * Prevents the default browser action.\n   * See https://developer.mozilla.org/en-US/docs/Web/API/event.preventDefault.\n   * @override\n   * @api\n   */\n  MapBrowserEvent.prototype.preventDefault = function preventDefault () {\n    MapEvent.prototype.preventDefault.call(this);\n    this.originalEvent.preventDefault();\n  };\n\n  /**\n   * Prevents further propagation of the current event.\n   * See https://developer.mozilla.org/en-US/docs/Web/API/event.stopPropagation.\n   * @override\n   * @api\n   */\n  MapBrowserEvent.prototype.stopPropagation = function stopPropagation () {\n    MapEvent.prototype.stopPropagation.call(this);\n    this.originalEvent.stopPropagation();\n  };\n\n  return MapBrowserEvent;\n}(MapEvent));\n\n\nexport default MapBrowserEvent;\n\n//# sourceMappingURL=MapBrowserEvent.js.map","/**\n * @module ol/TileQueue\n */\nimport TileState from './TileState.js';\nimport {listen, unlisten} from './events.js';\nimport EventType from './events/EventType.js';\nimport PriorityQueue from './structs/PriorityQueue.js';\n\n\n/**\n * @typedef {function(import(\"./Tile.js\").default, string, import(\"./coordinate.js\").Coordinate, number): number} PriorityFunction\n */\n\n\nvar TileQueue = /*@__PURE__*/(function (PriorityQueue) {\n  function TileQueue(tilePriorityFunction, tileChangeCallback) {\n\n    PriorityQueue.call(\n      /**\n       * @param {Array} element Element.\n       * @return {number} Priority.\n       */\n      this, function(element) {\n        return tilePriorityFunction.apply(null, element);\n      },\n      /**\n       * @param {Array} element Element.\n       * @return {string} Key.\n       */\n      function(element) {\n        return (/** @type {import(\"./Tile.js\").default} */ (element[0]).getKey());\n      });\n\n    /**\n     * @private\n     * @type {function(): ?}\n     */\n    this.tileChangeCallback_ = tileChangeCallback;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.tilesLoading_ = 0;\n\n    /**\n     * @private\n     * @type {!Object<string,boolean>}\n     */\n    this.tilesLoadingKeys_ = {};\n\n  }\n\n  if ( PriorityQueue ) TileQueue.__proto__ = PriorityQueue;\n  TileQueue.prototype = Object.create( PriorityQueue && PriorityQueue.prototype );\n  TileQueue.prototype.constructor = TileQueue;\n\n  /**\n   * @inheritDoc\n   */\n  TileQueue.prototype.enqueue = function enqueue (element) {\n    var added = PriorityQueue.prototype.enqueue.call(this, element);\n    if (added) {\n      var tile = element[0];\n      listen(tile, EventType.CHANGE, this.handleTileChange, this);\n    }\n    return added;\n  };\n\n  /**\n   * @return {number} Number of tiles loading.\n   */\n  TileQueue.prototype.getTilesLoading = function getTilesLoading () {\n    return this.tilesLoading_;\n  };\n\n  /**\n   * @param {import(\"./events/Event.js\").default} event Event.\n   * @protected\n   */\n  TileQueue.prototype.handleTileChange = function handleTileChange (event) {\n    var tile = /** @type {import(\"./Tile.js\").default} */ (event.target);\n    var state = tile.getState();\n    if (state === TileState.LOADED || state === TileState.ERROR ||\n        state === TileState.EMPTY || state === TileState.ABORT) {\n      unlisten(tile, EventType.CHANGE, this.handleTileChange, this);\n      var tileKey = tile.getKey();\n      if (tileKey in this.tilesLoadingKeys_) {\n        delete this.tilesLoadingKeys_[tileKey];\n        --this.tilesLoading_;\n      }\n      this.tileChangeCallback_();\n    }\n  };\n\n  /**\n   * @param {number} maxTotalLoading Maximum number tiles to load simultaneously.\n   * @param {number} maxNewLoads Maximum number of new tiles to load.\n   */\n  TileQueue.prototype.loadMoreTiles = function loadMoreTiles (maxTotalLoading, maxNewLoads) {\n    var newLoads = 0;\n    var abortedTiles = false;\n    var state, tile, tileKey;\n    while (this.tilesLoading_ < maxTotalLoading && newLoads < maxNewLoads &&\n           this.getCount() > 0) {\n      tile = /** @type {import(\"./Tile.js\").default} */ (this.dequeue()[0]);\n      tileKey = tile.getKey();\n      state = tile.getState();\n      if (state === TileState.ABORT) {\n        abortedTiles = true;\n      } else if (state === TileState.IDLE && !(tileKey in this.tilesLoadingKeys_)) {\n        this.tilesLoadingKeys_[tileKey] = true;\n        ++this.tilesLoading_;\n        ++newLoads;\n        tile.load();\n      }\n    }\n    if (newLoads === 0 && abortedTiles) {\n      // Do not stop the render loop when all wanted tiles were aborted due to\n      // a small, saturated tile cache.\n      this.tileChangeCallback_();\n    }\n  };\n\n  return TileQueue;\n}(PriorityQueue));\n\n\nexport default TileQueue;\n\n//# sourceMappingURL=TileQueue.js.map","/**\n * @module ol/MapEventType\n */\n\n/**\n * @enum {string}\n */\nexport default {\n\n  /**\n   * Triggered after a map frame is rendered.\n   * @event module:ol/MapEvent~MapEvent#postrender\n   * @api\n   */\n  POSTRENDER: 'postrender',\n\n  /**\n   * Triggered when the map starts moving.\n   * @event module:ol/MapEvent~MapEvent#movestart\n   * @api\n   */\n  MOVESTART: 'movestart',\n\n  /**\n   * Triggered after the map is moved.\n   * @event module:ol/MapEvent~MapEvent#moveend\n   * @api\n   */\n  MOVEEND: 'moveend'\n\n};\n\n//# sourceMappingURL=MapEventType.js.map","/**\n * @module ol/LayerType\n */\n\n/**\n * A layer type used when creating layer renderers.\n * @enum {string}\n */\nexport default {\n  IMAGE: 'IMAGE',\n  TILE: 'TILE',\n  VECTOR_TILE: 'VECTOR_TILE',\n  VECTOR: 'VECTOR'\n};\n\n//# sourceMappingURL=LayerType.js.map","/**\n * @module ol/Tile\n */\nimport TileState from './TileState.js';\nimport {easeIn} from './easing.js';\nimport EventTarget from './events/Target.js';\nimport EventType from './events/EventType.js';\n\n\n/**\n * A function that takes an {@link module:ol/Tile} for the tile and a\n * `{string}` for the url as arguments. The default is\n * ```js\n * source.setTileLoadFunction(function(tile, src) {\n *   tile.getImage().src = src;\n * });\n * ```\n * For more fine grained control, the load function can use fetch or XMLHttpRequest and involve\n * error handling:\n *\n * ```js\n * import TileState from 'ol/TileState';\n *\n * source.setTileLoadFunction(function(tile, src) {\n *   var xhr = new XMLHttpRequest();\n *   xhr.responseType = 'blob';\n *   xhr.addEventListener('loadend', function (evt) {\n *     var data = this.response;\n *     if (data !== undefined) {\n *       tile.getImage().src = URL.createObjectURL(data);\n *     } else {\n *       tile.setState(TileState.ERROR);\n *     }\n *   });\n *   xhr.addEventListener('error', function () {\n *     tile.setState(TileState.ERROR);\n *   });\n *   xhr.open('GET', src);\n *   xhr.send();\n * });\n * ```\n *\n * @typedef {function(Tile, string)} LoadFunction\n * @api\n */\n\n/**\n * {@link module:ol/source/Tile~Tile} sources use a function of this type to get\n * the url that provides a tile for a given tile coordinate.\n *\n * This function takes an {@link module:ol/tilecoord~TileCoord} for the tile\n * coordinate, a `{number}` representing the pixel ratio and a\n * {@link module:ol/proj/Projection} for the projection  as arguments\n * and returns a `{string}` representing the tile URL, or undefined if no tile\n * should be requested for the passed tile coordinate.\n *\n * @typedef {function(import(\"./tilecoord.js\").TileCoord, number,\n *           import(\"./proj/Projection.js\").default): (string|undefined)} UrlFunction\n * @api\n */\n\n\n/**\n * @typedef {Object} Options\n * @property {number} [transition=250] A duration for tile opacity\n * transitions in milliseconds. A duration of 0 disables the opacity transition.\n * @api\n */\n\n\n/**\n * @classdesc\n * Base class for tiles.\n *\n * @abstract\n */\nvar Tile = /*@__PURE__*/(function (EventTarget) {\n  function Tile(tileCoord, state, opt_options) {\n    EventTarget.call(this);\n\n    var options = opt_options ? opt_options : {};\n\n    /**\n     * @type {import(\"./tilecoord.js\").TileCoord}\n     */\n    this.tileCoord = tileCoord;\n\n    /**\n     * @protected\n     * @type {TileState}\n     */\n    this.state = state;\n\n    /**\n     * An \"interim\" tile for this tile. The interim tile may be used while this\n     * one is loading, for \"smooth\" transitions when changing params/dimensions\n     * on the source.\n     * @type {Tile}\n     */\n    this.interimTile = null;\n\n    /**\n     * A key assigned to the tile. This is used by the tile source to determine\n     * if this tile can effectively be used, or if a new tile should be created\n     * and this one be used as an interim tile for this new tile.\n     * @type {string}\n     */\n    this.key = '';\n\n    /**\n     * The duration for the opacity transition.\n     * @type {number}\n     */\n    this.transition_ = options.transition === undefined ? 250 : options.transition;\n\n    /**\n     * Lookup of start times for rendering transitions.  If the start time is\n     * equal to -1, the transition is complete.\n     * @type {Object<string, number>}\n     */\n    this.transitionStarts_ = {};\n\n  }\n\n  if ( EventTarget ) Tile.__proto__ = EventTarget;\n  Tile.prototype = Object.create( EventTarget && EventTarget.prototype );\n  Tile.prototype.constructor = Tile;\n\n  /**\n   * @protected\n   */\n  Tile.prototype.changed = function changed () {\n    this.dispatchEvent(EventType.CHANGE);\n  };\n\n  /**\n   * @return {string} Key.\n   */\n  Tile.prototype.getKey = function getKey () {\n    return this.key + '/' + this.tileCoord;\n  };\n\n  /**\n   * Get the interim tile most suitable for rendering using the chain of interim\n   * tiles. This corresponds to the  most recent tile that has been loaded, if no\n   * such tile exists, the original tile is returned.\n   * @return {!Tile} Best tile for rendering.\n   */\n  Tile.prototype.getInterimTile = function getInterimTile () {\n    if (!this.interimTile) {\n      //empty chain\n      return this;\n    }\n    var tile = this.interimTile;\n\n    // find the first loaded tile and return it. Since the chain is sorted in\n    // decreasing order of creation time, there is no need to search the remainder\n    // of the list (all those tiles correspond to older requests and will be\n    // cleaned up by refreshInterimChain)\n    do {\n      if (tile.getState() == TileState.LOADED) {\n        return tile;\n      }\n      tile = tile.interimTile;\n    } while (tile);\n\n    // we can not find a better tile\n    return this;\n  };\n\n  /**\n   * Goes through the chain of interim tiles and discards sections of the chain\n   * that are no longer relevant.\n   */\n  Tile.prototype.refreshInterimChain = function refreshInterimChain () {\n    if (!this.interimTile) {\n      return;\n    }\n\n    var tile = this.interimTile;\n    var prev = /** @type {Tile} */ (this);\n\n    do {\n      if (tile.getState() == TileState.LOADED) {\n        //we have a loaded tile, we can discard the rest of the list\n        //we would could abort any LOADING tile request\n        //older than this tile (i.e. any LOADING tile following this entry in the chain)\n        tile.interimTile = null;\n        break;\n      } else if (tile.getState() == TileState.LOADING) {\n        //keep this LOADING tile any loaded tiles later in the chain are\n        //older than this tile, so we're still interested in the request\n        prev = tile;\n      } else if (tile.getState() == TileState.IDLE) {\n        //the head of the list is the most current tile, we don't need\n        //to start any other requests for this chain\n        prev.interimTile = tile.interimTile;\n      } else {\n        prev = tile;\n      }\n      tile = prev.interimTile;\n    } while (tile);\n  };\n\n  /**\n   * Get the tile coordinate for this tile.\n   * @return {import(\"./tilecoord.js\").TileCoord} The tile coordinate.\n   * @api\n   */\n  Tile.prototype.getTileCoord = function getTileCoord () {\n    return this.tileCoord;\n  };\n\n  /**\n   * @return {TileState} State.\n   */\n  Tile.prototype.getState = function getState () {\n    return this.state;\n  };\n\n  /**\n   * Sets the state of this tile. If you write your own {@link module:ol/Tile~LoadFunction tileLoadFunction} ,\n   * it is important to set the state correctly to {@link module:ol/TileState~ERROR}\n   * when the tile cannot be loaded. Otherwise the tile cannot be removed from\n   * the tile queue and will block other requests.\n   * @param {TileState} state State.\n   * @api\n   */\n  Tile.prototype.setState = function setState (state) {\n    this.state = state;\n    this.changed();\n  };\n\n  /**\n   * Load the image or retry if loading previously failed.\n   * Loading is taken care of by the tile queue, and calling this method is\n   * only needed for preloading or for reloading in case of an error.\n   * @abstract\n   * @api\n   */\n  Tile.prototype.load = function load () {};\n\n  /**\n   * Get the alpha value for rendering.\n   * @param {string} id An id for the renderer.\n   * @param {number} time The render frame time.\n   * @return {number} A number between 0 and 1.\n   */\n  Tile.prototype.getAlpha = function getAlpha (id, time) {\n    if (!this.transition_) {\n      return 1;\n    }\n\n    var start = this.transitionStarts_[id];\n    if (!start) {\n      start = time;\n      this.transitionStarts_[id] = start;\n    } else if (start === -1) {\n      return 1;\n    }\n\n    var delta = time - start + (1000 / 60); // avoid rendering at 0\n    if (delta >= this.transition_) {\n      return 1;\n    }\n    return easeIn(delta / this.transition_);\n  };\n\n  /**\n   * Determine if a tile is in an alpha transition.  A tile is considered in\n   * transition if tile.getAlpha() has not yet been called or has been called\n   * and returned 1.\n   * @param {string} id An id for the renderer.\n   * @return {boolean} The tile is in transition.\n   */\n  Tile.prototype.inTransition = function inTransition (id) {\n    if (!this.transition_) {\n      return false;\n    }\n    return this.transitionStarts_[id] !== -1;\n  };\n\n  /**\n   * Mark a transition as complete.\n   * @param {string} id An id for the renderer.\n   */\n  Tile.prototype.endTransition = function endTransition (id) {\n    if (this.transition_) {\n      this.transitionStarts_[id] = -1;\n    }\n  };\n\n  return Tile;\n}(EventTarget));\n\n\nexport default Tile;\n\n//# sourceMappingURL=Tile.js.map","/**\n * @module ol/MapBrowserEventHandler\n */\nimport {DEVICE_PIXEL_RATIO} from './has.js';\nimport MapBrowserEventType from './MapBrowserEventType.js';\nimport MapBrowserPointerEvent from './MapBrowserPointerEvent.js';\nimport {listen, unlistenByKey} from './events.js';\nimport EventTarget from './events/Target.js';\nimport PointerEventType from './pointer/EventType.js';\nimport PointerEventHandler from './pointer/PointerEventHandler.js';\n\nvar MapBrowserEventHandler = /*@__PURE__*/(function (EventTarget) {\n  function MapBrowserEventHandler(map, moveTolerance) {\n\n    EventTarget.call(this);\n\n    /**\n     * This is the element that we will listen to the real events on.\n     * @type {import(\"./PluggableMap.js\").default}\n     * @private\n     */\n    this.map_ = map;\n\n    /**\n     * @type {any}\n     * @private\n     */\n    this.clickTimeoutId_;\n\n    /**\n     * @type {boolean}\n     * @private\n     */\n    this.dragging_ = false;\n\n    /**\n     * @type {!Array<import(\"./events.js\").EventsKey>}\n     * @private\n     */\n    this.dragListenerKeys_ = [];\n\n    /**\n     * @type {number}\n     * @private\n     */\n    this.moveTolerance_ = moveTolerance ?\n      moveTolerance * DEVICE_PIXEL_RATIO : DEVICE_PIXEL_RATIO;\n\n    /**\n     * The most recent \"down\" type event (or null if none have occurred).\n     * Set on pointerdown.\n     * @type {import(\"./pointer/PointerEvent.js\").default}\n     * @private\n     */\n    this.down_ = null;\n\n    var element = this.map_.getViewport();\n\n    /**\n     * @type {number}\n     * @private\n     */\n    this.activePointers_ = 0;\n\n    /**\n     * @type {!Object<number, boolean>}\n     * @private\n     */\n    this.trackedTouches_ = {};\n\n    /**\n     * Event handler which generates pointer events for\n     * the viewport element.\n     *\n     * @type {PointerEventHandler}\n     * @private\n     */\n    this.pointerEventHandler_ = new PointerEventHandler(element);\n\n    /**\n     * Event handler which generates pointer events for\n     * the document (used when dragging).\n     *\n     * @type {PointerEventHandler}\n     * @private\n     */\n    this.documentPointerEventHandler_ = null;\n\n    /**\n     * @type {?import(\"./events.js\").EventsKey}\n     * @private\n     */\n    this.pointerdownListenerKey_ = listen(this.pointerEventHandler_,\n      PointerEventType.POINTERDOWN,\n      this.handlePointerDown_, this);\n\n    /**\n     * @type {?import(\"./events.js\").EventsKey}\n     * @private\n     */\n    this.relayedListenerKey_ = listen(this.pointerEventHandler_,\n      PointerEventType.POINTERMOVE,\n      this.relayEvent_, this);\n\n  }\n\n  if ( EventTarget ) MapBrowserEventHandler.__proto__ = EventTarget;\n  MapBrowserEventHandler.prototype = Object.create( EventTarget && EventTarget.prototype );\n  MapBrowserEventHandler.prototype.constructor = MapBrowserEventHandler;\n\n  /**\n   * @param {import(\"./pointer/PointerEvent.js\").default} pointerEvent Pointer\n   * event.\n   * @private\n   */\n  MapBrowserEventHandler.prototype.emulateClick_ = function emulateClick_ (pointerEvent) {\n    var newEvent = new MapBrowserPointerEvent(\n      MapBrowserEventType.CLICK, this.map_, pointerEvent);\n    this.dispatchEvent(newEvent);\n    if (this.clickTimeoutId_ !== undefined) {\n      // double-click\n      clearTimeout(this.clickTimeoutId_);\n      this.clickTimeoutId_ = undefined;\n      newEvent = new MapBrowserPointerEvent(\n        MapBrowserEventType.DBLCLICK, this.map_, pointerEvent);\n      this.dispatchEvent(newEvent);\n    } else {\n      // click\n      this.clickTimeoutId_ = setTimeout(function() {\n        this.clickTimeoutId_ = undefined;\n        var newEvent = new MapBrowserPointerEvent(\n          MapBrowserEventType.SINGLECLICK, this.map_, pointerEvent);\n        this.dispatchEvent(newEvent);\n      }.bind(this), 250);\n    }\n  };\n\n  /**\n   * Keeps track on how many pointers are currently active.\n   *\n   * @param {import(\"./pointer/PointerEvent.js\").default} pointerEvent Pointer\n   * event.\n   * @private\n   */\n  MapBrowserEventHandler.prototype.updateActivePointers_ = function updateActivePointers_ (pointerEvent) {\n    var event = pointerEvent;\n\n    if (event.type == MapBrowserEventType.POINTERUP ||\n        event.type == MapBrowserEventType.POINTERCANCEL) {\n      delete this.trackedTouches_[event.pointerId];\n    } else if (event.type == MapBrowserEventType.POINTERDOWN) {\n      this.trackedTouches_[event.pointerId] = true;\n    }\n    this.activePointers_ = Object.keys(this.trackedTouches_).length;\n  };\n\n  /**\n   * @param {import(\"./pointer/PointerEvent.js\").default} pointerEvent Pointer\n   * event.\n   * @private\n   */\n  MapBrowserEventHandler.prototype.handlePointerUp_ = function handlePointerUp_ (pointerEvent) {\n    this.updateActivePointers_(pointerEvent);\n    var newEvent = new MapBrowserPointerEvent(\n      MapBrowserEventType.POINTERUP, this.map_, pointerEvent);\n    this.dispatchEvent(newEvent);\n\n    // We emulate click events on left mouse button click, touch contact, and pen\n    // contact. isMouseActionButton returns true in these cases (evt.button is set\n    // to 0).\n    // See http://www.w3.org/TR/pointerevents/#button-states\n    // We only fire click, singleclick, and doubleclick if nobody has called\n    // event.stopPropagation() or event.preventDefault().\n    if (!newEvent.propagationStopped && !this.dragging_ && this.isMouseActionButton_(pointerEvent)) {\n      this.emulateClick_(this.down_);\n    }\n\n    if (this.activePointers_ === 0) {\n      this.dragListenerKeys_.forEach(unlistenByKey);\n      this.dragListenerKeys_.length = 0;\n      this.dragging_ = false;\n      this.down_ = null;\n      this.documentPointerEventHandler_.dispose();\n      this.documentPointerEventHandler_ = null;\n    }\n  };\n\n  /**\n   * @param {import(\"./pointer/PointerEvent.js\").default} pointerEvent Pointer\n   * event.\n   * @return {boolean} If the left mouse button was pressed.\n   * @private\n   */\n  MapBrowserEventHandler.prototype.isMouseActionButton_ = function isMouseActionButton_ (pointerEvent) {\n    return pointerEvent.button === 0;\n  };\n\n  /**\n   * @param {import(\"./pointer/PointerEvent.js\").default} pointerEvent Pointer\n   * event.\n   * @private\n   */\n  MapBrowserEventHandler.prototype.handlePointerDown_ = function handlePointerDown_ (pointerEvent) {\n    this.updateActivePointers_(pointerEvent);\n    var newEvent = new MapBrowserPointerEvent(\n      MapBrowserEventType.POINTERDOWN, this.map_, pointerEvent);\n    this.dispatchEvent(newEvent);\n\n    this.down_ = pointerEvent;\n\n    if (this.dragListenerKeys_.length === 0) {\n      /* Set up a pointer event handler on the `document`,\n       * which is required when the pointer is moved outside\n       * the viewport when dragging.\n       */\n      this.documentPointerEventHandler_ =\n          new PointerEventHandler(document);\n\n      this.dragListenerKeys_.push(\n        listen(this.documentPointerEventHandler_,\n          MapBrowserEventType.POINTERMOVE,\n          this.handlePointerMove_, this),\n        listen(this.documentPointerEventHandler_,\n          MapBrowserEventType.POINTERUP,\n          this.handlePointerUp_, this),\n        /* Note that the listener for `pointercancel is set up on\n         * `pointerEventHandler_` and not `documentPointerEventHandler_` like\n         * the `pointerup` and `pointermove` listeners.\n         *\n         * The reason for this is the following: `TouchSource.vacuumTouches_()`\n         * issues `pointercancel` events, when there was no `touchend` for a\n         * `touchstart`. Now, let's say a first `touchstart` is registered on\n         * `pointerEventHandler_`. The `documentPointerEventHandler_` is set up.\n         * But `documentPointerEventHandler_` doesn't know about the first\n         * `touchstart`. If there is no `touchend` for the `touchstart`, we can\n         * only receive a `touchcancel` from `pointerEventHandler_`, because it is\n         * only registered there.\n         */\n        listen(this.pointerEventHandler_,\n          MapBrowserEventType.POINTERCANCEL,\n          this.handlePointerUp_, this)\n      );\n    }\n  };\n\n  /**\n   * @param {import(\"./pointer/PointerEvent.js\").default} pointerEvent Pointer\n   * event.\n   * @private\n   */\n  MapBrowserEventHandler.prototype.handlePointerMove_ = function handlePointerMove_ (pointerEvent) {\n    // Between pointerdown and pointerup, pointermove events are triggered.\n    // To avoid a 'false' touchmove event to be dispatched, we test if the pointer\n    // moved a significant distance.\n    if (this.isMoving_(pointerEvent)) {\n      this.dragging_ = true;\n      var newEvent = new MapBrowserPointerEvent(\n        MapBrowserEventType.POINTERDRAG, this.map_, pointerEvent,\n        this.dragging_);\n      this.dispatchEvent(newEvent);\n    }\n\n    // Some native android browser triggers mousemove events during small period\n    // of time. See: https://code.google.com/p/android/issues/detail?id=5491 or\n    // https://code.google.com/p/android/issues/detail?id=19827\n    // ex: Galaxy Tab P3110 + Android 4.1.1\n    pointerEvent.preventDefault();\n  };\n\n  /**\n   * Wrap and relay a pointer event.  Note that this requires that the type\n   * string for the MapBrowserPointerEvent matches the PointerEvent type.\n   * @param {import(\"./pointer/PointerEvent.js\").default} pointerEvent Pointer\n   * event.\n   * @private\n   */\n  MapBrowserEventHandler.prototype.relayEvent_ = function relayEvent_ (pointerEvent) {\n    var dragging = !!(this.down_ && this.isMoving_(pointerEvent));\n    this.dispatchEvent(new MapBrowserPointerEvent(\n      pointerEvent.type, this.map_, pointerEvent, dragging));\n  };\n\n  /**\n   * @param {import(\"./pointer/PointerEvent.js\").default} pointerEvent Pointer\n   * event.\n   * @return {boolean} Is moving.\n   * @private\n   */\n  MapBrowserEventHandler.prototype.isMoving_ = function isMoving_ (pointerEvent) {\n    return this.dragging_ ||\n        Math.abs(pointerEvent.clientX - this.down_.clientX) > this.moveTolerance_ ||\n        Math.abs(pointerEvent.clientY - this.down_.clientY) > this.moveTolerance_;\n  };\n\n  /**\n   * @inheritDoc\n   */\n  MapBrowserEventHandler.prototype.disposeInternal = function disposeInternal () {\n    if (this.relayedListenerKey_) {\n      unlistenByKey(this.relayedListenerKey_);\n      this.relayedListenerKey_ = null;\n    }\n    if (this.pointerdownListenerKey_) {\n      unlistenByKey(this.pointerdownListenerKey_);\n      this.pointerdownListenerKey_ = null;\n    }\n\n    this.dragListenerKeys_.forEach(unlistenByKey);\n    this.dragListenerKeys_.length = 0;\n\n    if (this.documentPointerEventHandler_) {\n      this.documentPointerEventHandler_.dispose();\n      this.documentPointerEventHandler_ = null;\n    }\n    if (this.pointerEventHandler_) {\n      this.pointerEventHandler_.dispose();\n      this.pointerEventHandler_ = null;\n    }\n    EventTarget.prototype.disposeInternal.call(this);\n  };\n\n  return MapBrowserEventHandler;\n}(EventTarget));\n\n\nexport default MapBrowserEventHandler;\n\n//# sourceMappingURL=MapBrowserEventHandler.js.map","/**\n * @module ol/MapProperty\n */\n\n/**\n * @enum {string}\n */\nexport default {\n  LAYERGROUP: 'layergroup',\n  SIZE: 'size',\n  TARGET: 'target',\n  VIEW: 'view'\n};\n\n//# sourceMappingURL=MapProperty.js.map","/**\n * @module ol/PluggableMap\n */\nimport {getUid} from './util.js';\nimport Collection from './Collection.js';\nimport CollectionEventType from './CollectionEventType.js';\nimport MapBrowserEvent from './MapBrowserEvent.js';\nimport MapBrowserEventHandler from './MapBrowserEventHandler.js';\nimport MapBrowserEventType from './MapBrowserEventType.js';\nimport MapEvent from './MapEvent.js';\nimport MapEventType from './MapEventType.js';\nimport MapProperty from './MapProperty.js';\nimport RenderEventType from './render/EventType.js';\nimport BaseObject, {getChangeEventType} from './Object.js';\nimport ObjectEventType from './ObjectEventType.js';\nimport TileQueue from './TileQueue.js';\nimport View from './View.js';\nimport ViewHint from './ViewHint.js';\nimport {assert} from './asserts.js';\nimport {removeNode} from './dom.js';\nimport {listen, unlistenByKey, unlisten} from './events.js';\nimport {stopPropagation} from './events/Event.js';\nimport EventType from './events/EventType.js';\nimport {createEmpty, clone, createOrUpdateEmpty, equals, getForViewAndSize, isEmpty} from './extent.js';\nimport {TRUE} from './functions.js';\nimport {DEVICE_PIXEL_RATIO, TOUCH} from './has.js';\nimport LayerGroup from './layer/Group.js';\nimport {hasArea} from './size.js';\nimport {DROP} from './structs/PriorityQueue.js';\nimport {create as createTransform, apply as applyTransform} from './transform.js';\n\n\n/**\n * State of the current frame. Only `pixelRatio`, `time` and `viewState` should\n * be used in applications.\n * @typedef {Object} FrameState\n * @property {number} pixelRatio The pixel ratio of the frame.\n * @property {number} time The time when rendering of the frame was requested.\n * @property {import(\"./View.js\").State} viewState The state of the current view.\n * @property {boolean} animate\n * @property {import(\"./transform.js\").Transform} coordinateToPixelTransform\n * @property {null|import(\"./extent.js\").Extent} extent\n * @property {import(\"./coordinate.js\").Coordinate} focus\n * @property {number} index\n * @property {Object<string, import(\"./layer/Layer.js\").State>} layerStates\n * @property {Array<import(\"./layer/Layer.js\").State>} layerStatesArray\n * @property {import(\"./transform.js\").Transform} pixelToCoordinateTransform\n * @property {Array<PostRenderFunction>} postRenderFunctions\n * @property {import(\"./size.js\").Size} size\n * @property {!Object<string, boolean>} skippedFeatureUids\n * @property {TileQueue} tileQueue\n * @property {Object<string, Object<string, import(\"./TileRange.js\").default>>} usedTiles\n * @property {Array<number>} viewHints\n * @property {!Object<string, Object<string, boolean>>} wantedTiles\n */\n\n\n/**\n * @typedef {function(PluggableMap, ?FrameState): boolean} PostRenderFunction\n */\n\n\n/**\n * @typedef {Object} AtPixelOptions\n * @property {undefined|function(import(\"./layer/Layer.js\").default): boolean} layerFilter Layer filter\n * function. The filter function will receive one argument, the\n * {@link module:ol/layer/Layer layer-candidate} and it should return a boolean value.\n * Only layers which are visible and for which this function returns `true`\n * will be tested for features. By default, all visible layers will be tested.\n * @property {number} [hitTolerance=0] Hit-detection tolerance in pixels. Pixels\n * inside the radius around the given position will be checked for features. This only\n * works for the canvas renderer and not for WebGL.\n */\n\n\n/**\n * @typedef {Object} MapOptionsInternal\n * @property {Collection<import(\"./control/Control.js\").default>} [controls]\n * @property {Collection<import(\"./interaction/Interaction.js\").default>} [interactions]\n * @property {HTMLElement|Document} keyboardEventTarget\n * @property {Collection<import(\"./Overlay.js\").default>} overlays\n * @property {Object<string, *>} values\n */\n\n\n/**\n * Object literal with config options for the map.\n * @typedef {Object} MapOptions\n * @property {Collection<import(\"./control/Control.js\").default>|Array<import(\"./control/Control.js\").default>} [controls]\n * Controls initially added to the map. If not specified,\n * {@link module:ol/control~defaults} is used.\n * @property {number} [pixelRatio=window.devicePixelRatio] The ratio between\n * physical pixels and device-independent pixels (dips) on the device.\n * @property {Collection<import(\"./interaction/Interaction.js\").default>|Array<import(\"./interaction/Interaction.js\").default>} [interactions]\n * Interactions that are initially added to the map. If not specified,\n * {@link module:ol/interaction~defaults} is used.\n * @property {HTMLElement|Document|string} [keyboardEventTarget] The element to\n * listen to keyboard events on. This determines when the `KeyboardPan` and\n * `KeyboardZoom` interactions trigger. For example, if this option is set to\n * `document` the keyboard interactions will always trigger. If this option is\n * not specified, the element the library listens to keyboard events on is the\n * map target (i.e. the user-provided div for the map). If this is not\n * `document`, the target element needs to be focused for key events to be\n * emitted, requiring that the target element has a `tabindex` attribute.\n * @property {Array<import(\"./layer/Base.js\").default>|Collection<import(\"./layer/Base.js\").default>|LayerGroup} [layers]\n * Layers. If this is not defined, a map with no layers will be rendered. Note\n * that layers are rendered in the order supplied, so if you want, for example,\n * a vector layer to appear on top of a tile layer, it must come after the tile\n * layer.\n * @property {number} [maxTilesLoading=16] Maximum number tiles to load\n * simultaneously.\n * @property {boolean} [loadTilesWhileAnimating=false] When set to `true`, tiles\n * will be loaded during animations. This may improve the user experience, but\n * can also make animations stutter on devices with slow memory.\n * @property {boolean} [loadTilesWhileInteracting=false] When set to `true`,\n * tiles will be loaded while interacting with the map. This may improve the\n * user experience, but can also make map panning and zooming choppy on devices\n * with slow memory.\n * @property {number} [moveTolerance=1] The minimum distance in pixels the\n * cursor must move to be detected as a map move event instead of a click.\n * Increasing this value can make it easier to click on the map.\n * @property {Collection<import(\"./Overlay.js\").default>|Array<import(\"./Overlay.js\").default>} [overlays]\n * Overlays initially added to the map. By default, no overlays are added.\n * @property {HTMLElement|string} [target] The container for the map, either the\n * element itself or the `id` of the element. If not specified at construction\n * time, {@link module:ol/Map~Map#setTarget} must be called for the map to be\n * rendered.\n * @property {View} [view] The map's view.  No layer sources will be\n * fetched unless this is specified at construction time or through\n * {@link module:ol/Map~Map#setView}.\n */\n\n\n/**\n * @fires import(\"./MapBrowserEvent.js\").MapBrowserEvent\n * @fires import(\"./MapEvent.js\").MapEvent\n * @fires module:ol/render/Event~RenderEvent#postcompose\n * @fires module:ol/render/Event~RenderEvent#precompose\n * @fires module:ol/render/Event~RenderEvent#rendercomplete\n * @api\n */\nvar PluggableMap = /*@__PURE__*/(function (BaseObject) {\n  function PluggableMap(options) {\n\n    BaseObject.call(this);\n\n    var optionsInternal = createOptionsInternal(options);\n\n    /**\n     * @type {number}\n     * @private\n     */\n    this.maxTilesLoading_ = options.maxTilesLoading !== undefined ? options.maxTilesLoading : 16;\n\n    /**\n     * @type {boolean}\n     * @private\n     */\n    this.loadTilesWhileAnimating_ =\n        options.loadTilesWhileAnimating !== undefined ?\n          options.loadTilesWhileAnimating : false;\n\n    /**\n     * @type {boolean}\n     * @private\n     */\n    this.loadTilesWhileInteracting_ =\n        options.loadTilesWhileInteracting !== undefined ?\n          options.loadTilesWhileInteracting : false;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.pixelRatio_ = options.pixelRatio !== undefined ?\n      options.pixelRatio : DEVICE_PIXEL_RATIO;\n\n    /**\n     * @private\n     * @type {number|undefined}\n     */\n    this.animationDelayKey_;\n\n    /**\n     * @private\n     */\n    this.animationDelay_ = function() {\n      this.animationDelayKey_ = undefined;\n      this.renderFrame_.call(this, Date.now());\n    }.bind(this);\n\n    /**\n     * @private\n     * @type {import(\"./transform.js\").Transform}\n     */\n    this.coordinateToPixelTransform_ = createTransform();\n\n    /**\n     * @private\n     * @type {import(\"./transform.js\").Transform}\n     */\n    this.pixelToCoordinateTransform_ = createTransform();\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.frameIndex_ = 0;\n\n    /**\n     * @private\n     * @type {?FrameState}\n     */\n    this.frameState_ = null;\n\n    /**\n     * The extent at the previous 'moveend' event.\n     * @private\n     * @type {import(\"./extent.js\").Extent}\n     */\n    this.previousExtent_ = null;\n\n    /**\n     * @private\n     * @type {?import(\"./events.js\").EventsKey}\n     */\n    this.viewPropertyListenerKey_ = null;\n\n    /**\n     * @private\n     * @type {?import(\"./events.js\").EventsKey}\n     */\n    this.viewChangeListenerKey_ = null;\n\n    /**\n     * @private\n     * @type {Array<import(\"./events.js\").EventsKey>}\n     */\n    this.layerGroupPropertyListenerKeys_ = null;\n\n    /**\n     * @private\n     * @type {!HTMLElement}\n     */\n    this.viewport_ = document.createElement('div');\n    this.viewport_.className = 'ol-viewport' + (TOUCH ? ' ol-touch' : '');\n    this.viewport_.style.position = 'relative';\n    this.viewport_.style.overflow = 'hidden';\n    this.viewport_.style.width = '100%';\n    this.viewport_.style.height = '100%';\n    // prevent page zoom on IE >= 10 browsers\n    this.viewport_.style.msTouchAction = 'none';\n    this.viewport_.style.touchAction = 'none';\n\n    /**\n     * @private\n     * @type {!HTMLElement}\n     */\n    this.overlayContainer_ = document.createElement('div');\n    this.overlayContainer_.className = 'ol-overlaycontainer';\n    this.viewport_.appendChild(this.overlayContainer_);\n\n    /**\n     * @private\n     * @type {!HTMLElement}\n     */\n    this.overlayContainerStopEvent_ = document.createElement('div');\n    this.overlayContainerStopEvent_.className = 'ol-overlaycontainer-stopevent';\n    var overlayEvents = [\n      EventType.CLICK,\n      EventType.DBLCLICK,\n      EventType.MOUSEDOWN,\n      EventType.TOUCHSTART,\n      EventType.MSPOINTERDOWN,\n      MapBrowserEventType.POINTERDOWN,\n      EventType.MOUSEWHEEL,\n      EventType.WHEEL\n    ];\n    for (var i = 0, ii = overlayEvents.length; i < ii; ++i) {\n      listen(this.overlayContainerStopEvent_, overlayEvents[i], stopPropagation);\n    }\n    this.viewport_.appendChild(this.overlayContainerStopEvent_);\n\n    /**\n     * @private\n     * @type {MapBrowserEventHandler}\n     */\n    this.mapBrowserEventHandler_ = new MapBrowserEventHandler(this, options.moveTolerance);\n    for (var key in MapBrowserEventType) {\n      listen(this.mapBrowserEventHandler_, MapBrowserEventType[key],\n        this.handleMapBrowserEvent, this);\n    }\n\n    /**\n     * @private\n     * @type {HTMLElement|Document}\n     */\n    this.keyboardEventTarget_ = optionsInternal.keyboardEventTarget;\n\n    /**\n     * @private\n     * @type {Array<import(\"./events.js\").EventsKey>}\n     */\n    this.keyHandlerKeys_ = null;\n\n    listen(this.viewport_, EventType.CONTEXTMENU, this.handleBrowserEvent, this);\n    listen(this.viewport_, EventType.WHEEL, this.handleBrowserEvent, this);\n    listen(this.viewport_, EventType.MOUSEWHEEL, this.handleBrowserEvent, this);\n\n    /**\n     * @type {Collection<import(\"./control/Control.js\").default>}\n     * @protected\n     */\n    this.controls = optionsInternal.controls || new Collection();\n\n    /**\n     * @type {Collection<import(\"./interaction/Interaction.js\").default>}\n     * @protected\n     */\n    this.interactions = optionsInternal.interactions || new Collection();\n\n    /**\n     * @type {Collection<import(\"./Overlay.js\").default>}\n     * @private\n     */\n    this.overlays_ = optionsInternal.overlays;\n\n    /**\n     * A lookup of overlays by id.\n     * @private\n     * @type {Object<string, import(\"./Overlay.js\").default>}\n     */\n    this.overlayIdIndex_ = {};\n\n    /**\n     * @type {import(\"./renderer/Map.js\").default}\n     * @private\n     */\n    this.renderer_ = this.createRenderer();\n\n    /**\n     * @type {function(Event)|undefined}\n     * @private\n     */\n    this.handleResize_;\n\n    /**\n     * @private\n     * @type {import(\"./coordinate.js\").Coordinate}\n     */\n    this.focus_ = null;\n\n    /**\n     * @private\n     * @type {!Array<PostRenderFunction>}\n     */\n    this.postRenderFunctions_ = [];\n\n    /**\n     * @private\n     * @type {TileQueue}\n     */\n    this.tileQueue_ = new TileQueue(\n      this.getTilePriority.bind(this),\n      this.handleTileChange_.bind(this));\n\n    /**\n     * Uids of features to skip at rendering time.\n     * @type {Object<string, boolean>}\n     * @private\n     */\n    this.skippedFeatureUids_ = {};\n\n    listen(\n      this, getChangeEventType(MapProperty.LAYERGROUP),\n      this.handleLayerGroupChanged_, this);\n    listen(this, getChangeEventType(MapProperty.VIEW),\n      this.handleViewChanged_, this);\n    listen(this, getChangeEventType(MapProperty.SIZE),\n      this.handleSizeChanged_, this);\n    listen(this, getChangeEventType(MapProperty.TARGET),\n      this.handleTargetChanged_, this);\n\n    // setProperties will trigger the rendering of the map if the map\n    // is \"defined\" already.\n    this.setProperties(optionsInternal.values);\n\n    this.controls.forEach(\n      /**\n       * @param {import(\"./control/Control.js\").default} control Control.\n       * @this {PluggableMap}\n       */\n      (function(control) {\n        control.setMap(this);\n      }).bind(this));\n\n    listen(this.controls, CollectionEventType.ADD,\n      /**\n       * @param {import(\"./Collection.js\").CollectionEvent} event CollectionEvent.\n       */\n      function(event) {\n        event.element.setMap(this);\n      }, this);\n\n    listen(this.controls, CollectionEventType.REMOVE,\n      /**\n       * @param {import(\"./Collection.js\").CollectionEvent} event CollectionEvent.\n       */\n      function(event) {\n        event.element.setMap(null);\n      }, this);\n\n    this.interactions.forEach(\n      /**\n       * @param {import(\"./interaction/Interaction.js\").default} interaction Interaction.\n       * @this {PluggableMap}\n       */\n      (function(interaction) {\n        interaction.setMap(this);\n      }).bind(this));\n\n    listen(this.interactions, CollectionEventType.ADD,\n      /**\n       * @param {import(\"./Collection.js\").CollectionEvent} event CollectionEvent.\n       */\n      function(event) {\n        event.element.setMap(this);\n      }, this);\n\n    listen(this.interactions, CollectionEventType.REMOVE,\n      /**\n       * @param {import(\"./Collection.js\").CollectionEvent} event CollectionEvent.\n       */\n      function(event) {\n        event.element.setMap(null);\n      }, this);\n\n    this.overlays_.forEach(this.addOverlayInternal_.bind(this));\n\n    listen(this.overlays_, CollectionEventType.ADD,\n      /**\n       * @param {import(\"./Collection.js\").CollectionEvent} event CollectionEvent.\n       */\n      function(event) {\n        this.addOverlayInternal_(/** @type {import(\"./Overlay.js\").default} */ (event.element));\n      }, this);\n\n    listen(this.overlays_, CollectionEventType.REMOVE,\n      /**\n       * @param {import(\"./Collection.js\").CollectionEvent} event CollectionEvent.\n       */\n      function(event) {\n        var overlay = /** @type {import(\"./Overlay.js\").default} */ (event.element);\n        var id = overlay.getId();\n        if (id !== undefined) {\n          delete this.overlayIdIndex_[id.toString()];\n        }\n        event.element.setMap(null);\n      }, this);\n\n  }\n\n  if ( BaseObject ) PluggableMap.__proto__ = BaseObject;\n  PluggableMap.prototype = Object.create( BaseObject && BaseObject.prototype );\n  PluggableMap.prototype.constructor = PluggableMap;\n\n  /**\n   * @abstract\n   * @return {import(\"./renderer/Map.js\").default} The map renderer\n   */\n  PluggableMap.prototype.createRenderer = function createRenderer () {\n    throw new Error('Use a map type that has a createRenderer method');\n  };\n\n  /**\n   * Add the given control to the map.\n   * @param {import(\"./control/Control.js\").default} control Control.\n   * @api\n   */\n  PluggableMap.prototype.addControl = function addControl (control) {\n    this.getControls().push(control);\n  };\n\n  /**\n   * Add the given interaction to the map.\n   * @param {import(\"./interaction/Interaction.js\").default} interaction Interaction to add.\n   * @api\n   */\n  PluggableMap.prototype.addInteraction = function addInteraction (interaction) {\n    this.getInteractions().push(interaction);\n  };\n\n  /**\n   * Adds the given layer to the top of this map. If you want to add a layer\n   * elsewhere in the stack, use `getLayers()` and the methods available on\n   * {@link module:ol/Collection~Collection}.\n   * @param {import(\"./layer/Base.js\").default} layer Layer.\n   * @api\n   */\n  PluggableMap.prototype.addLayer = function addLayer (layer) {\n    var layers = this.getLayerGroup().getLayers();\n    layers.push(layer);\n  };\n\n  /**\n   * Add the given overlay to the map.\n   * @param {import(\"./Overlay.js\").default} overlay Overlay.\n   * @api\n   */\n  PluggableMap.prototype.addOverlay = function addOverlay (overlay) {\n    this.getOverlays().push(overlay);\n  };\n\n  /**\n   * This deals with map's overlay collection changes.\n   * @param {import(\"./Overlay.js\").default} overlay Overlay.\n   * @private\n   */\n  PluggableMap.prototype.addOverlayInternal_ = function addOverlayInternal_ (overlay) {\n    var id = overlay.getId();\n    if (id !== undefined) {\n      this.overlayIdIndex_[id.toString()] = overlay;\n    }\n    overlay.setMap(this);\n  };\n\n  /**\n   *\n   * @inheritDoc\n   */\n  PluggableMap.prototype.disposeInternal = function disposeInternal () {\n    this.mapBrowserEventHandler_.dispose();\n    unlisten(this.viewport_, EventType.CONTEXTMENU, this.handleBrowserEvent, this);\n    unlisten(this.viewport_, EventType.WHEEL, this.handleBrowserEvent, this);\n    unlisten(this.viewport_, EventType.MOUSEWHEEL, this.handleBrowserEvent, this);\n    if (this.handleResize_ !== undefined) {\n      removeEventListener(EventType.RESIZE, this.handleResize_, false);\n      this.handleResize_ = undefined;\n    }\n    if (this.animationDelayKey_) {\n      cancelAnimationFrame(this.animationDelayKey_);\n      this.animationDelayKey_ = undefined;\n    }\n    this.setTarget(null);\n    BaseObject.prototype.disposeInternal.call(this);\n  };\n\n  /**\n   * Detect features that intersect a pixel on the viewport, and execute a\n   * callback with each intersecting feature. Layers included in the detection can\n   * be configured through the `layerFilter` option in `opt_options`.\n   * @param {import(\"./pixel.js\").Pixel} pixel Pixel.\n   * @param {function(this: S, import(\"./Feature.js\").FeatureLike,\n   *     import(\"./layer/Layer.js\").default): T} callback Feature callback. The callback will be\n   *     called with two arguments. The first argument is one\n   *     {@link module:ol/Feature feature} or\n   *     {@link module:ol/render/Feature render feature} at the pixel, the second is\n   *     the {@link module:ol/layer/Layer layer} of the feature and will be null for\n   *     unmanaged layers. To stop detection, callback functions can return a\n   *     truthy value.\n   * @param {AtPixelOptions=} opt_options Optional options.\n   * @return {T|undefined} Callback result, i.e. the return value of last\n   * callback execution, or the first truthy callback return value.\n   * @template S,T\n   * @api\n   */\n  PluggableMap.prototype.forEachFeatureAtPixel = function forEachFeatureAtPixel (pixel, callback, opt_options) {\n    if (!this.frameState_) {\n      return;\n    }\n    var coordinate = this.getCoordinateFromPixel(pixel);\n    opt_options = opt_options !== undefined ? opt_options :\n      /** @type {AtPixelOptions} */ ({});\n    var hitTolerance = opt_options.hitTolerance !== undefined ?\n      opt_options.hitTolerance * this.frameState_.pixelRatio : 0;\n    var layerFilter = opt_options.layerFilter !== undefined ?\n      opt_options.layerFilter : TRUE;\n    return this.renderer_.forEachFeatureAtCoordinate(\n      coordinate, this.frameState_, hitTolerance, callback, null,\n      layerFilter, null);\n  };\n\n  /**\n   * Get all features that intersect a pixel on the viewport.\n   * @param {import(\"./pixel.js\").Pixel} pixel Pixel.\n   * @param {AtPixelOptions=} opt_options Optional options.\n   * @return {Array<import(\"./Feature.js\").FeatureLike>} The detected features or\n   * `null` if none were found.\n   * @api\n   */\n  PluggableMap.prototype.getFeaturesAtPixel = function getFeaturesAtPixel (pixel, opt_options) {\n    var features = null;\n    this.forEachFeatureAtPixel(pixel, function(feature) {\n      if (!features) {\n        features = [];\n      }\n      features.push(feature);\n    }, opt_options);\n    return features;\n  };\n\n  /**\n   * Detect layers that have a color value at a pixel on the viewport, and\n   * execute a callback with each matching layer. Layers included in the\n   * detection can be configured through `opt_layerFilter`.\n   * @param {import(\"./pixel.js\").Pixel} pixel Pixel.\n   * @param {function(this: S, import(\"./layer/Layer.js\").default, (Uint8ClampedArray|Uint8Array)): T} callback\n   *     Layer callback. This callback will receive two arguments: first is the\n   *     {@link module:ol/layer/Layer layer}, second argument is an array representing\n   *     [R, G, B, A] pixel values (0 - 255) and will be `null` for layer types\n   *     that do not currently support this argument. To stop detection, callback\n   *     functions can return a truthy value.\n   * @param {AtPixelOptions=} opt_options Configuration options.\n   * @return {T|undefined} Callback result, i.e. the return value of last\n   * callback execution, or the first truthy callback return value.\n   * @template S,T\n   * @api\n   */\n  PluggableMap.prototype.forEachLayerAtPixel = function forEachLayerAtPixel (pixel, callback, opt_options) {\n    if (!this.frameState_) {\n      return;\n    }\n    var options = opt_options || /** @type {AtPixelOptions} */ ({});\n    var hitTolerance = options.hitTolerance !== undefined ?\n      opt_options.hitTolerance * this.frameState_.pixelRatio : 0;\n    var layerFilter = options.layerFilter || TRUE;\n    return this.renderer_.forEachLayerAtPixel(\n      pixel, this.frameState_, hitTolerance, callback, null, layerFilter, null);\n  };\n\n  /**\n   * Detect if features intersect a pixel on the viewport. Layers included in the\n   * detection can be configured through `opt_layerFilter`.\n   * @param {import(\"./pixel.js\").Pixel} pixel Pixel.\n   * @param {AtPixelOptions=} opt_options Optional options.\n   * @return {boolean} Is there a feature at the given pixel?\n   * @template U\n   * @api\n   */\n  PluggableMap.prototype.hasFeatureAtPixel = function hasFeatureAtPixel (pixel, opt_options) {\n    if (!this.frameState_) {\n      return false;\n    }\n    var coordinate = this.getCoordinateFromPixel(pixel);\n    opt_options = opt_options !== undefined ? opt_options :\n      /** @type {AtPixelOptions} */ ({});\n    var layerFilter = opt_options.layerFilter !== undefined ? opt_options.layerFilter : TRUE;\n    var hitTolerance = opt_options.hitTolerance !== undefined ?\n      opt_options.hitTolerance * this.frameState_.pixelRatio : 0;\n    return this.renderer_.hasFeatureAtCoordinate(\n      coordinate, this.frameState_, hitTolerance, layerFilter, null);\n  };\n\n  /**\n   * Returns the coordinate in view projection for a browser event.\n   * @param {Event} event Event.\n   * @return {import(\"./coordinate.js\").Coordinate} Coordinate.\n   * @api\n   */\n  PluggableMap.prototype.getEventCoordinate = function getEventCoordinate (event) {\n    return this.getCoordinateFromPixel(this.getEventPixel(event));\n  };\n\n  /**\n   * Returns the map pixel position for a browser event relative to the viewport.\n   * @param {Event|TouchEvent} event Event.\n   * @return {import(\"./pixel.js\").Pixel} Pixel.\n   * @api\n   */\n  PluggableMap.prototype.getEventPixel = function getEventPixel (event) {\n    var viewportPosition = this.viewport_.getBoundingClientRect();\n    var eventPosition = 'changedTouches' in event ?\n      /** @type {TouchEvent} */ (event).changedTouches[0] :\n      /** @type {MouseEvent} */ (event);\n\n    return [\n      eventPosition.clientX - viewportPosition.left,\n      eventPosition.clientY - viewportPosition.top\n    ];\n  };\n\n  /**\n   * Get the target in which this map is rendered.\n   * Note that this returns what is entered as an option or in setTarget:\n   * if that was an element, it returns an element; if a string, it returns that.\n   * @return {HTMLElement|string|undefined} The Element or id of the Element that the\n   *     map is rendered in.\n   * @observable\n   * @api\n   */\n  PluggableMap.prototype.getTarget = function getTarget () {\n    return /** @type {HTMLElement|string|undefined} */ (this.get(MapProperty.TARGET));\n  };\n\n  /**\n   * Get the DOM element into which this map is rendered. In contrast to\n   * `getTarget` this method always return an `Element`, or `null` if the\n   * map has no target.\n   * @return {HTMLElement} The element that the map is rendered in.\n   * @api\n   */\n  PluggableMap.prototype.getTargetElement = function getTargetElement () {\n    var target = this.getTarget();\n    if (target !== undefined) {\n      return typeof target === 'string' ? document.getElementById(target) : target;\n    } else {\n      return null;\n    }\n  };\n\n  /**\n   * Get the coordinate for a given pixel.  This returns a coordinate in the\n   * map view projection.\n   * @param {import(\"./pixel.js\").Pixel} pixel Pixel position in the map viewport.\n   * @return {import(\"./coordinate.js\").Coordinate} The coordinate for the pixel position.\n   * @api\n   */\n  PluggableMap.prototype.getCoordinateFromPixel = function getCoordinateFromPixel (pixel) {\n    var frameState = this.frameState_;\n    if (!frameState) {\n      return null;\n    } else {\n      return applyTransform(frameState.pixelToCoordinateTransform, pixel.slice());\n    }\n  };\n\n  /**\n   * Get the map controls. Modifying this collection changes the controls\n   * associated with the map.\n   * @return {Collection<import(\"./control/Control.js\").default>} Controls.\n   * @api\n   */\n  PluggableMap.prototype.getControls = function getControls () {\n    return this.controls;\n  };\n\n  /**\n   * Get the map overlays. Modifying this collection changes the overlays\n   * associated with the map.\n   * @return {Collection<import(\"./Overlay.js\").default>} Overlays.\n   * @api\n   */\n  PluggableMap.prototype.getOverlays = function getOverlays () {\n    return this.overlays_;\n  };\n\n  /**\n   * Get an overlay by its identifier (the value returned by overlay.getId()).\n   * Note that the index treats string and numeric identifiers as the same. So\n   * `map.getOverlayById(2)` will return an overlay with id `'2'` or `2`.\n   * @param {string|number} id Overlay identifier.\n   * @return {import(\"./Overlay.js\").default} Overlay.\n   * @api\n   */\n  PluggableMap.prototype.getOverlayById = function getOverlayById (id) {\n    var overlay = this.overlayIdIndex_[id.toString()];\n    return overlay !== undefined ? overlay : null;\n  };\n\n  /**\n   * Get the map interactions. Modifying this collection changes the interactions\n   * associated with the map.\n   *\n   * Interactions are used for e.g. pan, zoom and rotate.\n   * @return {Collection<import(\"./interaction/Interaction.js\").default>} Interactions.\n   * @api\n   */\n  PluggableMap.prototype.getInteractions = function getInteractions () {\n    return this.interactions;\n  };\n\n  /**\n   * Get the layergroup associated with this map.\n   * @return {LayerGroup} A layer group containing the layers in this map.\n   * @observable\n   * @api\n   */\n  PluggableMap.prototype.getLayerGroup = function getLayerGroup () {\n    return (\n      /** @type {LayerGroup} */ (this.get(MapProperty.LAYERGROUP))\n    );\n  };\n\n  /**\n   * Get the collection of layers associated with this map.\n   * @return {!Collection<import(\"./layer/Base.js\").default>} Layers.\n   * @api\n   */\n  PluggableMap.prototype.getLayers = function getLayers () {\n    var layers = this.getLayerGroup().getLayers();\n    return layers;\n  };\n\n  /**\n   * Get the pixel for a coordinate.  This takes a coordinate in the map view\n   * projection and returns the corresponding pixel.\n   * @param {import(\"./coordinate.js\").Coordinate} coordinate A map coordinate.\n   * @return {import(\"./pixel.js\").Pixel} A pixel position in the map viewport.\n   * @api\n   */\n  PluggableMap.prototype.getPixelFromCoordinate = function getPixelFromCoordinate (coordinate) {\n    var frameState = this.frameState_;\n    if (!frameState) {\n      return null;\n    } else {\n      return applyTransform(frameState.coordinateToPixelTransform, coordinate.slice(0, 2));\n    }\n  };\n\n  /**\n   * Get the map renderer.\n   * @return {import(\"./renderer/Map.js\").default} Renderer\n   */\n  PluggableMap.prototype.getRenderer = function getRenderer () {\n    return this.renderer_;\n  };\n\n  /**\n   * Get the size of this map.\n   * @return {import(\"./size.js\").Size|undefined} The size in pixels of the map in the DOM.\n   * @observable\n   * @api\n   */\n  PluggableMap.prototype.getSize = function getSize () {\n    return (\n      /** @type {import(\"./size.js\").Size|undefined} */ (this.get(MapProperty.SIZE))\n    );\n  };\n\n  /**\n   * Get the view associated with this map. A view manages properties such as\n   * center and resolution.\n   * @return {View} The view that controls this map.\n   * @observable\n   * @api\n   */\n  PluggableMap.prototype.getView = function getView () {\n    return (\n      /** @type {View} */ (this.get(MapProperty.VIEW))\n    );\n  };\n\n  /**\n   * Get the element that serves as the map viewport.\n   * @return {HTMLElement} Viewport.\n   * @api\n   */\n  PluggableMap.prototype.getViewport = function getViewport () {\n    return this.viewport_;\n  };\n\n  /**\n   * Get the element that serves as the container for overlays.  Elements added to\n   * this container will let mousedown and touchstart events through to the map,\n   * so clicks and gestures on an overlay will trigger {@link module:ol/MapBrowserEvent~MapBrowserEvent}\n   * events.\n   * @return {!HTMLElement} The map's overlay container.\n   */\n  PluggableMap.prototype.getOverlayContainer = function getOverlayContainer () {\n    return this.overlayContainer_;\n  };\n\n  /**\n   * Get the element that serves as a container for overlays that don't allow\n   * event propagation. Elements added to this container won't let mousedown and\n   * touchstart events through to the map, so clicks and gestures on an overlay\n   * don't trigger any {@link module:ol/MapBrowserEvent~MapBrowserEvent}.\n   * @return {!HTMLElement} The map's overlay container that stops events.\n   */\n  PluggableMap.prototype.getOverlayContainerStopEvent = function getOverlayContainerStopEvent () {\n    return this.overlayContainerStopEvent_;\n  };\n\n  /**\n   * @param {import(\"./Tile.js\").default} tile Tile.\n   * @param {string} tileSourceKey Tile source key.\n   * @param {import(\"./coordinate.js\").Coordinate} tileCenter Tile center.\n   * @param {number} tileResolution Tile resolution.\n   * @return {number} Tile priority.\n   */\n  PluggableMap.prototype.getTilePriority = function getTilePriority (tile, tileSourceKey, tileCenter, tileResolution) {\n    // Filter out tiles at higher zoom levels than the current zoom level, or that\n    // are outside the visible extent.\n    var frameState = this.frameState_;\n    if (!frameState || !(tileSourceKey in frameState.wantedTiles)) {\n      return DROP;\n    }\n    if (!frameState.wantedTiles[tileSourceKey][tile.getKey()]) {\n      return DROP;\n    }\n    // Prioritize the highest zoom level tiles closest to the focus.\n    // Tiles at higher zoom levels are prioritized using Math.log(tileResolution).\n    // Within a zoom level, tiles are prioritized by the distance in pixels\n    // between the center of the tile and the focus.  The factor of 65536 means\n    // that the prioritization should behave as desired for tiles up to\n    // 65536 * Math.log(2) = 45426 pixels from the focus.\n    var deltaX = tileCenter[0] - frameState.focus[0];\n    var deltaY = tileCenter[1] - frameState.focus[1];\n    return 65536 * Math.log(tileResolution) +\n        Math.sqrt(deltaX * deltaX + deltaY * deltaY) / tileResolution;\n  };\n\n  /**\n   * @param {Event} browserEvent Browser event.\n   * @param {string=} opt_type Type.\n   */\n  PluggableMap.prototype.handleBrowserEvent = function handleBrowserEvent (browserEvent, opt_type) {\n    var type = opt_type || browserEvent.type;\n    var mapBrowserEvent = new MapBrowserEvent(type, this, browserEvent);\n    this.handleMapBrowserEvent(mapBrowserEvent);\n  };\n\n  /**\n   * @param {MapBrowserEvent} mapBrowserEvent The event to handle.\n   */\n  PluggableMap.prototype.handleMapBrowserEvent = function handleMapBrowserEvent (mapBrowserEvent) {\n    if (!this.frameState_) {\n      // With no view defined, we cannot translate pixels into geographical\n      // coordinates so interactions cannot be used.\n      return;\n    }\n    this.focus_ = mapBrowserEvent.coordinate;\n    mapBrowserEvent.frameState = this.frameState_;\n    var interactionsArray = this.getInteractions().getArray();\n    if (this.dispatchEvent(mapBrowserEvent) !== false) {\n      for (var i = interactionsArray.length - 1; i >= 0; i--) {\n        var interaction = interactionsArray[i];\n        if (!interaction.getActive()) {\n          continue;\n        }\n        var cont = interaction.handleEvent(mapBrowserEvent);\n        if (!cont) {\n          break;\n        }\n      }\n    }\n  };\n\n  /**\n   * @protected\n   */\n  PluggableMap.prototype.handlePostRender = function handlePostRender () {\n\n    var frameState = this.frameState_;\n\n    // Manage the tile queue\n    // Image loads are expensive and a limited resource, so try to use them\n    // efficiently:\n    // * When the view is static we allow a large number of parallel tile loads\n    //   to complete the frame as quickly as possible.\n    // * When animating or interacting, image loads can cause janks, so we reduce\n    //   the maximum number of loads per frame and limit the number of parallel\n    //   tile loads to remain reactive to view changes and to reduce the chance of\n    //   loading tiles that will quickly disappear from view.\n    var tileQueue = this.tileQueue_;\n    if (!tileQueue.isEmpty()) {\n      var maxTotalLoading = this.maxTilesLoading_;\n      var maxNewLoads = maxTotalLoading;\n      if (frameState) {\n        var hints = frameState.viewHints;\n        if (hints[ViewHint.ANIMATING]) {\n          maxTotalLoading = this.loadTilesWhileAnimating_ ? 8 : 0;\n          maxNewLoads = 2;\n        }\n        if (hints[ViewHint.INTERACTING]) {\n          maxTotalLoading = this.loadTilesWhileInteracting_ ? 8 : 0;\n          maxNewLoads = 2;\n        }\n      }\n      if (tileQueue.getTilesLoading() < maxTotalLoading) {\n        tileQueue.reprioritize(); // FIXME only call if view has changed\n        tileQueue.loadMoreTiles(maxTotalLoading, maxNewLoads);\n      }\n    }\n    if (frameState && this.hasListener(RenderEventType.RENDERCOMPLETE) && !frameState.animate &&\n        !this.tileQueue_.getTilesLoading() && !getLoading(this.getLayers().getArray())) {\n      this.renderer_.dispatchRenderEvent(RenderEventType.RENDERCOMPLETE, frameState);\n    }\n\n    var postRenderFunctions = this.postRenderFunctions_;\n    for (var i = 0, ii = postRenderFunctions.length; i < ii; ++i) {\n      postRenderFunctions[i](this, frameState);\n    }\n    postRenderFunctions.length = 0;\n  };\n\n  /**\n   * @private\n   */\n  PluggableMap.prototype.handleSizeChanged_ = function handleSizeChanged_ () {\n    this.render();\n  };\n\n  /**\n   * @private\n   */\n  PluggableMap.prototype.handleTargetChanged_ = function handleTargetChanged_ () {\n    // target may be undefined, null, a string or an Element.\n    // If it's a string we convert it to an Element before proceeding.\n    // If it's not now an Element we remove the viewport from the DOM.\n    // If it's an Element we append the viewport element to it.\n\n    var targetElement;\n    if (this.getTarget()) {\n      targetElement = this.getTargetElement();\n    }\n\n    if (this.keyHandlerKeys_) {\n      for (var i = 0, ii = this.keyHandlerKeys_.length; i < ii; ++i) {\n        unlistenByKey(this.keyHandlerKeys_[i]);\n      }\n      this.keyHandlerKeys_ = null;\n    }\n\n    if (!targetElement) {\n      this.renderer_.removeLayerRenderers();\n      removeNode(this.viewport_);\n      if (this.handleResize_ !== undefined) {\n        removeEventListener(EventType.RESIZE, this.handleResize_, false);\n        this.handleResize_ = undefined;\n      }\n    } else {\n      targetElement.appendChild(this.viewport_);\n\n      var keyboardEventTarget = !this.keyboardEventTarget_ ?\n        targetElement : this.keyboardEventTarget_;\n      this.keyHandlerKeys_ = [\n        listen(keyboardEventTarget, EventType.KEYDOWN, this.handleBrowserEvent, this),\n        listen(keyboardEventTarget, EventType.KEYPRESS, this.handleBrowserEvent, this)\n      ];\n\n      if (!this.handleResize_) {\n        this.handleResize_ = this.updateSize.bind(this);\n        window.addEventListener(EventType.RESIZE, this.handleResize_, false);\n      }\n    }\n\n    this.updateSize();\n    // updateSize calls setSize, so no need to call this.render\n    // ourselves here.\n  };\n\n  /**\n   * @private\n   */\n  PluggableMap.prototype.handleTileChange_ = function handleTileChange_ () {\n    this.render();\n  };\n\n  /**\n   * @private\n   */\n  PluggableMap.prototype.handleViewPropertyChanged_ = function handleViewPropertyChanged_ () {\n    this.render();\n  };\n\n  /**\n   * @private\n   */\n  PluggableMap.prototype.handleViewChanged_ = function handleViewChanged_ () {\n    if (this.viewPropertyListenerKey_) {\n      unlistenByKey(this.viewPropertyListenerKey_);\n      this.viewPropertyListenerKey_ = null;\n    }\n    if (this.viewChangeListenerKey_) {\n      unlistenByKey(this.viewChangeListenerKey_);\n      this.viewChangeListenerKey_ = null;\n    }\n    var view = this.getView();\n    if (view) {\n      this.viewport_.setAttribute('data-view', getUid(view));\n      this.viewPropertyListenerKey_ = listen(\n        view, ObjectEventType.PROPERTYCHANGE,\n        this.handleViewPropertyChanged_, this);\n      this.viewChangeListenerKey_ = listen(\n        view, EventType.CHANGE,\n        this.handleViewPropertyChanged_, this);\n    }\n    this.render();\n  };\n\n  /**\n   * @private\n   */\n  PluggableMap.prototype.handleLayerGroupChanged_ = function handleLayerGroupChanged_ () {\n    if (this.layerGroupPropertyListenerKeys_) {\n      this.layerGroupPropertyListenerKeys_.forEach(unlistenByKey);\n      this.layerGroupPropertyListenerKeys_ = null;\n    }\n    var layerGroup = this.getLayerGroup();\n    if (layerGroup) {\n      this.layerGroupPropertyListenerKeys_ = [\n        listen(\n          layerGroup, ObjectEventType.PROPERTYCHANGE,\n          this.render, this),\n        listen(\n          layerGroup, EventType.CHANGE,\n          this.render, this)\n      ];\n    }\n    this.render();\n  };\n\n  /**\n   * @return {boolean} Is rendered.\n   */\n  PluggableMap.prototype.isRendered = function isRendered () {\n    return !!this.frameState_;\n  };\n\n  /**\n   * Requests an immediate render in a synchronous manner.\n   * @api\n   */\n  PluggableMap.prototype.renderSync = function renderSync () {\n    if (this.animationDelayKey_) {\n      cancelAnimationFrame(this.animationDelayKey_);\n    }\n    this.animationDelay_();\n  };\n\n  /**\n   * Request a map rendering (at the next animation frame).\n   * @api\n   */\n  PluggableMap.prototype.render = function render () {\n    if (this.animationDelayKey_ === undefined) {\n      this.animationDelayKey_ = requestAnimationFrame(this.animationDelay_);\n    }\n  };\n\n  /**\n   * Remove the given control from the map.\n   * @param {import(\"./control/Control.js\").default} control Control.\n   * @return {import(\"./control/Control.js\").default|undefined} The removed control (or undefined\n   *     if the control was not found).\n   * @api\n   */\n  PluggableMap.prototype.removeControl = function removeControl (control) {\n    return this.getControls().remove(control);\n  };\n\n  /**\n   * Remove the given interaction from the map.\n   * @param {import(\"./interaction/Interaction.js\").default} interaction Interaction to remove.\n   * @return {import(\"./interaction/Interaction.js\").default|undefined} The removed interaction (or\n   *     undefined if the interaction was not found).\n   * @api\n   */\n  PluggableMap.prototype.removeInteraction = function removeInteraction (interaction) {\n    return this.getInteractions().remove(interaction);\n  };\n\n  /**\n   * Removes the given layer from the map.\n   * @param {import(\"./layer/Base.js\").default} layer Layer.\n   * @return {import(\"./layer/Base.js\").default|undefined} The removed layer (or undefined if the\n   *     layer was not found).\n   * @api\n   */\n  PluggableMap.prototype.removeLayer = function removeLayer (layer) {\n    var layers = this.getLayerGroup().getLayers();\n    return layers.remove(layer);\n  };\n\n  /**\n   * Remove the given overlay from the map.\n   * @param {import(\"./Overlay.js\").default} overlay Overlay.\n   * @return {import(\"./Overlay.js\").default|undefined} The removed overlay (or undefined\n   *     if the overlay was not found).\n   * @api\n   */\n  PluggableMap.prototype.removeOverlay = function removeOverlay (overlay) {\n    return this.getOverlays().remove(overlay);\n  };\n\n  /**\n   * @param {number} time Time.\n   * @private\n   */\n  PluggableMap.prototype.renderFrame_ = function renderFrame_ (time) {\n    var viewState;\n\n    var size = this.getSize();\n    var view = this.getView();\n    var extent = createEmpty();\n    var previousFrameState = this.frameState_;\n    /** @type {?FrameState} */\n    var frameState = null;\n    if (size !== undefined && hasArea(size) && view && view.isDef()) {\n      var viewHints = view.getHints(this.frameState_ ? this.frameState_.viewHints : undefined);\n      var layerStatesArray = this.getLayerGroup().getLayerStatesArray();\n      var layerStates = {};\n      for (var i = 0, ii = layerStatesArray.length; i < ii; ++i) {\n        layerStates[getUid(layerStatesArray[i].layer)] = layerStatesArray[i];\n      }\n      viewState = view.getState(this.pixelRatio_);\n      frameState = /** @type {FrameState} */ ({\n        animate: false,\n        coordinateToPixelTransform: this.coordinateToPixelTransform_,\n        extent: extent,\n        focus: this.focus_ ? this.focus_ : viewState.center,\n        index: this.frameIndex_++,\n        layerStates: layerStates,\n        layerStatesArray: layerStatesArray,\n        pixelRatio: this.pixelRatio_,\n        pixelToCoordinateTransform: this.pixelToCoordinateTransform_,\n        postRenderFunctions: [],\n        size: size,\n        skippedFeatureUids: this.skippedFeatureUids_,\n        tileQueue: this.tileQueue_,\n        time: time,\n        usedTiles: {},\n        viewState: viewState,\n        viewHints: viewHints,\n        wantedTiles: {}\n      });\n    }\n\n    if (frameState) {\n      frameState.extent = getForViewAndSize(viewState.center,\n        viewState.resolution, viewState.rotation, frameState.size, extent);\n    }\n\n    this.frameState_ = frameState;\n    this.renderer_.renderFrame(frameState);\n\n    if (frameState) {\n      if (frameState.animate) {\n        this.render();\n      }\n      Array.prototype.push.apply(this.postRenderFunctions_, frameState.postRenderFunctions);\n\n      if (previousFrameState) {\n        var moveStart = !this.previousExtent_ ||\n                    (!isEmpty(this.previousExtent_) &&\n                    !equals(frameState.extent, this.previousExtent_));\n        if (moveStart) {\n          this.dispatchEvent(\n            new MapEvent(MapEventType.MOVESTART, this, previousFrameState));\n          this.previousExtent_ = createOrUpdateEmpty(this.previousExtent_);\n        }\n      }\n\n      var idle = this.previousExtent_ &&\n          !frameState.viewHints[ViewHint.ANIMATING] &&\n          !frameState.viewHints[ViewHint.INTERACTING] &&\n          !equals(frameState.extent, this.previousExtent_);\n\n      if (idle) {\n        this.dispatchEvent(new MapEvent(MapEventType.MOVEEND, this, frameState));\n        clone(frameState.extent, this.previousExtent_);\n      }\n    }\n\n    this.dispatchEvent(new MapEvent(MapEventType.POSTRENDER, this, frameState));\n\n    setTimeout(this.handlePostRender.bind(this), 0);\n\n  };\n\n  /**\n   * Sets the layergroup of this map.\n   * @param {LayerGroup} layerGroup A layer group containing the layers in this map.\n   * @observable\n   * @api\n   */\n  PluggableMap.prototype.setLayerGroup = function setLayerGroup (layerGroup) {\n    this.set(MapProperty.LAYERGROUP, layerGroup);\n  };\n\n  /**\n   * Set the size of this map.\n   * @param {import(\"./size.js\").Size|undefined} size The size in pixels of the map in the DOM.\n   * @observable\n   * @api\n   */\n  PluggableMap.prototype.setSize = function setSize (size) {\n    this.set(MapProperty.SIZE, size);\n  };\n\n  /**\n   * Set the target element to render this map into.\n   * @param {HTMLElement|string|undefined} target The Element or id of the Element\n   *     that the map is rendered in.\n   * @observable\n   * @api\n   */\n  PluggableMap.prototype.setTarget = function setTarget (target) {\n    this.set(MapProperty.TARGET, target);\n  };\n\n  /**\n   * Set the view for this map.\n   * @param {View} view The view that controls this map.\n   * @observable\n   * @api\n   */\n  PluggableMap.prototype.setView = function setView (view) {\n    this.set(MapProperty.VIEW, view);\n  };\n\n  /**\n   * @param {import(\"./Feature.js\").default} feature Feature.\n   */\n  PluggableMap.prototype.skipFeature = function skipFeature (feature) {\n    this.skippedFeatureUids_[getUid(feature)] = true;\n    this.render();\n  };\n\n  /**\n   * Force a recalculation of the map viewport size.  This should be called when\n   * third-party code changes the size of the map viewport.\n   * @api\n   */\n  PluggableMap.prototype.updateSize = function updateSize () {\n    var targetElement = this.getTargetElement();\n\n    if (!targetElement) {\n      this.setSize(undefined);\n    } else {\n      var computedStyle = getComputedStyle(targetElement);\n      this.setSize([\n        targetElement.offsetWidth -\n            parseFloat(computedStyle['borderLeftWidth']) -\n            parseFloat(computedStyle['paddingLeft']) -\n            parseFloat(computedStyle['paddingRight']) -\n            parseFloat(computedStyle['borderRightWidth']),\n        targetElement.offsetHeight -\n            parseFloat(computedStyle['borderTopWidth']) -\n            parseFloat(computedStyle['paddingTop']) -\n            parseFloat(computedStyle['paddingBottom']) -\n            parseFloat(computedStyle['borderBottomWidth'])\n      ]);\n    }\n  };\n\n  /**\n   * @param {import(\"./Feature.js\").default} feature Feature.\n   */\n  PluggableMap.prototype.unskipFeature = function unskipFeature (feature) {\n    delete this.skippedFeatureUids_[getUid(feature)];\n    this.render();\n  };\n\n  return PluggableMap;\n}(BaseObject));\n\n\n/**\n * @param {MapOptions} options Map options.\n * @return {MapOptionsInternal} Internal map options.\n */\nfunction createOptionsInternal(options) {\n\n  /**\n   * @type {HTMLElement|Document}\n   */\n  var keyboardEventTarget = null;\n  if (options.keyboardEventTarget !== undefined) {\n    keyboardEventTarget = typeof options.keyboardEventTarget === 'string' ?\n      document.getElementById(options.keyboardEventTarget) :\n      options.keyboardEventTarget;\n  }\n\n  /**\n   * @type {Object<string, *>}\n   */\n  var values = {};\n\n  var layerGroup = options.layers && typeof /** @type {?} */ (options.layers).getLayers === 'function' ?\n    /** @type {LayerGroup} */ (options.layers) : new LayerGroup({layers: /** @type {Collection} */ (options.layers)});\n  values[MapProperty.LAYERGROUP] = layerGroup;\n\n  values[MapProperty.TARGET] = options.target;\n\n  values[MapProperty.VIEW] = options.view !== undefined ?\n    options.view : new View();\n\n  var controls;\n  if (options.controls !== undefined) {\n    if (Array.isArray(options.controls)) {\n      controls = new Collection(options.controls.slice());\n    } else {\n      assert(typeof /** @type {?} */ (options.controls).getArray === 'function',\n        47); // Expected `controls` to be an array or an `import(\"./Collection.js\").Collection`\n      controls = /** @type {Collection} */ (options.controls);\n    }\n  }\n\n  var interactions;\n  if (options.interactions !== undefined) {\n    if (Array.isArray(options.interactions)) {\n      interactions = new Collection(options.interactions.slice());\n    } else {\n      assert(typeof /** @type {?} */ (options.interactions).getArray === 'function',\n        48); // Expected `interactions` to be an array or an `import(\"./Collection.js\").Collection`\n      interactions = /** @type {Collection} */ (options.interactions);\n    }\n  }\n\n  var overlays;\n  if (options.overlays !== undefined) {\n    if (Array.isArray(options.overlays)) {\n      overlays = new Collection(options.overlays.slice());\n    } else {\n      assert(typeof /** @type {?} */ (options.overlays).getArray === 'function',\n        49); // Expected `overlays` to be an array or an `import(\"./Collection.js\").Collection`\n      overlays = options.overlays;\n    }\n  } else {\n    overlays = new Collection();\n  }\n\n  return {\n    controls: controls,\n    interactions: interactions,\n    keyboardEventTarget: keyboardEventTarget,\n    overlays: overlays,\n    values: values\n  };\n\n}\nexport default PluggableMap;\n\n/**\n * @param  {Array<import(\"./layer/Base.js\").default>} layers Layers.\n * @return {boolean} Layers have sources that are still loading.\n */\nfunction getLoading(layers) {\n  for (var i = 0, ii = layers.length; i < ii; ++i) {\n    var layer = layers[i];\n    if (typeof /** @type {?} */ (layer).getLayers === 'function') {\n      return getLoading(/** @type {LayerGroup} */ (layer).getLayers().getArray());\n    } else {\n      var source = /** @type {import(\"./layer/Layer.js\").default} */ (\n        layer).getSource();\n      if (source && source.loading) {\n        return true;\n      }\n    }\n  }\n  return false;\n}\n\n//# sourceMappingURL=PluggableMap.js.map","/**\n * @module ol/Map\n */\nimport PluggableMap from './PluggableMap.js';\nimport {defaults as defaultControls} from './control/util.js';\nimport {defaults as defaultInteractions} from './interaction.js';\nimport {assign} from './obj.js';\nimport CanvasImageLayerRenderer from './renderer/canvas/ImageLayer.js';\nimport CanvasMapRenderer from './renderer/canvas/Map.js';\nimport CanvasTileLayerRenderer from './renderer/canvas/TileLayer.js';\nimport CanvasVectorLayerRenderer from './renderer/canvas/VectorLayer.js';\nimport CanvasVectorTileLayerRenderer from './renderer/canvas/VectorTileLayer.js';\n\n/**\n * @classdesc\n * The map is the core component of OpenLayers. For a map to render, a view,\n * one or more layers, and a target container are needed:\n *\n *     import Map from 'ol/Map';\n *     import View from 'ol/View';\n *     import TileLayer from 'ol/layer/Tile';\n *     import OSM from 'ol/source/OSM';\n *\n *     var map = new Map({\n *       view: new View({\n *         center: [0, 0],\n *         zoom: 1\n *       }),\n *       layers: [\n *         new TileLayer({\n *           source: new OSM()\n *         })\n *       ],\n *       target: 'map'\n *     });\n *\n * The above snippet creates a map using a {@link module:ol/layer/Tile} to\n * display {@link module:ol/source/OSM~OSM} OSM data and render it to a DOM\n * element with the id `map`.\n *\n * The constructor places a viewport container (with CSS class name\n * `ol-viewport`) in the target element (see `getViewport()`), and then two\n * further elements within the viewport: one with CSS class name\n * `ol-overlaycontainer-stopevent` for controls and some overlays, and one with\n * CSS class name `ol-overlaycontainer` for other overlays (see the `stopEvent`\n * option of {@link module:ol/Overlay~Overlay} for the difference). The map\n * itself is placed in a further element within the viewport.\n *\n * Layers are stored as a {@link module:ol/Collection~Collection} in\n * layerGroups. A top-level group is provided by the library. This is what is\n * accessed by `getLayerGroup` and `setLayerGroup`. Layers entered in the\n * options are added to this group, and `addLayer` and `removeLayer` change the\n * layer collection in the group. `getLayers` is a convenience function for\n * `getLayerGroup().getLayers()`. Note that {@link module:ol/layer/Group~Group}\n * is a subclass of {@link module:ol/layer/Base}, so layers entered in the\n * options or added with `addLayer` can be groups, which can contain further\n * groups, and so on.\n *\n * @fires import(\"./MapBrowserEvent.js\").MapBrowserEvent\n * @fires import(\"./MapEvent.js\").MapEvent\n * @fires module:ol/render/Event~RenderEvent#postcompose\n * @fires module:ol/render/Event~RenderEvent#precompose\n * @api\n */\nvar Map = /*@__PURE__*/(function (PluggableMap) {\n  function Map(options) {\n    options = assign({}, options);\n    if (!options.controls) {\n      options.controls = defaultControls();\n    }\n    if (!options.interactions) {\n      options.interactions = defaultInteractions();\n    }\n\n    PluggableMap.call(this, options);\n  }\n\n  if ( PluggableMap ) Map.__proto__ = PluggableMap;\n  Map.prototype = Object.create( PluggableMap && PluggableMap.prototype );\n  Map.prototype.constructor = Map;\n\n  Map.prototype.createRenderer = function createRenderer () {\n    var renderer = new CanvasMapRenderer(this);\n    renderer.registerLayerRenderers([\n      CanvasImageLayerRenderer,\n      CanvasTileLayerRenderer,\n      CanvasVectorLayerRenderer,\n      CanvasVectorTileLayerRenderer\n    ]);\n    return renderer;\n  };\n\n  return Map;\n}(PluggableMap));\n\n\nexport default Map;\n\n//# sourceMappingURL=Map.js.map","/** Vanilla JS helper to manipulate DOM without jQuery\r\n * @see https://github.com/nefe/You-Dont-Need-jQuery\r\n * @see https://plainjs.com/javascript/\r\n * @see http://youmightnotneedjquery.com/\r\n */\r\n var ol_ext_element = {};\r\n\r\n/**\r\n * Create an element\r\n * @param {string} tagName The element tag, use 'TEXT' to create a text node\r\n * @param {*} options\r\n *  @param {string} options.className className The element class name \r\n *  @param {Element} options.parent Parent to append the element as child\r\n *  @param {Element|string} options.html Content of the element\r\n *  @param {string} options.* Any other attribut to add to the element\r\n */\r\nol_ext_element.create = function (tagName, options) {\r\n  options = options || {};\r\n  var elt;\r\n  // Create text node\r\n  if (tagName === 'TEXT') {\r\n    elt = document.createTextNode(options.html||'');\r\n    if (options.parent) options.parent.appendChild(elt);\r\n  } else {\r\n    // Other element\r\n    elt = document.createElement(tagName);\r\n    if (/button/i.test(tagName)) elt.setAttribute('type', 'button');\r\n    for (var attr in options) {\r\n      switch (attr) {\r\n        case 'className': {\r\n          if (options.className && options.className.trim) elt.setAttribute('class', options.className.trim());\r\n          break;\r\n        }\r\n        case 'html': {\r\n          if (options.html instanceof Element) elt.appendChild(options.html)\r\n          else if (options.html!==undefined) elt.innerHTML = options.html;\r\n          break;\r\n        }\r\n        case 'parent': {\r\n          if (options.parent) options.parent.appendChild(elt);\r\n          break;\r\n        }\r\n        case 'style': {\r\n          this.setStyle(elt, options.style);\r\n          break;\r\n        }\r\n        case 'change':\r\n        case 'click': {\r\n          ol_ext_element.addListener(elt, attr, options[attr]);\r\n          break;\r\n        }\r\n        case 'on': {\r\n          for (var e in options.on) {\r\n            ol_ext_element.addListener(elt, e, options.on[e]);\r\n          }\r\n          break;\r\n        }\r\n        case 'checked': {\r\n          elt.checked = !!options.checked;\r\n          break;\r\n        }\r\n        default: {\r\n          elt.setAttribute(attr, options[attr]);\r\n          break;\r\n        }\r\n      }\r\n    }\r\n  }\r\n  return elt;\r\n};\r\n\r\n/** Create a toggle switch input\r\n * @param {*} options\r\n *  @param {string|Element} options.html\r\n *  @param {string|Element} options.after\r\n *  @param {boolean} options.checked\r\n *  @param {*} [options.on] a list of actions\r\n *  @param {function} [options.click]\r\n *  @param {function} [options.change]\r\n *  @param {Element} options.parent\r\n */\r\nol_ext_element.createSwitch = function (options) {\r\n  var label = ol_ext_element.create('LABEL',{ \r\n    html: options.html,\r\n    className: 'ol-ext-toggle-switch',\r\n    parent: options.parent\r\n  });\r\n  var input = ol_ext_element.create('INPUT', {\r\n    type: 'checkbox',\r\n    checked: options.checked,\r\n    click: options.click,\r\n    change: options.change,\r\n    on: options.on,\r\n    parent: label\r\n  });\r\n  ol_ext_element.create('SPAN', { parent: label });\r\n  if (options.after) {\r\n    label.appendChild(document.createTextNode(options.after));\r\n  }\r\n  return input;\r\n};\r\n\r\n/** Create a toggle switch input\r\n * @param {*} options\r\n *  @param {string|Element} options.html\r\n *  @param {string|Element} options.after\r\n *  @param {string} [options.name] input name\r\n *  @param {string} [options.type=checkbox] input type: radio or checkbox\r\n *  @param {string} options.value input value\r\n *  @param {*} [options.on] a list of actions\r\n *  @param {function} [options.click]\r\n *  @param {function} [options.change]\r\n *  @param {Element} options.parent\r\n */\r\nol_ext_element.createCheck = function (options) {\r\n  var label = ol_ext_element.create('LABEL', {\r\n    className: 'ol-ext-check ' + (options.type==='radio' ? 'ol-ext-radio' : 'ol-ext-checkbox'),\r\n    html: options.html,\r\n    parent: options.parent\r\n  });\r\n  var input = ol_ext_element.create('INPUT', {\r\n    name: options.name,\r\n    type: (options.type==='radio' ? 'radio' : 'checkbox'),\r\n    value: options.val,\r\n    change: options.change,\r\n    click: options.click,\r\n    on: options.on,\r\n    parent: label\r\n  });\r\n  ol_ext_element.create('SPAN', {\r\n    parent: label\r\n  });\r\n  if (options.after) {\r\n    label.appendChild(document.createTextNode(options.after));\r\n  }\r\n  return input;\r\n};\r\n\r\n\r\n/** Set inner html or append a child element to an element\r\n * @param {Element} element\r\n * @param {Element|string} html Content of the element\r\n */\r\nol_ext_element.setHTML = function(element, html) {\r\n  if (html instanceof Element) element.appendChild(html)\r\n  else if (html!==undefined) element.innerHTML = html;\r\n};\r\n\r\n/** Append text into an elemnt\r\n * @param {Element} element\r\n * @param {string} text text content\r\n */\r\nol_ext_element.appendText = function(element, text) {\r\n  element.appendChild(document.createTextNode(text||''));\r\n};\r\n\r\n/**\r\n * Add a set of event listener to an element\r\n * @param {Element} element\r\n * @param {string|Array<string>} eventType\r\n * @param {function} fn\r\n */\r\nol_ext_element.addListener = function (element, eventType, fn, useCapture ) {\r\n  if (typeof eventType === 'string') eventType = eventType.split(' ');\r\n  eventType.forEach(function(e) {\r\n    element.addEventListener(e, fn, useCapture);\r\n  });\r\n};\r\n\r\n/**\r\n * Add a set of event listener to an element\r\n * @param {Element} element\r\n * @param {string|Array<string>} eventType\r\n * @param {function} fn\r\n */\r\nol_ext_element.removeListener = function (element, eventType, fn) {\r\n  if (typeof eventType === 'string') eventType = eventType.split(' ');\r\n  eventType.forEach(function(e) {\r\n    element.removeEventListener(e, fn);\r\n  });\r\n};\r\n\r\n/**\r\n * Show an element\r\n * @param {Element} element\r\n */\r\nol_ext_element.show = function (element) {\r\n  element.style.display = '';\r\n};\r\n\r\n/**\r\n * Hide an element\r\n * @param {Element} element\r\n */\r\nol_ext_element.hide = function (element) {\r\n  element.style.display = 'none';\r\n};\r\n\r\n/**\r\n * Test if an element is hihdden\r\n * @param {Element} element\r\n * @return {boolean}\r\n */\r\nol_ext_element.hidden = function (element) {\r\n  return ol_ext_element.getStyle(element, 'display') === 'none';\r\n};\r\n\r\n/**\r\n * Toggle an element\r\n * @param {Element} element\r\n */\r\nol_ext_element.toggle = function (element) {\r\n  element.style.display = (element.style.display==='none' ? '' : 'none');\r\n};\r\n\r\n/** Set style of an element\r\n * @param {DOMElement} el the element\r\n * @param {*} st list of style\r\n */\r\nol_ext_element.setStyle = function(el, st) {\r\n  for (var s in st) {\r\n    switch (s) {\r\n      case 'top':\r\n      case 'left':\r\n      case 'bottom':\r\n      case 'right':\r\n      case 'minWidth':\r\n      case 'maxWidth':\r\n      case 'width':\r\n      case 'height': {\r\n        if (typeof(st[s]) === 'number') {\r\n          el.style[s] = st[s]+'px';\r\n        } else {\r\n          el.style[s] = st[s];\r\n        }\r\n        break;\r\n      }\r\n      default: {\r\n        el.style[s] = st[s];\r\n      }\r\n    }\r\n  }\r\n};\r\n\r\n/**\r\n * Get style propertie of an element\r\n * @param {DOMElement} el the element\r\n * @param {string} styleProp Propertie name\r\n * @return {*} style value\r\n */\r\nol_ext_element.getStyle = function(el, styleProp) {\r\n  var value, defaultView = (el.ownerDocument || document).defaultView;\r\n  // W3C standard way:\r\n  if (defaultView && defaultView.getComputedStyle) {\r\n    // sanitize property name to css notation\r\n    // (hypen separated words eg. font-Size)\r\n    styleProp = styleProp.replace(/([A-Z])/g, \"-$1\").toLowerCase();\r\n    value = defaultView.getComputedStyle(el, null).getPropertyValue(styleProp);\r\n  } else if (el.currentStyle) { // IE\r\n    // sanitize property name to camelCase\r\n    styleProp = styleProp.replace(/-(\\w)/g, function(str, letter) {\r\n      return letter.toUpperCase();\r\n    });\r\n    value = el.currentStyle[styleProp];\r\n    // convert other units to pixels on IE\r\n    if (/^\\d+(em|pt|%|ex)?$/i.test(value)) { \r\n      return (function(value) {\r\n        var oldLeft = el.style.left, oldRsLeft = el.runtimeStyle.left;\r\n        el.runtimeStyle.left = el.currentStyle.left;\r\n        el.style.left = value || 0;\r\n        value = el.style.pixelLeft + \"px\";\r\n        el.style.left = oldLeft;\r\n        el.runtimeStyle.left = oldRsLeft;\r\n        return value;\r\n      })(value);\r\n    }\r\n  }\r\n  if (/px$/.test(value)) return parseInt(value);\r\n  return value;\r\n};\r\n\r\n/** Get outerHeight of an elemen\r\n * @param {DOMElement} elt\r\n * @return {number}\r\n */\r\nol_ext_element.outerHeight = function(elt) {\r\n  return elt.offsetHeight + ol_ext_element.getStyle(elt, 'marginBottom')\r\n};\r\n\r\n/** Get outerWidth of an elemen\r\n * @param {DOMElement} elt\r\n * @return {number}\r\n */\r\nol_ext_element.outerWidth = function(elt) {\r\n  return elt.offsetWidth + ol_ext_element.getStyle(elt, 'marginLeft')\r\n};\r\n\r\n/** Get element offset rect\r\n * @param {DOMElement} elt\r\n * @return {*} \r\n */\r\nol_ext_element.offsetRect = function(elt) {\r\n  var rect = elt.getBoundingClientRect();\r\n  return {\r\n    top: rect.top + (window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop || 0),\r\n    left: rect.left + (window.pageXOffset || document.documentElement.scrollLeft || document.body.scrollLeft || 0),\r\n    height: rect.height || (rect.bottom - rect.top),\r\n    width: rect.width || (rect.right - rect.left)\r\n  }\r\n};\r\n\r\n/** Make a div scrollable without scrollbar.\r\n * On touch devices the default behavior is preserved\r\n * @param {DOMElement} elt\r\n * @param {*} options\r\n *  @param {function} options.onmove a function that takes a boolean indicating that the div is scrolling\r\n *  @param {boolean} [options.vertical=false] \r\n *  @param {boolean} [options.animate=true] add kinetic to scroll\r\n */\r\nol_ext_element.scrollDiv = function(elt, options) {\r\n  var pos = false;\r\n  var speed = 0;\r\n  var d, dt = 0;\r\n\r\n  var onmove = (typeof(options.onmove) === 'function' ? options.onmove : function(){});\r\n  var page = options.vertical ? 'pageY' : 'pageX';\r\n  var scroll = options.vertical ? 'scrollTop' : 'scrollLeft';\r\n  var moving = false;\r\n\r\n  // Prevent image dragging\r\n  elt.querySelectorAll('img').forEach(function(i) {\r\n    i.ondragstart = function(){ return false; };\r\n  });\r\n  elt.style['touch-action'] = 'none';\r\n  \r\n  // Start scrolling\r\n  ol_ext_element.addListener(elt, ['pointerdown'], function(e) {\r\n    moving = false;\r\n    pos = e[page];\r\n    dt = new Date();\r\n    elt.classList.add('ol-move');\r\n  });\r\n  \r\n  // Register scroll\r\n  ol_ext_element.addListener(window, ['pointermove'], function(e) {\r\n    moving = true;\r\n    if (pos !== false) {\r\n      var delta = pos - e[page];\r\n      elt[scroll] += delta;\r\n      d = new Date();\r\n      if (d-dt) {\r\n        speed = (speed + delta / (d - dt))/2;\r\n      }\r\n      pos = e[page];\r\n      dt = d;\r\n      // Tell we are moving\r\n      if (delta) onmove(true);\r\n    }\r\n  });\r\n  \r\n  // Animate scroll\r\n  var animate = function(to) {\r\n    var step = (to>0) ? Math.min(100, to/2) : Math.max(-100, to/2);\r\n    to -= step;\r\n    elt[scroll] += step;\r\n    if (-1 < to && to < 1) {\r\n      if (moving) setTimeout(function() { elt.classList.remove('ol-move'); });\r\n      else elt.classList.remove('ol-move');\r\n      moving = false;\r\n      onmove(false);\r\n    } else {\r\n      setTimeout(function() {\r\n        animate(to);\r\n      }, 40);\r\n    }\r\n  }\r\n\r\n  // Stop scrolling\r\n  ol_ext_element.addListener(window, ['pointerup','pointercancel'], function(e) {\r\n    dt = new Date() - dt;\r\n    if (dt>100) {\r\n      // User stop: no speed\r\n      speed = 0;\r\n    } else if (dt>0) {\r\n      // Calculate new speed\r\n      speed = ((speed||0) + (pos - e[page]) / dt) / 2;\r\n    }\r\n    animate(options.animate===false ? 0 : speed*200);\r\n    pos = false;\r\n    speed = 0;\r\n    dt = 0;\r\n  });\r\n\r\n  // Handle mousewheel\r\n  if (options.mousewheel) { // && !elt.classList.contains('ol-touch')) {\r\n    ol_ext_element.addListener(elt, \r\n      ['mousewheel', 'DOMMouseScroll', 'onmousewheel'], \r\n      function(e) {\r\n        var delta = Math.max(-1, Math.min(1, (e.wheelDelta || -e.detail)));\r\n        elt.classList.add('ol-move');\r\n        elt[scroll] -= delta*30;\r\n        elt.classList.remove('ol-move');\r\n        return false;\r\n      }\r\n    );\r\n  }\r\n};\r\n\r\n/** Dispatch an event to an Element \r\n * @param {string} eventName\r\n * @param {Element} element\r\n*/\r\nol_ext_element.dispatchEvent = function (eventName, element) {\r\n  var event;\r\n  try {\r\n    event = new CustomEvent(eventName);\r\n  } catch(e) {\r\n    // Try customevent on IE\r\n    event = document.createEvent(\"CustomEvent\");\r\n    event.initCustomEvent(eventName, true, true, {});\r\n  }\r\n  element.dispatchEvent(event);\r\n};\r\n\r\nexport default ol_ext_element\r\n","/**\n * @module ol/MapEvent\n */\nimport Event from './events/Event.js';\n\n/**\n * @classdesc\n * Events emitted as map events are instances of this type.\n * See {@link module:ol/PluggableMap~PluggableMap} for which events trigger a map event.\n */\nvar MapEvent = /*@__PURE__*/(function (Event) {\n  function MapEvent(type, map, opt_frameState) {\n\n    Event.call(this, type);\n\n    /**\n     * The map where the event occurred.\n     * @type {import(\"./PluggableMap.js\").default}\n     * @api\n     */\n    this.map = map;\n\n    /**\n     * The frame state at the time of the event.\n     * @type {?import(\"./PluggableMap.js\").FrameState}\n     * @api\n     */\n    this.frameState = opt_frameState !== undefined ? opt_frameState : null;\n\n  }\n\n  if ( Event ) MapEvent.__proto__ = Event;\n  MapEvent.prototype = Object.create( Event && Event.prototype );\n  MapEvent.prototype.constructor = MapEvent;\n\n  return MapEvent;\n}(Event));\n\nexport default MapEvent;\n\n//# sourceMappingURL=MapEvent.js.map","/**\n * @module ol/ObjectEventType\n */\n\n/**\n * @enum {string}\n */\nexport default {\n  /**\n   * Triggered when a property is changed.\n   * @event module:ol/Object.ObjectEvent#propertychange\n   * @api\n   */\n  PROPERTYCHANGE: 'propertychange'\n};\n\n//# sourceMappingURL=ObjectEventType.js.map","/**\n * @module ol/ImageTile\n */\nimport Tile from './Tile.js';\nimport TileState from './TileState.js';\nimport {createCanvasContext2D} from './dom.js';\nimport {listenOnce, unlistenByKey} from './events.js';\nimport EventType from './events/EventType.js';\n\n\nvar ImageTile = /*@__PURE__*/(function (Tile) {\n  function ImageTile(tileCoord, state, src, crossOrigin, tileLoadFunction, opt_options) {\n\n    Tile.call(this, tileCoord, state, opt_options);\n\n    /**\n     * @private\n     * @type {?string}\n     */\n    this.crossOrigin_ = crossOrigin;\n\n    /**\n     * Image URI\n     *\n     * @private\n     * @type {string}\n     */\n    this.src_ = src;\n\n    /**\n     * @private\n     * @type {HTMLImageElement|HTMLCanvasElement}\n     */\n    this.image_ = new Image();\n    if (crossOrigin !== null) {\n      this.image_.crossOrigin = crossOrigin;\n    }\n\n    /**\n     * @private\n     * @type {Array<import(\"./events.js\").EventsKey>}\n     */\n    this.imageListenerKeys_ = null;\n\n    /**\n     * @private\n     * @type {import(\"./Tile.js\").LoadFunction}\n     */\n    this.tileLoadFunction_ = tileLoadFunction;\n\n  }\n\n  if ( Tile ) ImageTile.__proto__ = Tile;\n  ImageTile.prototype = Object.create( Tile && Tile.prototype );\n  ImageTile.prototype.constructor = ImageTile;\n\n  /**\n   * @inheritDoc\n   */\n  ImageTile.prototype.disposeInternal = function disposeInternal () {\n    if (this.state == TileState.LOADING) {\n      this.unlistenImage_();\n      this.image_ = getBlankImage();\n    }\n    if (this.interimTile) {\n      this.interimTile.dispose();\n    }\n    this.state = TileState.ABORT;\n    this.changed();\n    Tile.prototype.disposeInternal.call(this);\n  };\n\n  /**\n   * Get the HTML image element for this tile (may be a Canvas, Image, or Video).\n   * @return {HTMLCanvasElement|HTMLImageElement|HTMLVideoElement} Image.\n   * @api\n   */\n  ImageTile.prototype.getImage = function getImage () {\n    return this.image_;\n  };\n\n  /**\n   * @inheritDoc\n   */\n  ImageTile.prototype.getKey = function getKey () {\n    return this.src_;\n  };\n\n  /**\n   * Tracks loading or read errors.\n   *\n   * @private\n   */\n  ImageTile.prototype.handleImageError_ = function handleImageError_ () {\n    this.state = TileState.ERROR;\n    this.unlistenImage_();\n    this.image_ = getBlankImage();\n    this.changed();\n  };\n\n  /**\n   * Tracks successful image load.\n   *\n   * @private\n   */\n  ImageTile.prototype.handleImageLoad_ = function handleImageLoad_ () {\n    var image = /** @type {HTMLImageElement} */ (this.image_);\n    if (image.naturalWidth && image.naturalHeight) {\n      this.state = TileState.LOADED;\n    } else {\n      this.state = TileState.EMPTY;\n    }\n    this.unlistenImage_();\n    this.changed();\n  };\n\n  /**\n   * @inheritDoc\n   * @api\n   */\n  ImageTile.prototype.load = function load () {\n    if (this.state == TileState.ERROR) {\n      this.state = TileState.IDLE;\n      this.image_ = new Image();\n      if (this.crossOrigin_ !== null) {\n        this.image_.crossOrigin = this.crossOrigin_;\n      }\n    }\n    if (this.state == TileState.IDLE) {\n      this.state = TileState.LOADING;\n      this.changed();\n      this.imageListenerKeys_ = [\n        listenOnce(this.image_, EventType.ERROR,\n          this.handleImageError_, this),\n        listenOnce(this.image_, EventType.LOAD,\n          this.handleImageLoad_, this)\n      ];\n      this.tileLoadFunction_(this, this.src_);\n    }\n  };\n\n  /**\n   * Discards event handlers which listen for load completion or errors.\n   *\n   * @private\n   */\n  ImageTile.prototype.unlistenImage_ = function unlistenImage_ () {\n    this.imageListenerKeys_.forEach(unlistenByKey);\n    this.imageListenerKeys_ = null;\n  };\n\n  return ImageTile;\n}(Tile));\n\n\n/**\n * Get a 1-pixel blank image.\n * @return {HTMLCanvasElement} Blank image.\n */\nfunction getBlankImage() {\n  var ctx = createCanvasContext2D(1, 1);\n  ctx.fillStyle = 'rgba(0,0,0,0)';\n  ctx.fillRect(0, 0, 1, 1);\n  return ctx.canvas;\n}\n\nexport default ImageTile;\n\n//# sourceMappingURL=ImageTile.js.map","/**\n * @module ol/AssertionError\n */\nimport {VERSION} from './util.js';\n\n/**\n * Error object thrown when an assertion failed. This is an ECMA-262 Error,\n * extended with a `code` property.\n * See https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error.\n */\nvar AssertionError = /*@__PURE__*/(function (Error) {\n  function AssertionError(code) {\n    var path = VERSION === 'latest' ? VERSION : 'v' + VERSION.split('-')[0];\n    var message = 'Assertion failed. See https://openlayers.org/en/' + path +\n    '/doc/errors/#' + code + ' for details.';\n\n    Error.call(this, message);\n\n    /**\n     * Error code. The meaning of the code can be found on\n     * https://openlayers.org/en/latest/doc/errors/ (replace `latest` with\n     * the version found in the OpenLayers script's header comment if a version\n     * other than the latest is used).\n     * @type {number}\n     * @api\n     */\n    this.code = code;\n\n    /**\n     * @type {string}\n     */\n    this.name = 'AssertionError';\n\n    // Re-assign message, see https://github.com/Rich-Harris/buble/issues/40\n    this.message = message;\n  }\n\n  if ( Error ) AssertionError.__proto__ = Error;\n  AssertionError.prototype = Object.create( Error && Error.prototype );\n  AssertionError.prototype.constructor = AssertionError;\n\n  return AssertionError;\n}(Error));\n\nexport default AssertionError;\n\n//# sourceMappingURL=AssertionError.js.map","/**\n * @module ol/ImageState\n */\n\n/**\n * @enum {number}\n */\nexport default {\n  IDLE: 0,\n  LOADING: 1,\n  LOADED: 2,\n  ERROR: 3\n};\n\n//# sourceMappingURL=ImageState.js.map","/**\n * @module ol/TileCache\n */\nimport LRUCache from './structs/LRUCache.js';\nimport {fromKey, getKey} from './tilecoord.js';\n\nvar TileCache = /*@__PURE__*/(function (LRUCache) {\n  function TileCache(opt_highWaterMark) {\n\n    LRUCache.call(this, opt_highWaterMark);\n\n  }\n\n  if ( LRUCache ) TileCache.__proto__ = LRUCache;\n  TileCache.prototype = Object.create( LRUCache && LRUCache.prototype );\n  TileCache.prototype.constructor = TileCache;\n\n  /**\n   * @param {!Object<string, import(\"./TileRange.js\").default>} usedTiles Used tiles.\n   */\n  TileCache.prototype.expireCache = function expireCache (usedTiles) {\n    while (this.canExpireCache()) {\n      var tile = this.peekLast();\n      var zKey = tile.tileCoord[0].toString();\n      if (zKey in usedTiles && usedTiles[zKey].contains(tile.tileCoord)) {\n        break;\n      } else {\n        this.pop().dispose();\n      }\n    }\n  };\n\n  /**\n   * Prune all tiles from the cache that don't have the same z as the newest tile.\n   */\n  TileCache.prototype.pruneExceptNewestZ = function pruneExceptNewestZ () {\n    if (this.getCount() === 0) {\n      return;\n    }\n    var key = this.peekFirstKey();\n    var tileCoord = fromKey(key);\n    var z = tileCoord[0];\n    this.forEach(function(tile) {\n      if (tile.tileCoord[0] !== z) {\n        this.remove(getKey(tile.tileCoord));\n        tile.dispose();\n      }\n    }, this);\n  };\n\n  return TileCache;\n}(LRUCache));\n\n\nexport default TileCache;\n\n//# sourceMappingURL=TileCache.js.map","/**\n * @module ol/ViewProperty\n */\n\n/**\n * @enum {string}\n */\nexport default {\n  CENTER: 'center',\n  RESOLUTION: 'resolution',\n  ROTATION: 'rotation'\n};\n\n//# sourceMappingURL=ViewProperty.js.map","/**\n * @module ol/View\n */\nimport {DEFAULT_TILE_SIZE} from './tilegrid/common.js';\nimport {getUid} from './util.js';\nimport {VOID} from './functions.js';\nimport {createExtent, none as centerNone} from './centerconstraint.js';\nimport BaseObject from './Object.js';\nimport {createSnapToResolutions, createSnapToPower} from './resolutionconstraint.js';\nimport {createSnapToZero, createSnapToN, none as rotationNone, disable} from './rotationconstraint.js';\nimport ViewHint from './ViewHint.js';\nimport ViewProperty from './ViewProperty.js';\nimport {linearFindNearest} from './array.js';\nimport {assert} from './asserts.js';\nimport {add as addCoordinate, rotate as rotateCoordinate, equals as coordinatesEqual} from './coordinate.js';\nimport {inAndOut} from './easing.js';\nimport {getForViewAndSize, getCenter, getHeight, getWidth, isEmpty} from './extent.js';\nimport GeometryType from './geom/GeometryType.js';\nimport {fromExtent as polygonFromExtent} from './geom/Polygon.js';\nimport {clamp, modulo} from './math.js';\nimport {assign} from './obj.js';\nimport {createProjection, METERS_PER_UNIT} from './proj.js';\nimport Units from './proj/Units.js';\n\n\n/**\n * An animation configuration\n *\n * @typedef {Object} Animation\n * @property {import(\"./coordinate.js\").Coordinate} [sourceCenter]\n * @property {import(\"./coordinate.js\").Coordinate} [targetCenter]\n * @property {number} [sourceResolution]\n * @property {number} [targetResolution]\n * @property {number} [sourceRotation]\n * @property {number} [targetRotation]\n * @property {import(\"./coordinate.js\").Coordinate} [anchor]\n * @property {number} start\n * @property {number} duration\n * @property {boolean} complete\n * @property {function(number):number} easing\n * @property {function(boolean)} callback\n */\n\n\n/**\n * @typedef {Object} Constraints\n * @property {import(\"./centerconstraint.js\").Type} center\n * @property {import(\"./resolutionconstraint.js\").Type} resolution\n * @property {import(\"./rotationconstraint.js\").Type} rotation\n */\n\n\n/**\n * @typedef {Object} FitOptions\n * @property {import(\"./size.js\").Size} [size] The size in pixels of the box to fit\n * the extent into. Default is the current size of the first map in the DOM that\n * uses this view, or `[100, 100]` if no such map is found.\n * @property {!Array<number>} [padding=[0, 0, 0, 0]] Padding (in pixels) to be\n * cleared inside the view. Values in the array are top, right, bottom and left\n * padding.\n * @property {boolean} [constrainResolution=true] Constrain the resolution.\n * @property {boolean} [nearest=false] If `constrainResolution` is `true`, get\n * the nearest extent instead of the closest that actually fits the view.\n * @property {number} [minResolution=0] Minimum resolution that we zoom to.\n * @property {number} [maxZoom] Maximum zoom level that we zoom to. If\n * `minResolution` is given, this property is ignored.\n * @property {number} [duration] The duration of the animation in milliseconds.\n * By default, there is no animation to the target extent.\n * @property {function(number):number} [easing] The easing function used during\n * the animation (defaults to {@link module:ol/easing~inAndOut}).\n * The function will be called for each frame with a number representing a\n * fraction of the animation's duration.  The function should return a number\n * between 0 and 1 representing the progress toward the destination state.\n * @property {function(boolean)} [callback] Function called when the view is in\n * its final position. The callback will be called with `true` if the animation\n * series completed on its own or `false` if it was cancelled.\n */\n\n\n/**\n * @typedef {Object} ViewOptions\n * @property {import(\"./coordinate.js\").Coordinate} [center] The initial center for\n * the view. The coordinate system for the center is specified with the\n * `projection` option. Layer sources will not be fetched if this is not set,\n * but the center can be set later with {@link #setCenter}.\n * @property {boolean|number} [constrainRotation=true] Rotation constraint.\n * `false` means no constraint. `true` means no constraint, but snap to zero\n * near zero. A number constrains the rotation to that number of values. For\n * example, `4` will constrain the rotation to 0, 90, 180, and 270 degrees.\n * @property {boolean} [enableRotation=true] Enable rotation.\n * If `false`, a rotation constraint that always sets the rotation to zero is\n * used. The `constrainRotation` option has no effect if `enableRotation` is\n * `false`.\n * @property {import(\"./extent.js\").Extent} [extent] The extent that constrains the\n * center, in other words, center cannot be set outside this extent.\n * @property {number} [maxResolution] The maximum resolution used to determine\n * the resolution constraint. It is used together with `minResolution` (or\n * `maxZoom`) and `zoomFactor`. If unspecified it is calculated in such a way\n * that the projection's validity extent fits in a 256x256 px tile. If the\n * projection is Spherical Mercator (the default) then `maxResolution` defaults\n * to `40075016.68557849 / 256 = 156543.03392804097`.\n * @property {number} [minResolution] The minimum resolution used to determine\n * the resolution constraint.  It is used together with `maxResolution` (or\n * `minZoom`) and `zoomFactor`.  If unspecified it is calculated assuming 29\n * zoom levels (with a factor of 2). If the projection is Spherical Mercator\n * (the default) then `minResolution` defaults to\n * `40075016.68557849 / 256 / Math.pow(2, 28) = 0.0005831682455839253`.\n * @property {number} [maxZoom=28] The maximum zoom level used to determine the\n * resolution constraint. It is used together with `minZoom` (or\n * `maxResolution`) and `zoomFactor`.  Note that if `minResolution` is also\n * provided, it is given precedence over `maxZoom`.\n * @property {number} [minZoom=0] The minimum zoom level used to determine the\n * resolution constraint. It is used together with `maxZoom` (or\n * `minResolution`) and `zoomFactor`.  Note that if `maxResolution` is also\n * provided, it is given precedence over `minZoom`.\n * @property {import(\"./proj.js\").ProjectionLike} [projection='EPSG:3857'] The\n * projection. The default is Spherical Mercator.\n * @property {number} [resolution] The initial resolution for the view. The\n * units are `projection` units per pixel (e.g. meters per pixel). An\n * alternative to setting this is to set `zoom`. Layer sources will not be\n * fetched if neither this nor `zoom` are defined, but they can be set later\n * with {@link #setZoom} or {@link #setResolution}.\n * @property {Array<number>} [resolutions] Resolutions to determine the\n * resolution constraint. If set the `maxResolution`, `minResolution`,\n * `minZoom`, `maxZoom`, and `zoomFactor` options are ignored.\n * @property {number} [rotation=0] The initial rotation for the view in radians\n * (positive rotation clockwise, 0 means North).\n * @property {number} [zoom] Only used if `resolution` is not defined. Zoom\n * level used to calculate the initial resolution for the view. The initial\n * resolution is determined using the {@link #constrainResolution} method.\n * @property {number} [zoomFactor=2] The zoom factor used to determine the\n * resolution constraint.\n */\n\n\n/**\n * @typedef {Object} AnimationOptions\n * @property {import(\"./coordinate.js\").Coordinate} [center] The center of the view at the end of\n * the animation.\n * @property {number} [zoom] The zoom level of the view at the end of the\n * animation. This takes precedence over `resolution`.\n * @property {number} [resolution] The resolution of the view at the end\n * of the animation.  If `zoom` is also provided, this option will be ignored.\n * @property {number} [rotation] The rotation of the view at the end of\n * the animation.\n * @property {import(\"./coordinate.js\").Coordinate} [anchor] Optional anchor to remained fixed\n * during a rotation or resolution animation.\n * @property {number} [duration=1000] The duration of the animation in milliseconds.\n * @property {function(number):number} [easing] The easing function used\n * during the animation (defaults to {@link module:ol/easing~inAndOut}).\n * The function will be called for each frame with a number representing a\n * fraction of the animation's duration.  The function should return a number\n * between 0 and 1 representing the progress toward the destination state.\n */\n\n\n/**\n * @typedef {Object} State\n * @property {import(\"./coordinate.js\").Coordinate} center\n * @property {import(\"./proj/Projection.js\").default} projection\n * @property {number} resolution\n * @property {number} rotation\n * @property {number} zoom\n */\n\n\n/**\n * Default min zoom level for the map view.\n * @type {number}\n */\nvar DEFAULT_MIN_ZOOM = 0;\n\n\n/**\n * @classdesc\n * A View object represents a simple 2D view of the map.\n *\n * This is the object to act upon to change the center, resolution,\n * and rotation of the map.\n *\n * ### The view states\n *\n * An View is determined by three states: `center`, `resolution`,\n * and `rotation`. Each state has a corresponding getter and setter, e.g.\n * `getCenter` and `setCenter` for the `center` state.\n *\n * An View has a `projection`. The projection determines the\n * coordinate system of the center, and its units determine the units of the\n * resolution (projection units per pixel). The default projection is\n * Spherical Mercator (EPSG:3857).\n *\n * ### The constraints\n *\n * `setCenter`, `setResolution` and `setRotation` can be used to change the\n * states of the view. Any value can be passed to the setters. And the value\n * that is passed to a setter will effectively be the value set in the view,\n * and returned by the corresponding getter.\n *\n * But a View object also has a *resolution constraint*, a\n * *rotation constraint* and a *center constraint*.\n *\n * As said above, no constraints are applied when the setters are used to set\n * new states for the view. Applying constraints is done explicitly through\n * the use of the `constrain*` functions (`constrainResolution` and\n * `constrainRotation` and `constrainCenter`).\n *\n * The main users of the constraints are the interactions and the\n * controls. For example, double-clicking on the map changes the view to\n * the \"next\" resolution. And releasing the fingers after pinch-zooming\n * snaps to the closest resolution (with an animation).\n *\n * The *resolution constraint* snaps to specific resolutions. It is\n * determined by the following options: `resolutions`, `maxResolution`,\n * `maxZoom`, and `zoomFactor`. If `resolutions` is set, the other three\n * options are ignored. See documentation for each option for more\n * information.\n *\n * The *rotation constraint* snaps to specific angles. It is determined\n * by the following options: `enableRotation` and `constrainRotation`.\n * By default the rotation value is snapped to zero when approaching the\n * horizontal.\n *\n * The *center constraint* is determined by the `extent` option. By\n * default the center is not constrained at all.\n *\n  * @api\n */\nvar View = /*@__PURE__*/(function (BaseObject) {\n  function View(opt_options) {\n    BaseObject.call(this);\n\n    var options = assign({}, opt_options);\n\n    /**\n     * @private\n     * @type {Array<number>}\n     */\n    this.hints_ = [0, 0];\n\n    /**\n     * @private\n     * @type {Array<Array<Animation>>}\n     */\n    this.animations_ = [];\n\n    /**\n     * @private\n     * @type {number|undefined}\n     */\n    this.updateAnimationKey_;\n\n    this.updateAnimations_ = this.updateAnimations_.bind(this);\n\n    /**\n     * @private\n     * @const\n     * @type {import(\"./proj/Projection.js\").default}\n     */\n    this.projection_ = createProjection(options.projection, 'EPSG:3857');\n\n    this.applyOptions_(options);\n  }\n\n  if ( BaseObject ) View.__proto__ = BaseObject;\n  View.prototype = Object.create( BaseObject && BaseObject.prototype );\n  View.prototype.constructor = View;\n\n  /**\n   * Set up the view with the given options.\n   * @param {ViewOptions} options View options.\n   */\n  View.prototype.applyOptions_ = function applyOptions_ (options) {\n\n    /**\n     * @type {Object<string, *>}\n     */\n    var properties = {};\n    properties[ViewProperty.CENTER] = options.center !== undefined ?\n      options.center : null;\n\n    var resolutionConstraintInfo = createResolutionConstraint(options);\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.maxResolution_ = resolutionConstraintInfo.maxResolution;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.minResolution_ = resolutionConstraintInfo.minResolution;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.zoomFactor_ = resolutionConstraintInfo.zoomFactor;\n\n    /**\n     * @private\n     * @type {Array<number>|undefined}\n     */\n    this.resolutions_ = options.resolutions;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.minZoom_ = resolutionConstraintInfo.minZoom;\n\n    var centerConstraint = createCenterConstraint(options);\n    var resolutionConstraint = resolutionConstraintInfo.constraint;\n    var rotationConstraint = createRotationConstraint(options);\n\n    /**\n     * @private\n     * @type {Constraints}\n     */\n    this.constraints_ = {\n      center: centerConstraint,\n      resolution: resolutionConstraint,\n      rotation: rotationConstraint\n    };\n\n    if (options.resolution !== undefined) {\n      properties[ViewProperty.RESOLUTION] = options.resolution;\n    } else if (options.zoom !== undefined) {\n      properties[ViewProperty.RESOLUTION] = this.constrainResolution(\n        this.maxResolution_, options.zoom - this.minZoom_);\n\n      if (this.resolutions_) { // in case map zoom is out of min/max zoom range\n        properties[ViewProperty.RESOLUTION] = clamp(\n          Number(this.getResolution() || properties[ViewProperty.RESOLUTION]),\n          this.minResolution_, this.maxResolution_);\n      }\n    }\n    properties[ViewProperty.ROTATION] = options.rotation !== undefined ? options.rotation : 0;\n    this.setProperties(properties);\n\n    /**\n     * @private\n     * @type {ViewOptions}\n     */\n    this.options_ = options;\n\n  };\n\n  /**\n   * Get an updated version of the view options used to construct the view.  The\n   * current resolution (or zoom), center, and rotation are applied to any stored\n   * options.  The provided options can be used to apply new min/max zoom or\n   * resolution limits.\n   * @param {ViewOptions} newOptions New options to be applied.\n   * @return {ViewOptions} New options updated with the current view state.\n   */\n  View.prototype.getUpdatedOptions_ = function getUpdatedOptions_ (newOptions) {\n    var options = assign({}, this.options_);\n\n    // preserve resolution (or zoom)\n    if (options.resolution !== undefined) {\n      options.resolution = this.getResolution();\n    } else {\n      options.zoom = this.getZoom();\n    }\n\n    // preserve center\n    options.center = this.getCenter();\n\n    // preserve rotation\n    options.rotation = this.getRotation();\n\n    return assign({}, options, newOptions);\n  };\n\n  /**\n   * Animate the view.  The view's center, zoom (or resolution), and rotation\n   * can be animated for smooth transitions between view states.  For example,\n   * to animate the view to a new zoom level:\n   *\n   *     view.animate({zoom: view.getZoom() + 1});\n   *\n   * By default, the animation lasts one second and uses in-and-out easing.  You\n   * can customize this behavior by including `duration` (in milliseconds) and\n   * `easing` options (see {@link module:ol/easing}).\n   *\n   * To chain together multiple animations, call the method with multiple\n   * animation objects.  For example, to first zoom and then pan:\n   *\n   *     view.animate({zoom: 10}, {center: [0, 0]});\n   *\n   * If you provide a function as the last argument to the animate method, it\n   * will get called at the end of an animation series.  The callback will be\n   * called with `true` if the animation series completed on its own or `false`\n   * if it was cancelled.\n   *\n   * Animations are cancelled by user interactions (e.g. dragging the map) or by\n   * calling `view.setCenter()`, `view.setResolution()`, or `view.setRotation()`\n   * (or another method that calls one of these).\n   *\n   * @param {...(AnimationOptions|function(boolean))} var_args Animation\n   *     options.  Multiple animations can be run in series by passing multiple\n   *     options objects.  To run multiple animations in parallel, call the method\n   *     multiple times.  An optional callback can be provided as a final\n   *     argument.  The callback will be called with a boolean indicating whether\n   *     the animation completed without being cancelled.\n   * @api\n   */\n  View.prototype.animate = function animate (var_args) {\n    var arguments$1 = arguments;\n\n    var animationCount = arguments.length;\n    var callback;\n    if (animationCount > 1 && typeof arguments[animationCount - 1] === 'function') {\n      callback = arguments[animationCount - 1];\n      --animationCount;\n    }\n    if (!this.isDef()) {\n      // if view properties are not yet set, shortcut to the final state\n      var state = arguments[animationCount - 1];\n      if (state.center) {\n        this.setCenter(state.center);\n      }\n      if (state.zoom !== undefined) {\n        this.setZoom(state.zoom);\n      }\n      if (state.rotation !== undefined) {\n        this.setRotation(state.rotation);\n      }\n      if (callback) {\n        animationCallback(callback, true);\n      }\n      return;\n    }\n    var start = Date.now();\n    var center = this.getCenter().slice();\n    var resolution = this.getResolution();\n    var rotation = this.getRotation();\n    var series = [];\n    for (var i = 0; i < animationCount; ++i) {\n      var options = /** @type {AnimationOptions} */ (arguments$1[i]);\n\n      var animation = /** @type {Animation} */ ({\n        start: start,\n        complete: false,\n        anchor: options.anchor,\n        duration: options.duration !== undefined ? options.duration : 1000,\n        easing: options.easing || inAndOut\n      });\n\n      if (options.center) {\n        animation.sourceCenter = center;\n        animation.targetCenter = options.center;\n        center = animation.targetCenter;\n      }\n\n      if (options.zoom !== undefined) {\n        animation.sourceResolution = resolution;\n        animation.targetResolution = this.constrainResolution(\n          this.maxResolution_, options.zoom - this.minZoom_, 0);\n        resolution = animation.targetResolution;\n      } else if (options.resolution) {\n        animation.sourceResolution = resolution;\n        animation.targetResolution = options.resolution;\n        resolution = animation.targetResolution;\n      }\n\n      if (options.rotation !== undefined) {\n        animation.sourceRotation = rotation;\n        var delta = modulo(options.rotation - rotation + Math.PI, 2 * Math.PI) - Math.PI;\n        animation.targetRotation = rotation + delta;\n        rotation = animation.targetRotation;\n      }\n\n      animation.callback = callback;\n\n      // check if animation is a no-op\n      if (isNoopAnimation(animation)) {\n        animation.complete = true;\n        // we still push it onto the series for callback handling\n      } else {\n        start += animation.duration;\n      }\n      series.push(animation);\n    }\n    this.animations_.push(series);\n    this.setHint(ViewHint.ANIMATING, 1);\n    this.updateAnimations_();\n  };\n\n  /**\n   * Determine if the view is being animated.\n   * @return {boolean} The view is being animated.\n   * @api\n   */\n  View.prototype.getAnimating = function getAnimating () {\n    return this.hints_[ViewHint.ANIMATING] > 0;\n  };\n\n  /**\n   * Determine if the user is interacting with the view, such as panning or zooming.\n   * @return {boolean} The view is being interacted with.\n   * @api\n   */\n  View.prototype.getInteracting = function getInteracting () {\n    return this.hints_[ViewHint.INTERACTING] > 0;\n  };\n\n  /**\n   * Cancel any ongoing animations.\n   * @api\n   */\n  View.prototype.cancelAnimations = function cancelAnimations () {\n    this.setHint(ViewHint.ANIMATING, -this.hints_[ViewHint.ANIMATING]);\n    for (var i = 0, ii = this.animations_.length; i < ii; ++i) {\n      var series = this.animations_[i];\n      if (series[0].callback) {\n        animationCallback(series[0].callback, false);\n      }\n    }\n    this.animations_.length = 0;\n  };\n\n  /**\n   * Update all animations.\n   */\n  View.prototype.updateAnimations_ = function updateAnimations_ () {\n    if (this.updateAnimationKey_ !== undefined) {\n      cancelAnimationFrame(this.updateAnimationKey_);\n      this.updateAnimationKey_ = undefined;\n    }\n    if (!this.getAnimating()) {\n      return;\n    }\n    var now = Date.now();\n    var more = false;\n    for (var i = this.animations_.length - 1; i >= 0; --i) {\n      var series = this.animations_[i];\n      var seriesComplete = true;\n      for (var j = 0, jj = series.length; j < jj; ++j) {\n        var animation = series[j];\n        if (animation.complete) {\n          continue;\n        }\n        var elapsed = now - animation.start;\n        var fraction = animation.duration > 0 ? elapsed / animation.duration : 1;\n        if (fraction >= 1) {\n          animation.complete = true;\n          fraction = 1;\n        } else {\n          seriesComplete = false;\n        }\n        var progress = animation.easing(fraction);\n        if (animation.sourceCenter) {\n          var x0 = animation.sourceCenter[0];\n          var y0 = animation.sourceCenter[1];\n          var x1 = animation.targetCenter[0];\n          var y1 = animation.targetCenter[1];\n          var x = x0 + progress * (x1 - x0);\n          var y = y0 + progress * (y1 - y0);\n          this.set(ViewProperty.CENTER, [x, y]);\n        }\n        if (animation.sourceResolution && animation.targetResolution) {\n          var resolution = progress === 1 ?\n            animation.targetResolution :\n            animation.sourceResolution + progress * (animation.targetResolution - animation.sourceResolution);\n          if (animation.anchor) {\n            this.set(ViewProperty.CENTER,\n              this.calculateCenterZoom(resolution, animation.anchor));\n          }\n          this.set(ViewProperty.RESOLUTION, resolution);\n        }\n        if (animation.sourceRotation !== undefined && animation.targetRotation !== undefined) {\n          var rotation = progress === 1 ?\n            modulo(animation.targetRotation + Math.PI, 2 * Math.PI) - Math.PI :\n            animation.sourceRotation + progress * (animation.targetRotation - animation.sourceRotation);\n          if (animation.anchor) {\n            this.set(ViewProperty.CENTER,\n              this.calculateCenterRotate(rotation, animation.anchor));\n          }\n          this.set(ViewProperty.ROTATION, rotation);\n        }\n        more = true;\n        if (!animation.complete) {\n          break;\n        }\n      }\n      if (seriesComplete) {\n        this.animations_[i] = null;\n        this.setHint(ViewHint.ANIMATING, -1);\n        var callback = series[0].callback;\n        if (callback) {\n          animationCallback(callback, true);\n        }\n      }\n    }\n    // prune completed series\n    this.animations_ = this.animations_.filter(Boolean);\n    if (more && this.updateAnimationKey_ === undefined) {\n      this.updateAnimationKey_ = requestAnimationFrame(this.updateAnimations_);\n    }\n  };\n\n  /**\n   * @param {number} rotation Target rotation.\n   * @param {import(\"./coordinate.js\").Coordinate} anchor Rotation anchor.\n   * @return {import(\"./coordinate.js\").Coordinate|undefined} Center for rotation and anchor.\n   */\n  View.prototype.calculateCenterRotate = function calculateCenterRotate (rotation, anchor) {\n    var center;\n    var currentCenter = this.getCenter();\n    if (currentCenter !== undefined) {\n      center = [currentCenter[0] - anchor[0], currentCenter[1] - anchor[1]];\n      rotateCoordinate(center, rotation - this.getRotation());\n      addCoordinate(center, anchor);\n    }\n    return center;\n  };\n\n  /**\n   * @param {number} resolution Target resolution.\n   * @param {import(\"./coordinate.js\").Coordinate} anchor Zoom anchor.\n   * @return {import(\"./coordinate.js\").Coordinate|undefined} Center for resolution and anchor.\n   */\n  View.prototype.calculateCenterZoom = function calculateCenterZoom (resolution, anchor) {\n    var center;\n    var currentCenter = this.getCenter();\n    var currentResolution = this.getResolution();\n    if (currentCenter !== undefined && currentResolution !== undefined) {\n      var x = anchor[0] - resolution * (anchor[0] - currentCenter[0]) / currentResolution;\n      var y = anchor[1] - resolution * (anchor[1] - currentCenter[1]) / currentResolution;\n      center = [x, y];\n    }\n    return center;\n  };\n\n  /**\n   * @private\n   * @return {import(\"./size.js\").Size} Viewport size or `[100, 100]` when no viewport is found.\n   */\n  View.prototype.getSizeFromViewport_ = function getSizeFromViewport_ () {\n    var size = [100, 100];\n    var selector = '.ol-viewport[data-view=\"' + getUid(this) + '\"]';\n    var element = document.querySelector(selector);\n    if (element) {\n      var metrics = getComputedStyle(element);\n      size[0] = parseInt(metrics.width, 10);\n      size[1] = parseInt(metrics.height, 10);\n    }\n    return size;\n  };\n\n  /**\n   * Get the constrained center of this view.\n   * @param {import(\"./coordinate.js\").Coordinate|undefined} center Center.\n   * @return {import(\"./coordinate.js\").Coordinate|undefined} Constrained center.\n   * @api\n   */\n  View.prototype.constrainCenter = function constrainCenter (center) {\n    return this.constraints_.center(center);\n  };\n\n  /**\n   * Get the constrained resolution of this view.\n   * @param {number|undefined} resolution Resolution.\n   * @param {number=} opt_delta Delta. Default is `0`.\n   * @param {number=} opt_direction Direction. Default is `0`.\n   * @return {number|undefined} Constrained resolution.\n   * @api\n   */\n  View.prototype.constrainResolution = function constrainResolution (resolution, opt_delta, opt_direction) {\n    var delta = opt_delta || 0;\n    var direction = opt_direction || 0;\n    return this.constraints_.resolution(resolution, delta, direction);\n  };\n\n  /**\n   * Get the constrained rotation of this view.\n   * @param {number|undefined} rotation Rotation.\n   * @param {number=} opt_delta Delta. Default is `0`.\n   * @return {number|undefined} Constrained rotation.\n   * @api\n   */\n  View.prototype.constrainRotation = function constrainRotation (rotation, opt_delta) {\n    var delta = opt_delta || 0;\n    return this.constraints_.rotation(rotation, delta);\n  };\n\n  /**\n   * Get the view center.\n   * @return {import(\"./coordinate.js\").Coordinate|undefined} The center of the view.\n   * @observable\n   * @api\n   */\n  View.prototype.getCenter = function getCenter () {\n    return (\n      /** @type {import(\"./coordinate.js\").Coordinate|undefined} */ (this.get(ViewProperty.CENTER))\n    );\n  };\n\n  /**\n   * @return {Constraints} Constraints.\n   */\n  View.prototype.getConstraints = function getConstraints () {\n    return this.constraints_;\n  };\n\n  /**\n   * @param {Array<number>=} opt_hints Destination array.\n   * @return {Array<number>} Hint.\n   */\n  View.prototype.getHints = function getHints (opt_hints) {\n    if (opt_hints !== undefined) {\n      opt_hints[0] = this.hints_[0];\n      opt_hints[1] = this.hints_[1];\n      return opt_hints;\n    } else {\n      return this.hints_.slice();\n    }\n  };\n\n  /**\n   * Calculate the extent for the current view state and the passed size.\n   * The size is the pixel dimensions of the box into which the calculated extent\n   * should fit. In most cases you want to get the extent of the entire map,\n   * that is `map.getSize()`.\n   * @param {import(\"./size.js\").Size=} opt_size Box pixel size. If not provided, the size of the\n   * first map that uses this view will be used.\n   * @return {import(\"./extent.js\").Extent} Extent.\n   * @api\n   */\n  View.prototype.calculateExtent = function calculateExtent (opt_size) {\n    var size = opt_size || this.getSizeFromViewport_();\n    var center = /** @type {!import(\"./coordinate.js\").Coordinate} */ (this.getCenter());\n    assert(center, 1); // The view center is not defined\n    var resolution = /** @type {!number} */ (this.getResolution());\n    assert(resolution !== undefined, 2); // The view resolution is not defined\n    var rotation = /** @type {!number} */ (this.getRotation());\n    assert(rotation !== undefined, 3); // The view rotation is not defined\n\n    return getForViewAndSize(center, resolution, rotation, size);\n  };\n\n  /**\n   * Get the maximum resolution of the view.\n   * @return {number} The maximum resolution of the view.\n   * @api\n   */\n  View.prototype.getMaxResolution = function getMaxResolution () {\n    return this.maxResolution_;\n  };\n\n  /**\n   * Get the minimum resolution of the view.\n   * @return {number} The minimum resolution of the view.\n   * @api\n   */\n  View.prototype.getMinResolution = function getMinResolution () {\n    return this.minResolution_;\n  };\n\n  /**\n   * Get the maximum zoom level for the view.\n   * @return {number} The maximum zoom level.\n   * @api\n   */\n  View.prototype.getMaxZoom = function getMaxZoom () {\n    return /** @type {number} */ (this.getZoomForResolution(this.minResolution_));\n  };\n\n  /**\n   * Set a new maximum zoom level for the view.\n   * @param {number} zoom The maximum zoom level.\n   * @api\n   */\n  View.prototype.setMaxZoom = function setMaxZoom (zoom) {\n    this.applyOptions_(this.getUpdatedOptions_({maxZoom: zoom}));\n  };\n\n  /**\n   * Get the minimum zoom level for the view.\n   * @return {number} The minimum zoom level.\n   * @api\n   */\n  View.prototype.getMinZoom = function getMinZoom () {\n    return /** @type {number} */ (this.getZoomForResolution(this.maxResolution_));\n  };\n\n  /**\n   * Set a new minimum zoom level for the view.\n   * @param {number} zoom The minimum zoom level.\n   * @api\n   */\n  View.prototype.setMinZoom = function setMinZoom (zoom) {\n    this.applyOptions_(this.getUpdatedOptions_({minZoom: zoom}));\n  };\n\n  /**\n   * Get the view projection.\n   * @return {import(\"./proj/Projection.js\").default} The projection of the view.\n   * @api\n   */\n  View.prototype.getProjection = function getProjection () {\n    return this.projection_;\n  };\n\n  /**\n   * Get the view resolution.\n   * @return {number|undefined} The resolution of the view.\n   * @observable\n   * @api\n   */\n  View.prototype.getResolution = function getResolution () {\n    return /** @type {number|undefined} */ (this.get(ViewProperty.RESOLUTION));\n  };\n\n  /**\n   * Get the resolutions for the view. This returns the array of resolutions\n   * passed to the constructor of the View, or undefined if none were given.\n   * @return {Array<number>|undefined} The resolutions of the view.\n   * @api\n   */\n  View.prototype.getResolutions = function getResolutions () {\n    return this.resolutions_;\n  };\n\n  /**\n   * Get the resolution for a provided extent (in map units) and size (in pixels).\n   * @param {import(\"./extent.js\").Extent} extent Extent.\n   * @param {import(\"./size.js\").Size=} opt_size Box pixel size.\n   * @return {number} The resolution at which the provided extent will render at\n   *     the given size.\n   * @api\n   */\n  View.prototype.getResolutionForExtent = function getResolutionForExtent (extent, opt_size) {\n    var size = opt_size || this.getSizeFromViewport_();\n    var xResolution = getWidth(extent) / size[0];\n    var yResolution = getHeight(extent) / size[1];\n    return Math.max(xResolution, yResolution);\n  };\n\n  /**\n   * Return a function that returns a value between 0 and 1 for a\n   * resolution. Exponential scaling is assumed.\n   * @param {number=} opt_power Power.\n   * @return {function(number): number} Resolution for value function.\n   */\n  View.prototype.getResolutionForValueFunction = function getResolutionForValueFunction (opt_power) {\n    var power = opt_power || 2;\n    var maxResolution = this.maxResolution_;\n    var minResolution = this.minResolution_;\n    var max = Math.log(maxResolution / minResolution) / Math.log(power);\n    return (\n      /**\n       * @param {number} value Value.\n       * @return {number} Resolution.\n       */\n      function(value) {\n        var resolution = maxResolution / Math.pow(power, value * max);\n        return resolution;\n      });\n  };\n\n  /**\n   * Get the view rotation.\n   * @return {number} The rotation of the view in radians.\n   * @observable\n   * @api\n   */\n  View.prototype.getRotation = function getRotation () {\n    return /** @type {number} */ (this.get(ViewProperty.ROTATION));\n  };\n\n  /**\n   * Return a function that returns a resolution for a value between\n   * 0 and 1. Exponential scaling is assumed.\n   * @param {number=} opt_power Power.\n   * @return {function(number): number} Value for resolution function.\n   */\n  View.prototype.getValueForResolutionFunction = function getValueForResolutionFunction (opt_power) {\n    var power = opt_power || 2;\n    var maxResolution = this.maxResolution_;\n    var minResolution = this.minResolution_;\n    var max = Math.log(maxResolution / minResolution) / Math.log(power);\n    return (\n      /**\n       * @param {number} resolution Resolution.\n       * @return {number} Value.\n       */\n      function(resolution) {\n        var value = (Math.log(maxResolution / resolution) / Math.log(power)) / max;\n        return value;\n      });\n  };\n\n  /**\n   * @param {number} pixelRatio Pixel ratio for center rounding.\n   * @return {State} View state.\n   */\n  View.prototype.getState = function getState (pixelRatio) {\n    var center = /** @type {import(\"./coordinate.js\").Coordinate} */ (this.getCenter());\n    var projection = this.getProjection();\n    var resolution = /** @type {number} */ (this.getResolution());\n    var pixelResolution = resolution / pixelRatio;\n    var rotation = this.getRotation();\n    return (\n      /** @type {State} */ ({\n        center: [\n          Math.round(center[0] / pixelResolution) * pixelResolution,\n          Math.round(center[1] / pixelResolution) * pixelResolution\n        ],\n        projection: projection !== undefined ? projection : null,\n        resolution: resolution,\n        rotation: rotation,\n        zoom: this.getZoom()\n      })\n    );\n  };\n\n  /**\n   * Get the current zoom level.  If you configured your view with a resolutions\n   * array (this is rare), this method may return non-integer zoom levels (so\n   * the zoom level is not safe to use as an index into a resolutions array).\n   * @return {number|undefined} Zoom.\n   * @api\n   */\n  View.prototype.getZoom = function getZoom () {\n    var zoom;\n    var resolution = this.getResolution();\n    if (resolution !== undefined) {\n      zoom = this.getZoomForResolution(resolution);\n    }\n    return zoom;\n  };\n\n  /**\n   * Get the zoom level for a resolution.\n   * @param {number} resolution The resolution.\n   * @return {number|undefined} The zoom level for the provided resolution.\n   * @api\n   */\n  View.prototype.getZoomForResolution = function getZoomForResolution (resolution) {\n    var offset = this.minZoom_ || 0;\n    var max, zoomFactor;\n    if (this.resolutions_) {\n      var nearest = linearFindNearest(this.resolutions_, resolution, 1);\n      offset = nearest;\n      max = this.resolutions_[nearest];\n      if (nearest == this.resolutions_.length - 1) {\n        zoomFactor = 2;\n      } else {\n        zoomFactor = max / this.resolutions_[nearest + 1];\n      }\n    } else {\n      max = this.maxResolution_;\n      zoomFactor = this.zoomFactor_;\n    }\n    return offset + Math.log(max / resolution) / Math.log(zoomFactor);\n  };\n\n  /**\n   * Get the resolution for a zoom level.\n   * @param {number} zoom Zoom level.\n   * @return {number} The view resolution for the provided zoom level.\n   * @api\n   */\n  View.prototype.getResolutionForZoom = function getResolutionForZoom (zoom) {\n    return /** @type {number} */ (this.constrainResolution(\n      this.maxResolution_, zoom - this.minZoom_, 0));\n  };\n\n  /**\n   * Fit the given geometry or extent based on the given map size and border.\n   * The size is pixel dimensions of the box to fit the extent into.\n   * In most cases you will want to use the map size, that is `map.getSize()`.\n   * Takes care of the map angle.\n   * @param {import(\"./geom/SimpleGeometry.js\").default|import(\"./extent.js\").Extent} geometryOrExtent The geometry or\n   *     extent to fit the view to.\n   * @param {FitOptions=} opt_options Options.\n   * @api\n   */\n  View.prototype.fit = function fit (geometryOrExtent, opt_options) {\n    var options = opt_options || {};\n    var size = options.size;\n    if (!size) {\n      size = this.getSizeFromViewport_();\n    }\n    /** @type {import(\"./geom/SimpleGeometry.js\").default} */\n    var geometry;\n    assert(Array.isArray(geometryOrExtent) || typeof /** @type {?} */ (geometryOrExtent).getSimplifiedGeometry === 'function',\n      24); // Invalid extent or geometry provided as `geometry`\n    if (Array.isArray(geometryOrExtent)) {\n      assert(!isEmpty(geometryOrExtent),\n        25); // Cannot fit empty extent provided as `geometry`\n      geometry = polygonFromExtent(geometryOrExtent);\n    } else if (geometryOrExtent.getType() === GeometryType.CIRCLE) {\n      geometryOrExtent = geometryOrExtent.getExtent();\n      geometry = polygonFromExtent(geometryOrExtent);\n      geometry.rotate(this.getRotation(), getCenter(geometryOrExtent));\n    } else {\n      geometry = geometryOrExtent;\n    }\n\n    var padding = options.padding !== undefined ? options.padding : [0, 0, 0, 0];\n    var constrainResolution = options.constrainResolution !== undefined ?\n      options.constrainResolution : true;\n    var nearest = options.nearest !== undefined ? options.nearest : false;\n    var minResolution;\n    if (options.minResolution !== undefined) {\n      minResolution = options.minResolution;\n    } else if (options.maxZoom !== undefined) {\n      minResolution = this.constrainResolution(\n        this.maxResolution_, options.maxZoom - this.minZoom_, 0);\n    } else {\n      minResolution = 0;\n    }\n    var coords = geometry.getFlatCoordinates();\n\n    // calculate rotated extent\n    var rotation = this.getRotation();\n    var cosAngle = Math.cos(-rotation);\n    var sinAngle = Math.sin(-rotation);\n    var minRotX = +Infinity;\n    var minRotY = +Infinity;\n    var maxRotX = -Infinity;\n    var maxRotY = -Infinity;\n    var stride = geometry.getStride();\n    for (var i = 0, ii = coords.length; i < ii; i += stride) {\n      var rotX = coords[i] * cosAngle - coords[i + 1] * sinAngle;\n      var rotY = coords[i] * sinAngle + coords[i + 1] * cosAngle;\n      minRotX = Math.min(minRotX, rotX);\n      minRotY = Math.min(minRotY, rotY);\n      maxRotX = Math.max(maxRotX, rotX);\n      maxRotY = Math.max(maxRotY, rotY);\n    }\n\n    // calculate resolution\n    var resolution = this.getResolutionForExtent(\n      [minRotX, minRotY, maxRotX, maxRotY],\n      [size[0] - padding[1] - padding[3], size[1] - padding[0] - padding[2]]);\n    resolution = isNaN(resolution) ? minResolution :\n      Math.max(resolution, minResolution);\n    if (constrainResolution) {\n      var constrainedResolution = this.constrainResolution(resolution, 0, 0);\n      if (!nearest && constrainedResolution < resolution) {\n        constrainedResolution = this.constrainResolution(\n          constrainedResolution, -1, 0);\n      }\n      resolution = constrainedResolution;\n    }\n\n    // calculate center\n    sinAngle = -sinAngle; // go back to original rotation\n    var centerRotX = (minRotX + maxRotX) / 2;\n    var centerRotY = (minRotY + maxRotY) / 2;\n    centerRotX += (padding[1] - padding[3]) / 2 * resolution;\n    centerRotY += (padding[0] - padding[2]) / 2 * resolution;\n    var centerX = centerRotX * cosAngle - centerRotY * sinAngle;\n    var centerY = centerRotY * cosAngle + centerRotX * sinAngle;\n    var center = [centerX, centerY];\n    var callback = options.callback ? options.callback : VOID;\n\n    if (options.duration !== undefined) {\n      this.animate({\n        resolution: resolution,\n        center: center,\n        duration: options.duration,\n        easing: options.easing\n      }, callback);\n    } else {\n      this.setResolution(resolution);\n      this.setCenter(center);\n      animationCallback(callback, true);\n    }\n  };\n\n  /**\n   * Center on coordinate and view position.\n   * @param {import(\"./coordinate.js\").Coordinate} coordinate Coordinate.\n   * @param {import(\"./size.js\").Size} size Box pixel size.\n   * @param {import(\"./pixel.js\").Pixel} position Position on the view to center on.\n   * @api\n   */\n  View.prototype.centerOn = function centerOn (coordinate, size, position) {\n    // calculate rotated position\n    var rotation = this.getRotation();\n    var cosAngle = Math.cos(-rotation);\n    var sinAngle = Math.sin(-rotation);\n    var rotX = coordinate[0] * cosAngle - coordinate[1] * sinAngle;\n    var rotY = coordinate[1] * cosAngle + coordinate[0] * sinAngle;\n    var resolution = this.getResolution();\n    rotX += (size[0] / 2 - position[0]) * resolution;\n    rotY += (position[1] - size[1] / 2) * resolution;\n\n    // go back to original angle\n    sinAngle = -sinAngle; // go back to original rotation\n    var centerX = rotX * cosAngle - rotY * sinAngle;\n    var centerY = rotY * cosAngle + rotX * sinAngle;\n\n    this.setCenter([centerX, centerY]);\n  };\n\n  /**\n   * @return {boolean} Is defined.\n   */\n  View.prototype.isDef = function isDef () {\n    return !!this.getCenter() && this.getResolution() !== undefined;\n  };\n\n  /**\n   * Rotate the view around a given coordinate.\n   * @param {number} rotation New rotation value for the view.\n   * @param {import(\"./coordinate.js\").Coordinate=} opt_anchor The rotation center.\n   * @api\n   */\n  View.prototype.rotate = function rotate (rotation, opt_anchor) {\n    if (opt_anchor !== undefined) {\n      var center = this.calculateCenterRotate(rotation, opt_anchor);\n      this.setCenter(center);\n    }\n    this.setRotation(rotation);\n  };\n\n  /**\n   * Set the center of the current view.\n   * @param {import(\"./coordinate.js\").Coordinate|undefined} center The center of the view.\n   * @observable\n   * @api\n   */\n  View.prototype.setCenter = function setCenter (center) {\n    this.set(ViewProperty.CENTER, center);\n    if (this.getAnimating()) {\n      this.cancelAnimations();\n    }\n  };\n\n  /**\n   * @param {ViewHint} hint Hint.\n   * @param {number} delta Delta.\n   * @return {number} New value.\n   */\n  View.prototype.setHint = function setHint (hint, delta) {\n    this.hints_[hint] += delta;\n    this.changed();\n    return this.hints_[hint];\n  };\n\n  /**\n   * Set the resolution for this view.\n   * @param {number|undefined} resolution The resolution of the view.\n   * @observable\n   * @api\n   */\n  View.prototype.setResolution = function setResolution (resolution) {\n    this.set(ViewProperty.RESOLUTION, resolution);\n    if (this.getAnimating()) {\n      this.cancelAnimations();\n    }\n  };\n\n  /**\n   * Set the rotation for this view.\n   * @param {number} rotation The rotation of the view in radians.\n   * @observable\n   * @api\n   */\n  View.prototype.setRotation = function setRotation (rotation) {\n    this.set(ViewProperty.ROTATION, rotation);\n    if (this.getAnimating()) {\n      this.cancelAnimations();\n    }\n  };\n\n  /**\n   * Zoom to a specific zoom level.\n   * @param {number} zoom Zoom level.\n   * @api\n   */\n  View.prototype.setZoom = function setZoom (zoom) {\n    this.setResolution(this.getResolutionForZoom(zoom));\n  };\n\n  return View;\n}(BaseObject));\n\n\n/**\n * @param {Function} callback Callback.\n * @param {*} returnValue Return value.\n */\nfunction animationCallback(callback, returnValue) {\n  setTimeout(function() {\n    callback(returnValue);\n  }, 0);\n}\n\n\n/**\n * @param {ViewOptions} options View options.\n * @return {import(\"./centerconstraint.js\").Type} The constraint.\n */\nexport function createCenterConstraint(options) {\n  if (options.extent !== undefined) {\n    return createExtent(options.extent);\n  } else {\n    return centerNone;\n  }\n}\n\n\n/**\n * @param {ViewOptions} options View options.\n * @return {{constraint: import(\"./resolutionconstraint.js\").Type, maxResolution: number,\n *     minResolution: number, minZoom: number, zoomFactor: number}} The constraint.\n */\nexport function createResolutionConstraint(options) {\n  var resolutionConstraint;\n  var maxResolution;\n  var minResolution;\n\n  // TODO: move these to be ol constants\n  // see https://github.com/openlayers/openlayers/issues/2076\n  var defaultMaxZoom = 28;\n  var defaultZoomFactor = 2;\n\n  var minZoom = options.minZoom !== undefined ?\n    options.minZoom : DEFAULT_MIN_ZOOM;\n\n  var maxZoom = options.maxZoom !== undefined ?\n    options.maxZoom : defaultMaxZoom;\n\n  var zoomFactor = options.zoomFactor !== undefined ?\n    options.zoomFactor : defaultZoomFactor;\n\n  if (options.resolutions !== undefined) {\n    var resolutions = options.resolutions;\n    maxResolution = resolutions[minZoom];\n    minResolution = resolutions[maxZoom] !== undefined ?\n      resolutions[maxZoom] : resolutions[resolutions.length - 1];\n    resolutionConstraint = createSnapToResolutions(\n      resolutions);\n  } else {\n    // calculate the default min and max resolution\n    var projection = createProjection(options.projection, 'EPSG:3857');\n    var extent = projection.getExtent();\n    var size = !extent ?\n      // use an extent that can fit the whole world if need be\n      360 * METERS_PER_UNIT[Units.DEGREES] /\n            projection.getMetersPerUnit() :\n      Math.max(getWidth(extent), getHeight(extent));\n\n    var defaultMaxResolution = size / DEFAULT_TILE_SIZE / Math.pow(\n      defaultZoomFactor, DEFAULT_MIN_ZOOM);\n\n    var defaultMinResolution = defaultMaxResolution / Math.pow(\n      defaultZoomFactor, defaultMaxZoom - DEFAULT_MIN_ZOOM);\n\n    // user provided maxResolution takes precedence\n    maxResolution = options.maxResolution;\n    if (maxResolution !== undefined) {\n      minZoom = 0;\n    } else {\n      maxResolution = defaultMaxResolution / Math.pow(zoomFactor, minZoom);\n    }\n\n    // user provided minResolution takes precedence\n    minResolution = options.minResolution;\n    if (minResolution === undefined) {\n      if (options.maxZoom !== undefined) {\n        if (options.maxResolution !== undefined) {\n          minResolution = maxResolution / Math.pow(zoomFactor, maxZoom);\n        } else {\n          minResolution = defaultMaxResolution / Math.pow(zoomFactor, maxZoom);\n        }\n      } else {\n        minResolution = defaultMinResolution;\n      }\n    }\n\n    // given discrete zoom levels, minResolution may be different than provided\n    maxZoom = minZoom + Math.floor(\n      Math.log(maxResolution / minResolution) / Math.log(zoomFactor));\n    minResolution = maxResolution / Math.pow(zoomFactor, maxZoom - minZoom);\n\n    resolutionConstraint = createSnapToPower(\n      zoomFactor, maxResolution, maxZoom - minZoom);\n  }\n  return {constraint: resolutionConstraint, maxResolution: maxResolution,\n    minResolution: minResolution, minZoom: minZoom, zoomFactor: zoomFactor};\n}\n\n\n/**\n * @param {ViewOptions} options View options.\n * @return {import(\"./rotationconstraint.js\").Type} Rotation constraint.\n */\nexport function createRotationConstraint(options) {\n  var enableRotation = options.enableRotation !== undefined ?\n    options.enableRotation : true;\n  if (enableRotation) {\n    var constrainRotation = options.constrainRotation;\n    if (constrainRotation === undefined || constrainRotation === true) {\n      return createSnapToZero();\n    } else if (constrainRotation === false) {\n      return rotationNone;\n    } else if (typeof constrainRotation === 'number') {\n      return createSnapToN(constrainRotation);\n    } else {\n      return rotationNone;\n    }\n  } else {\n    return disable;\n  }\n}\n\n\n/**\n * Determine if an animation involves no view change.\n * @param {Animation} animation The animation.\n * @return {boolean} The animation involves no view change.\n */\nexport function isNoopAnimation(animation) {\n  if (animation.sourceCenter && animation.targetCenter) {\n    if (!coordinatesEqual(animation.sourceCenter, animation.targetCenter)) {\n      return false;\n    }\n  }\n  if (animation.sourceResolution !== animation.targetResolution) {\n    return false;\n  }\n  if (animation.sourceRotation !== animation.targetRotation) {\n    return false;\n  }\n  return true;\n}\n\nexport default View;\n\n//# sourceMappingURL=View.js.map","/**\n * @module ol/TileState\n */\n\n/**\n * @enum {number}\n */\nexport default {\n  IDLE: 0,\n  LOADING: 1,\n  LOADED: 2,\n  /**\n   * Indicates that tile loading failed\n   * @type {number}\n   */\n  ERROR: 3,\n  EMPTY: 4,\n  ABORT: 5\n};\n\n//# sourceMappingURL=TileState.js.map","/** @namespace  ol.ext\r\n */\r\n/*global ol*/\r\nif (window.ol && !ol.ext) {\r\n  ol.ext = {};\r\n}\r\n\r\n/** Inherit the prototype methods from one constructor into another.\r\n * replace deprecated ol method\r\n *\r\n * @param {!Function} childCtor Child constructor.\r\n * @param {!Function} parentCtor Parent constructor.\r\n * @function module:ol.inherits\r\n * @api\r\n */\r\nvar ol_ext_inherits = function(child,parent) {\r\n  child.prototype = Object.create(parent.prototype);\r\n  child.prototype.constructor = child;\r\n};\r\n\r\n// Compatibilty with ol > 5 to be removed when v6 is out\r\nif (window.ol) {\r\n  if (!ol.inherits) ol.inherits = ol_ext_inherits;\r\n}\r\n\r\n/* IE Polyfill */\r\n// NodeList.forEach\r\nif (window.NodeList && !NodeList.prototype.forEach) {\r\n  NodeList.prototype.forEach = Array.prototype.forEach;\r\n}\r\n// Element.remove\r\nif (window.Element && !Element.prototype.remove) {\r\n  Element.prototype.remove = function() {\r\n    if (this.parentNode) this.parentNode.removeChild(this);\r\n  }\r\n}\r\n/* End Polyfill */\r\n\r\nexport {ol_ext_inherits}\r\nexport default ol_ext_inherits\r\n","/*\r\n  Copyright (c) 2015 Jean-Marc VIGLINO,\r\n  released under the CeCILL-B license (French BSD license)\r\n  (http://www.cecill.info/licences/Licence_CeCILL-B_V1-en.txt).\r\n*/\r\n\r\nimport ol_ext_inherits from '../util/ext'\r\nimport ol_control_Control from 'ol/control/Control'\r\n\r\n/**\r\n * @classdesc Swipe Control.\r\n *\r\n * @constructor\r\n * @extends {ol_control_Control}\r\n * @param {Object=} Control options.\r\n *  @param {ol.layer} options.layers layer to swipe\r\n *  @param {ol.layer} options.rightLayer layer to swipe on right side\r\n *  @param {string} options.className control class name\r\n *  @param {number} options.position position propertie of the swipe [0,1], default 0.5\r\n *  @param {string} options.orientation orientation propertie (vertical|horizontal), default vertical\r\n */\r\nvar ol_control_Swipe = function(options) {\r\n  options = options || {};\r\n\r\n  var button = document.createElement('button');\r\n\r\n  var element = document.createElement('div');\r\n  element.className = (options.className || \"ol-swipe\") + \" ol-unselectable ol-control\";\r\n  element.appendChild(button);\r\n\r\n  element.addEventListener(\"mousedown\", this.move.bind(this));\r\n  element.addEventListener(\"touchstart\", this.move.bind(this));\r\n\r\n  ol_control_Control.call(this, {\r\n    element: element\r\n  });\r\n\r\n  // An array of listener on layer postcompose\r\n  this.precomposeRight_ = this.precomposeRight.bind(this);\r\n  this.precomposeLeft_ = this.precomposeLeft.bind(this);\r\n  this.postcompose_ = this.postcompose.bind(this);\r\n\r\n  this.layers = [];\r\n  if (options.layers) this.addLayer(options.layers, false);\r\n  if (options.rightLayers) this.addLayer(options.rightLayers, true);\r\n\r\n  this.on('propertychange', function() {\r\n    if (this.getMap()) this.getMap().renderSync();\r\n    if (this.get('orientation') === \"horizontal\") {\r\n      this.element.style.top = this.get('position')*100+\"%\";\r\n      this.element.style.left = \"\";\r\n    } else {\r\n      if (this.get('orientation') !== \"vertical\") this.set('orientation', \"vertical\");\r\n      this.element.style.left = this.get('position')*100+\"%\";\r\n      this.element.style.top = \"\";\r\n    }\r\n    this.element.classList.remove(\"horizontal\", \"vertical\");\r\n    this.element.classList.add(this.get('orientation'));\r\n  }.bind(this));\r\n\r\n  this.set('position', options.position || 0.5);\r\n  this.set('orientation', options.orientation || 'vertical');\r\n};\r\nol_ext_inherits(ol_control_Swipe, ol_control_Control);\r\n\r\n/**\r\n * Set the map instance the control associated with.\r\n * @param {_ol_Map_} map The map instance.\r\n */\r\nol_control_Swipe.prototype.setMap = function(map) {\r\n  var i;\r\n  var l;\r\n\r\n  if (this.getMap()) {\r\n    for (i=0; i<this.layers.length; i++) {\r\n      l = this.layers[i];\r\n      if (l.right) l.layer.un(['precompose','prerender'], this.precomposeRight_);\r\n      else l.layer.un(['precompose','prerender'], this.precomposeLeft_);\r\n      l.layer.un(['postcompose','postrender'], this.postcompose_);\r\n    }\r\n    this.getMap().renderSync();\r\n  }\r\n\r\n  ol_control_Control.prototype.setMap.call(this, map);\r\n\r\n  if (map) {\r\n    this._listener = [];\r\n    for (i=0; i<this.layers.length; i++) {\r\n      l = this.layers[i];\r\n      if (l.right) l.layer.on(['precompose','prerender'], this.precomposeRight_);\r\n      else l.layer.on(['precompose','prerender'], this.precomposeLeft_);\r\n      l.layer.on(['postcompose','postrender'], this.postcompose_);\r\n    }\r\n    map.renderSync();\r\n  }\r\n};\r\n\r\n/** @private\r\n*/\r\nol_control_Swipe.prototype.isLayer_ = function(layer){\r\n  for (var k=0; k<this.layers.length; k++) {\r\n    if (this.layers[k].layer === layer) return k;\r\n  }\r\n  return -1;\r\n};\r\n\r\n/** Add a layer to clip\r\n *\t@param {ol.layer|Array<ol.layer>} layer to clip\r\n*\t@param {bool} add layer in the right part of the map, default left.\r\n*/\r\nol_control_Swipe.prototype.addLayer = function(layers, right) {\r\n  if (!(layers instanceof Array)) layers = [layers];\r\n  for (var i=0; i<layers.length; i++) {\r\n    var l = layers[i];\r\n    if (this.isLayer_(l) < 0) {\r\n      this.layers.push({ layer:l, right:right });\r\n      if (this.getMap()) {\r\n        if (right) l.on(['precompose','prerender'], this.precomposeRight_);\r\n        else l.on(['precompose','prerender'], this.precomposeLeft_);\r\n        l.on(['postcompose','postrender'], this.postcompose_);\r\n        this.getMap().renderSync();\r\n      }\r\n    }\r\n  }\r\n};\r\n\r\n/** Remove a layer to clip\r\n *\t@param {ol.layer|Array<ol.layer>} layer to clip\r\n*/\r\nol_control_Swipe.prototype.removeLayer = function(layers) {\r\n  if (!(layers instanceof Array)) layers = [layers];\r\n  for (var i=0; i<layers.length; i++) {\r\n    var k = this.isLayer_(layers[i]);\r\n    if (k >=0 && this.getMap()) {\r\n      if (this.layers[k].right) layers[i].un(['precompose','prerender'], this.precomposeRight_);\r\n      else layers[i].un(['precompose','prerender'], this.precomposeLeft_);\r\n      layers[i].un(['postcompose','postrender'], this.postcompose_);\r\n      this.layers.splice(k,1);\r\n      this.getMap().renderSync();\r\n    }\r\n  }\r\n};\r\n\r\n/** @private\r\n*/\r\nol_control_Swipe.prototype.move = function(e) {\r\n  var self = this;\r\n  var l;\r\n  switch (e.type) {\r\n    case 'touchcancel':\r\n    case 'touchend':\r\n    case 'mouseup': {\r\n      self.isMoving = false;\r\n      [\"mouseup\", \"mousemove\", \"touchend\", \"touchcancel\", \"touchmove\"]\r\n        .forEach(function(eventName) {\r\n          document.removeEventListener(eventName, self.move);\r\n        });\r\n      break;\r\n    }\r\n    case 'mousedown':\r\n    case 'touchstart': {\r\n      self.isMoving = true;\r\n      [\"mouseup\", \"mousemove\", \"touchend\", \"touchcancel\", \"touchmove\"]\r\n        .forEach(function(eventName) {\r\n          document.addEventListener(eventName, self.move.bind(self));\r\n        });\r\n    }\r\n    // fallthrough\r\n    case 'mousemove':\r\n    case 'touchmove': {\r\n      if (self.isMoving) {\r\n        if (self.get('orientation') === \"vertical\") {\r\n          var pageX = e.pageX\r\n            || (e.touches && e.touches.length && e.touches[0].pageX)\r\n            || (e.changedTouches && e.changedTouches.length && e.changedTouches[0].pageX);\r\n          if (!pageX) break;\r\n          pageX -= self.getMap().getTargetElement().getBoundingClientRect().left +\r\n            window.pageXOffset - document.documentElement.clientLeft;\r\n\r\n          l = self.getMap().getSize()[0];\r\n          l = Math.min(Math.max(0, 1-(l-pageX)/l), 1);\r\n          self.set('position', l);\r\n        } else {\r\n          var pageY = e.pageY\r\n            || (e.touches && e.touches.length && e.touches[0].pageY)\r\n            || (e.changedTouches && e.changedTouches.length && e.changedTouches[0].pageY);\r\n          if (!pageY) break;\r\n          pageY -= self.getMap().getTargetElement().getBoundingClientRect().top +\r\n            window.pageYOffset - document.documentElement.clientTop;\r\n\r\n          l = self.getMap().getSize()[1];\r\n          l = Math.min(Math.max(0, 1-(l-pageY)/l), 1);\r\n          self.set('position', l);\r\n        }\r\n      }\r\n      break;\r\n    }\r\n    default: break;\r\n  }\r\n};\r\n\r\nol_control_Swipe.prototype._drawRect = function(e, pts) {\r\n  var tr = e.inversePixelTransform;\r\n  if (tr) {\r\n    var r = [\r\n      [pts[0][0], pts[0][1]],\r\n      [pts[0][0], pts[1][1]],\r\n      [pts[1][0], pts[1][1]],\r\n      [pts[1][0], pts[0][1]],\r\n      [pts[0][0], pts[0][1]]\r\n    ];\r\n    r.forEach(function (pt, i) {\r\n      pt = [\r\n        (pt[0]*tr[0] - pt[1]*tr[1] + tr[4]),\r\n        (-pt[0]*tr[2] + pt[1]*tr[3] + tr[5])\r\n      ];\r\n      if (!i) {\r\n        e.context.moveTo(pt[0], pt[1]);\r\n      } else {\r\n        e.context.lineTo(pt[0], pt[1]);\r\n      }\r\n    });\r\n  } else {\r\n    var ratio = e.frameState.pixelRatio;\r\n    e.context.rect(pts[0][0]*ratio,pts[0][1]*ratio,pts[1][0]*ratio,pts[1][1]*ratio);\r\n  }\r\n};\r\n\r\n/** @private\r\n*/\r\nol_control_Swipe.prototype.precomposeLeft = function(e) {\r\n  var ctx = e.context;\r\n  var size = e.frameState.size;\r\n  ctx.save();\r\n  ctx.beginPath();\r\n  var pts = [[0,0],[size[0],size[1]]];\r\n  if (this.get('orientation') === \"vertical\") {\r\n    pts[1] = [\r\n      size[0]*this.get('position'), \r\n      size[1]\r\n    ];\r\n  } else {\r\n    pts[1] = [\r\n      size[0],\r\n      size[1]*this.get('position')\r\n    ];\r\n  }\r\n  this._drawRect(e, pts);\r\n  ctx.clip();\r\n};\r\n\r\n/** @private\r\n*/\r\nol_control_Swipe.prototype.precomposeRight = function(e) {\r\n  var ctx = e.context;\r\n  var size = e.frameState.size;\r\n  ctx.save();\r\n  ctx.beginPath();\r\n  var pts = [[0,0],[size[0],size[1]]];\r\n  if (this.get('orientation') === \"vertical\") {\r\n    pts[0] = [\r\n      size[0]*this.get('position'), \r\n      0\r\n    ];\r\n  } else {\r\n    pts[0] = [\r\n      0,\r\n      size[1]*this.get('position')\r\n    ]\r\n  }\r\n  this._drawRect(e, pts);\r\n  ctx.clip();\r\n};\r\n\r\n/** @private\r\n*/\r\nol_control_Swipe.prototype.postcompose = function(e) {\r\n  // restore context when decluttering is done (ol>=6)\r\n  // https://github.com/openlayers/openlayers/issues/10096\r\n  if (e.target.getClassName && e.target.getClassName()!=='ol-layer' && e.target.get('declutter')) {\r\n    setTimeout(function () {\r\n      e.context.restore();\r\n    }, 0);\r\n  } else {\r\n    e.context.restore();\r\n  }\r\n};\r\n\r\nexport default ol_control_Swipe\r\n","/**\n * @module ol/Disposable\n */\n\n/**\n * @classdesc\n * Objects that need to clean up after themselves.\n */\nvar Disposable = function Disposable() {\n  /**\n   * The object has already been disposed.\n   * @type {boolean}\n   * @private\n   */\n  this.disposed_ = false;\n};\n\n/**\n * Clean up.\n */\nDisposable.prototype.dispose = function dispose () {\n  if (!this.disposed_) {\n    this.disposed_ = true;\n    this.disposeInternal();\n  }\n};\n\n/**\n * Extension point for disposable objects.\n * @protected\n */\nDisposable.prototype.disposeInternal = function disposeInternal () {};\n\nexport default Disposable;\n\n//# sourceMappingURL=Disposable.js.map","/**\n * @module ol/TileRange\n */\n\n/**\n * A representation of a contiguous block of tiles.  A tile range is specified\n * by its min/max tile coordinates and is inclusive of coordinates.\n */\nvar TileRange = function TileRange(minX, maxX, minY, maxY) {\n\n  /**\n   * @type {number}\n   */\n  this.minX = minX;\n\n  /**\n   * @type {number}\n   */\n  this.maxX = maxX;\n\n  /**\n   * @type {number}\n   */\n  this.minY = minY;\n\n  /**\n   * @type {number}\n   */\n  this.maxY = maxY;\n\n};\n\n/**\n * @param {import(\"./tilecoord.js\").TileCoord} tileCoord Tile coordinate.\n * @return {boolean} Contains tile coordinate.\n */\nTileRange.prototype.contains = function contains (tileCoord) {\n  return this.containsXY(tileCoord[1], tileCoord[2]);\n};\n\n/**\n * @param {TileRange} tileRange Tile range.\n * @return {boolean} Contains.\n */\nTileRange.prototype.containsTileRange = function containsTileRange (tileRange) {\n  return this.minX <= tileRange.minX && tileRange.maxX <= this.maxX &&\n     this.minY <= tileRange.minY && tileRange.maxY <= this.maxY;\n};\n\n/**\n * @param {number} x Tile coordinate x.\n * @param {number} y Tile coordinate y.\n * @return {boolean} Contains coordinate.\n */\nTileRange.prototype.containsXY = function containsXY (x, y) {\n  return this.minX <= x && x <= this.maxX && this.minY <= y && y <= this.maxY;\n};\n\n/**\n * @param {TileRange} tileRange Tile range.\n * @return {boolean} Equals.\n */\nTileRange.prototype.equals = function equals (tileRange) {\n  return this.minX == tileRange.minX && this.minY == tileRange.minY &&\n     this.maxX == tileRange.maxX && this.maxY == tileRange.maxY;\n};\n\n/**\n * @param {TileRange} tileRange Tile range.\n */\nTileRange.prototype.extend = function extend (tileRange) {\n  if (tileRange.minX < this.minX) {\n    this.minX = tileRange.minX;\n  }\n  if (tileRange.maxX > this.maxX) {\n    this.maxX = tileRange.maxX;\n  }\n  if (tileRange.minY < this.minY) {\n    this.minY = tileRange.minY;\n  }\n  if (tileRange.maxY > this.maxY) {\n    this.maxY = tileRange.maxY;\n  }\n};\n\n/**\n * @return {number} Height.\n */\nTileRange.prototype.getHeight = function getHeight () {\n  return this.maxY - this.minY + 1;\n};\n\n/**\n * @return {import(\"./size.js\").Size} Size.\n */\nTileRange.prototype.getSize = function getSize () {\n  return [this.getWidth(), this.getHeight()];\n};\n\n/**\n * @return {number} Width.\n */\nTileRange.prototype.getWidth = function getWidth () {\n  return this.maxX - this.minX + 1;\n};\n\n/**\n * @param {TileRange} tileRange Tile range.\n * @return {boolean} Intersects.\n */\nTileRange.prototype.intersects = function intersects (tileRange) {\n  return this.minX <= tileRange.maxX &&\n     this.maxX >= tileRange.minX &&\n     this.minY <= tileRange.maxY &&\n     this.maxY >= tileRange.minY;\n};\n\n\n/**\n * @param {number} minX Minimum X.\n * @param {number} maxX Maximum X.\n * @param {number} minY Minimum Y.\n * @param {number} maxY Maximum Y.\n * @param {TileRange=} tileRange TileRange.\n * @return {TileRange} Tile range.\n */\nexport function createOrUpdate(minX, maxX, minY, maxY, tileRange) {\n  if (tileRange !== undefined) {\n    tileRange.minX = minX;\n    tileRange.maxX = maxX;\n    tileRange.minY = minY;\n    tileRange.maxY = maxY;\n    return tileRange;\n  } else {\n    return new TileRange(minX, maxX, minY, maxY);\n  }\n}\n\n\nexport default TileRange;\n\n//# sourceMappingURL=TileRange.js.map","/**\n * @module ol/MapBrowserPointerEvent\n */\nimport MapBrowserEvent from './MapBrowserEvent.js';\n\nvar MapBrowserPointerEvent = /*@__PURE__*/(function (MapBrowserEvent) {\n  function MapBrowserPointerEvent(type, map, pointerEvent, opt_dragging, opt_frameState) {\n\n    MapBrowserEvent.call(this, type, map, pointerEvent.originalEvent, opt_dragging, opt_frameState);\n\n    /**\n     * @const\n     * @type {import(\"./pointer/PointerEvent.js\").default}\n     */\n    this.pointerEvent = pointerEvent;\n\n  }\n\n  if ( MapBrowserEvent ) MapBrowserPointerEvent.__proto__ = MapBrowserEvent;\n  MapBrowserPointerEvent.prototype = Object.create( MapBrowserEvent && MapBrowserEvent.prototype );\n  MapBrowserPointerEvent.prototype.constructor = MapBrowserPointerEvent;\n\n  return MapBrowserPointerEvent;\n}(MapBrowserEvent));\n\nexport default MapBrowserPointerEvent;\n\n//# sourceMappingURL=MapBrowserPointerEvent.js.map","/**\n * @module ol/Object\n */\nimport {getUid} from './util.js';\nimport ObjectEventType from './ObjectEventType.js';\nimport Observable from './Observable.js';\nimport Event from './events/Event.js';\nimport {assign} from './obj.js';\n\n\n/**\n * @classdesc\n * Events emitted by {@link module:ol/Object~BaseObject} instances are instances of this type.\n */\nexport var ObjectEvent = /*@__PURE__*/(function (Event) {\n  function ObjectEvent(type, key, oldValue) {\n    Event.call(this, type);\n\n    /**\n     * The name of the property whose value is changing.\n     * @type {string}\n     * @api\n     */\n    this.key = key;\n\n    /**\n     * The old value. To get the new value use `e.target.get(e.key)` where\n     * `e` is the event object.\n     * @type {*}\n     * @api\n     */\n    this.oldValue = oldValue;\n\n  }\n\n  if ( Event ) ObjectEvent.__proto__ = Event;\n  ObjectEvent.prototype = Object.create( Event && Event.prototype );\n  ObjectEvent.prototype.constructor = ObjectEvent;\n\n  return ObjectEvent;\n}(Event));\n\n\n/**\n * @classdesc\n * Abstract base class; normally only used for creating subclasses and not\n * instantiated in apps.\n * Most non-trivial classes inherit from this.\n *\n * This extends {@link module:ol/Observable} with observable\n * properties, where each property is observable as well as the object as a\n * whole.\n *\n * Classes that inherit from this have pre-defined properties, to which you can\n * add your owns. The pre-defined properties are listed in this documentation as\n * 'Observable Properties', and have their own accessors; for example,\n * {@link module:ol/Map~Map} has a `target` property, accessed with\n * `getTarget()` and changed with `setTarget()`. Not all properties are however\n * settable. There are also general-purpose accessors `get()` and `set()`. For\n * example, `get('target')` is equivalent to `getTarget()`.\n *\n * The `set` accessors trigger a change event, and you can monitor this by\n * registering a listener. For example, {@link module:ol/View~View} has a\n * `center` property, so `view.on('change:center', function(evt) {...});` would\n * call the function whenever the value of the center property changes. Within\n * the function, `evt.target` would be the view, so `evt.target.getCenter()`\n * would return the new center.\n *\n * You can add your own observable properties with\n * `object.set('prop', 'value')`, and retrieve that with `object.get('prop')`.\n * You can listen for changes on that property value with\n * `object.on('change:prop', listener)`. You can get a list of all\n * properties with {@link module:ol/Object~BaseObject#getProperties}.\n *\n * Note that the observable properties are separate from standard JS properties.\n * You can, for example, give your map object a title with\n * `map.title='New title'` and with `map.set('title', 'Another title')`. The\n * first will be a `hasOwnProperty`; the second will appear in\n * `getProperties()`. Only the second is observable.\n *\n * Properties can be deleted by using the unset method. E.g.\n * object.unset('foo').\n *\n * @fires ObjectEvent\n * @api\n */\nvar BaseObject = /*@__PURE__*/(function (Observable) {\n  function BaseObject(opt_values) {\n    Observable.call(this);\n\n    // Call {@link module:ol/util~getUid} to ensure that the order of objects' ids is\n    // the same as the order in which they were created.  This also helps to\n    // ensure that object properties are always added in the same order, which\n    // helps many JavaScript engines generate faster code.\n    getUid(this);\n\n    /**\n     * @private\n     * @type {!Object<string, *>}\n     */\n    this.values_ = {};\n\n    if (opt_values !== undefined) {\n      this.setProperties(opt_values);\n    }\n  }\n\n  if ( Observable ) BaseObject.__proto__ = Observable;\n  BaseObject.prototype = Object.create( Observable && Observable.prototype );\n  BaseObject.prototype.constructor = BaseObject;\n\n  /**\n   * Gets a value.\n   * @param {string} key Key name.\n   * @return {*} Value.\n   * @api\n   */\n  BaseObject.prototype.get = function get (key) {\n    var value;\n    if (this.values_.hasOwnProperty(key)) {\n      value = this.values_[key];\n    }\n    return value;\n  };\n\n  /**\n   * Get a list of object property names.\n   * @return {Array<string>} List of property names.\n   * @api\n   */\n  BaseObject.prototype.getKeys = function getKeys () {\n    return Object.keys(this.values_);\n  };\n\n  /**\n   * Get an object of all property names and values.\n   * @return {Object<string, *>} Object.\n   * @api\n   */\n  BaseObject.prototype.getProperties = function getProperties () {\n    return assign({}, this.values_);\n  };\n\n  /**\n   * @param {string} key Key name.\n   * @param {*} oldValue Old value.\n   */\n  BaseObject.prototype.notify = function notify (key, oldValue) {\n    var eventType;\n    eventType = getChangeEventType(key);\n    this.dispatchEvent(new ObjectEvent(eventType, key, oldValue));\n    eventType = ObjectEventType.PROPERTYCHANGE;\n    this.dispatchEvent(new ObjectEvent(eventType, key, oldValue));\n  };\n\n  /**\n   * Sets a value.\n   * @param {string} key Key name.\n   * @param {*} value Value.\n   * @param {boolean=} opt_silent Update without triggering an event.\n   * @api\n   */\n  BaseObject.prototype.set = function set (key, value, opt_silent) {\n    if (opt_silent) {\n      this.values_[key] = value;\n    } else {\n      var oldValue = this.values_[key];\n      this.values_[key] = value;\n      if (oldValue !== value) {\n        this.notify(key, oldValue);\n      }\n    }\n  };\n\n  /**\n   * Sets a collection of key-value pairs.  Note that this changes any existing\n   * properties and adds new ones (it does not remove any existing properties).\n   * @param {Object<string, *>} values Values.\n   * @param {boolean=} opt_silent Update without triggering an event.\n   * @api\n   */\n  BaseObject.prototype.setProperties = function setProperties (values, opt_silent) {\n    for (var key in values) {\n      this.set(key, values[key], opt_silent);\n    }\n  };\n\n  /**\n   * Unsets a property.\n   * @param {string} key Key name.\n   * @param {boolean=} opt_silent Unset without triggering an event.\n   * @api\n   */\n  BaseObject.prototype.unset = function unset (key, opt_silent) {\n    if (key in this.values_) {\n      var oldValue = this.values_[key];\n      delete this.values_[key];\n      if (!opt_silent) {\n        this.notify(key, oldValue);\n      }\n    }\n  };\n\n  return BaseObject;\n}(Observable));\n\n\n/**\n * @type {Object<string, string>}\n */\nvar changeEventTypeCache = {};\n\n\n/**\n * @param {string} key Key name.\n * @return {string} Change name.\n */\nexport function getChangeEventType(key) {\n  return changeEventTypeCache.hasOwnProperty(key) ?\n    changeEventTypeCache[key] :\n    (changeEventTypeCache[key] = 'change:' + key);\n}\n\n\nexport default BaseObject;\n\n//# sourceMappingURL=Object.js.map","/**\n * @module ol/Collection\n */\nimport AssertionError from './AssertionError.js';\nimport CollectionEventType from './CollectionEventType.js';\nimport BaseObject from './Object.js';\nimport Event from './events/Event.js';\n\n\n/**\n * @enum {string}\n * @private\n */\nvar Property = {\n  LENGTH: 'length'\n};\n\n\n/**\n * @classdesc\n * Events emitted by {@link module:ol/Collection~Collection} instances are instances of this\n * type.\n */\nexport var CollectionEvent = /*@__PURE__*/(function (Event) {\n  function CollectionEvent(type, opt_element) {\n    Event.call(this, type);\n\n    /**\n     * The element that is added to or removed from the collection.\n     * @type {*}\n     * @api\n     */\n    this.element = opt_element;\n\n  }\n\n  if ( Event ) CollectionEvent.__proto__ = Event;\n  CollectionEvent.prototype = Object.create( Event && Event.prototype );\n  CollectionEvent.prototype.constructor = CollectionEvent;\n\n  return CollectionEvent;\n}(Event));\n\n\n/**\n * @typedef {Object} Options\n * @property {boolean} [unique=false] Disallow the same item from being added to\n * the collection twice.\n */\n\n/**\n * @classdesc\n * An expanded version of standard JS Array, adding convenience methods for\n * manipulation. Add and remove changes to the Collection trigger a Collection\n * event. Note that this does not cover changes to the objects _within_ the\n * Collection; they trigger events on the appropriate object, not on the\n * Collection as a whole.\n *\n * @fires CollectionEvent\n *\n * @template T\n * @api\n */\nvar Collection = /*@__PURE__*/(function (BaseObject) {\n  function Collection(opt_array, opt_options) {\n\n    BaseObject.call(this);\n\n    var options = opt_options || {};\n\n    /**\n     * @private\n     * @type {boolean}\n     */\n    this.unique_ = !!options.unique;\n\n    /**\n     * @private\n     * @type {!Array<T>}\n     */\n    this.array_ = opt_array ? opt_array : [];\n\n    if (this.unique_) {\n      for (var i = 0, ii = this.array_.length; i < ii; ++i) {\n        this.assertUnique_(this.array_[i], i);\n      }\n    }\n\n    this.updateLength_();\n\n  }\n\n  if ( BaseObject ) Collection.__proto__ = BaseObject;\n  Collection.prototype = Object.create( BaseObject && BaseObject.prototype );\n  Collection.prototype.constructor = Collection;\n\n  /**\n   * Remove all elements from the collection.\n   * @api\n   */\n  Collection.prototype.clear = function clear () {\n    while (this.getLength() > 0) {\n      this.pop();\n    }\n  };\n\n  /**\n   * Add elements to the collection.  This pushes each item in the provided array\n   * to the end of the collection.\n   * @param {!Array<T>} arr Array.\n   * @return {Collection<T>} This collection.\n   * @api\n   */\n  Collection.prototype.extend = function extend (arr) {\n    for (var i = 0, ii = arr.length; i < ii; ++i) {\n      this.push(arr[i]);\n    }\n    return this;\n  };\n\n  /**\n   * Iterate over each element, calling the provided callback.\n   * @param {function(T, number, Array<T>): *} f The function to call\n   *     for every element. This function takes 3 arguments (the element, the\n   *     index and the array). The return value is ignored.\n   * @api\n   */\n  Collection.prototype.forEach = function forEach (f) {\n    var array = this.array_;\n    for (var i = 0, ii = array.length; i < ii; ++i) {\n      f(array[i], i, array);\n    }\n  };\n\n  /**\n   * Get a reference to the underlying Array object. Warning: if the array\n   * is mutated, no events will be dispatched by the collection, and the\n   * collection's \"length\" property won't be in sync with the actual length\n   * of the array.\n   * @return {!Array<T>} Array.\n   * @api\n   */\n  Collection.prototype.getArray = function getArray () {\n    return this.array_;\n  };\n\n  /**\n   * Get the element at the provided index.\n   * @param {number} index Index.\n   * @return {T} Element.\n   * @api\n   */\n  Collection.prototype.item = function item (index) {\n    return this.array_[index];\n  };\n\n  /**\n   * Get the length of this collection.\n   * @return {number} The length of the array.\n   * @observable\n   * @api\n   */\n  Collection.prototype.getLength = function getLength () {\n    return this.get(Property.LENGTH);\n  };\n\n  /**\n   * Insert an element at the provided index.\n   * @param {number} index Index.\n   * @param {T} elem Element.\n   * @api\n   */\n  Collection.prototype.insertAt = function insertAt (index, elem) {\n    if (this.unique_) {\n      this.assertUnique_(elem);\n    }\n    this.array_.splice(index, 0, elem);\n    this.updateLength_();\n    this.dispatchEvent(\n      new CollectionEvent(CollectionEventType.ADD, elem));\n  };\n\n  /**\n   * Remove the last element of the collection and return it.\n   * Return `undefined` if the collection is empty.\n   * @return {T|undefined} Element.\n   * @api\n   */\n  Collection.prototype.pop = function pop () {\n    return this.removeAt(this.getLength() - 1);\n  };\n\n  /**\n   * Insert the provided element at the end of the collection.\n   * @param {T} elem Element.\n   * @return {number} New length of the collection.\n   * @api\n   */\n  Collection.prototype.push = function push (elem) {\n    if (this.unique_) {\n      this.assertUnique_(elem);\n    }\n    var n = this.getLength();\n    this.insertAt(n, elem);\n    return this.getLength();\n  };\n\n  /**\n   * Remove the first occurrence of an element from the collection.\n   * @param {T} elem Element.\n   * @return {T|undefined} The removed element or undefined if none found.\n   * @api\n   */\n  Collection.prototype.remove = function remove (elem) {\n    var arr = this.array_;\n    for (var i = 0, ii = arr.length; i < ii; ++i) {\n      if (arr[i] === elem) {\n        return this.removeAt(i);\n      }\n    }\n    return undefined;\n  };\n\n  /**\n   * Remove the element at the provided index and return it.\n   * Return `undefined` if the collection does not contain this index.\n   * @param {number} index Index.\n   * @return {T|undefined} Value.\n   * @api\n   */\n  Collection.prototype.removeAt = function removeAt (index) {\n    var prev = this.array_[index];\n    this.array_.splice(index, 1);\n    this.updateLength_();\n    this.dispatchEvent(new CollectionEvent(CollectionEventType.REMOVE, prev));\n    return prev;\n  };\n\n  /**\n   * Set the element at the provided index.\n   * @param {number} index Index.\n   * @param {T} elem Element.\n   * @api\n   */\n  Collection.prototype.setAt = function setAt (index, elem) {\n    var n = this.getLength();\n    if (index < n) {\n      if (this.unique_) {\n        this.assertUnique_(elem, index);\n      }\n      var prev = this.array_[index];\n      this.array_[index] = elem;\n      this.dispatchEvent(\n        new CollectionEvent(CollectionEventType.REMOVE, prev));\n      this.dispatchEvent(\n        new CollectionEvent(CollectionEventType.ADD, elem));\n    } else {\n      for (var j = n; j < index; ++j) {\n        this.insertAt(j, undefined);\n      }\n      this.insertAt(index, elem);\n    }\n  };\n\n  /**\n   * @private\n   */\n  Collection.prototype.updateLength_ = function updateLength_ () {\n    this.set(Property.LENGTH, this.array_.length);\n  };\n\n  /**\n   * @private\n   * @param {T} elem Element.\n   * @param {number=} opt_except Optional index to ignore.\n   */\n  Collection.prototype.assertUnique_ = function assertUnique_ (elem, opt_except) {\n    for (var i = 0, ii = this.array_.length; i < ii; ++i) {\n      if (this.array_[i] === elem && i !== opt_except) {\n        throw new AssertionError(58);\n      }\n    }\n  };\n\n  return Collection;\n}(BaseObject));\n\n\nexport default Collection;\n\n//# sourceMappingURL=Collection.js.map","/**\n * @module ol/ImageBase\n */\nimport {abstract} from './util.js';\nimport EventTarget from './events/Target.js';\nimport EventType from './events/EventType.js';\n\n/**\n * @abstract\n */\nvar ImageBase = /*@__PURE__*/(function (EventTarget) {\n  function ImageBase(extent, resolution, pixelRatio, state) {\n\n    EventTarget.call(this);\n\n    /**\n     * @protected\n     * @type {import(\"./extent.js\").Extent}\n     */\n    this.extent = extent;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.pixelRatio_ = pixelRatio;\n\n    /**\n     * @protected\n     * @type {number|undefined}\n     */\n    this.resolution = resolution;\n\n    /**\n     * @protected\n     * @type {import(\"./ImageState.js\").default}\n     */\n    this.state = state;\n\n  }\n\n  if ( EventTarget ) ImageBase.__proto__ = EventTarget;\n  ImageBase.prototype = Object.create( EventTarget && EventTarget.prototype );\n  ImageBase.prototype.constructor = ImageBase;\n\n  /**\n   * @protected\n   */\n  ImageBase.prototype.changed = function changed () {\n    this.dispatchEvent(EventType.CHANGE);\n  };\n\n  /**\n   * @return {import(\"./extent.js\").Extent} Extent.\n   */\n  ImageBase.prototype.getExtent = function getExtent () {\n    return this.extent;\n  };\n\n  /**\n   * @abstract\n   * @return {HTMLCanvasElement|HTMLImageElement|HTMLVideoElement} Image.\n   */\n  ImageBase.prototype.getImage = function getImage () {\n    return abstract();\n  };\n\n  /**\n   * @return {number} PixelRatio.\n   */\n  ImageBase.prototype.getPixelRatio = function getPixelRatio () {\n    return this.pixelRatio_;\n  };\n\n  /**\n   * @return {number} Resolution.\n   */\n  ImageBase.prototype.getResolution = function getResolution () {\n    return /** @type {number} */ (this.resolution);\n  };\n\n  /**\n   * @return {import(\"./ImageState.js\").default} State.\n   */\n  ImageBase.prototype.getState = function getState () {\n    return this.state;\n  };\n\n  /**\n   * Load not yet loaded URI.\n   * @abstract\n   */\n  ImageBase.prototype.load = function load () {\n    abstract();\n  };\n\n  return ImageBase;\n}(EventTarget));\n\n\nexport default ImageBase;\n\n//# sourceMappingURL=ImageBase.js.map","/**\n * @module ol/ImageCanvas\n */\nimport ImageBase from './ImageBase.js';\nimport ImageState from './ImageState.js';\n\n\n/**\n * A function that is called to trigger asynchronous canvas drawing.  It is\n * called with a \"done\" callback that should be called when drawing is done.\n * If any error occurs during drawing, the \"done\" callback should be called with\n * that error.\n *\n * @typedef {function(function(Error=))} Loader\n */\n\n\nvar ImageCanvas = /*@__PURE__*/(function (ImageBase) {\n  function ImageCanvas(extent, resolution, pixelRatio, canvas, opt_loader) {\n\n    var state = opt_loader !== undefined ? ImageState.IDLE : ImageState.LOADED;\n\n    ImageBase.call(this, extent, resolution, pixelRatio, state);\n\n    /**\n     * Optional canvas loader function.\n     * @type {?Loader}\n     * @private\n     */\n    this.loader_ = opt_loader !== undefined ? opt_loader : null;\n\n    /**\n     * @private\n     * @type {HTMLCanvasElement}\n     */\n    this.canvas_ = canvas;\n\n    /**\n     * @private\n     * @type {Error}\n     */\n    this.error_ = null;\n\n  }\n\n  if ( ImageBase ) ImageCanvas.__proto__ = ImageBase;\n  ImageCanvas.prototype = Object.create( ImageBase && ImageBase.prototype );\n  ImageCanvas.prototype.constructor = ImageCanvas;\n\n  /**\n   * Get any error associated with asynchronous rendering.\n   * @return {Error} Any error that occurred during rendering.\n   */\n  ImageCanvas.prototype.getError = function getError () {\n    return this.error_;\n  };\n\n  /**\n   * Handle async drawing complete.\n   * @param {Error=} err Any error during drawing.\n   * @private\n   */\n  ImageCanvas.prototype.handleLoad_ = function handleLoad_ (err) {\n    if (err) {\n      this.error_ = err;\n      this.state = ImageState.ERROR;\n    } else {\n      this.state = ImageState.LOADED;\n    }\n    this.changed();\n  };\n\n  /**\n   * @inheritDoc\n   */\n  ImageCanvas.prototype.load = function load () {\n    if (this.state == ImageState.IDLE) {\n      this.state = ImageState.LOADING;\n      this.changed();\n      this.loader_(this.handleLoad_.bind(this));\n    }\n  };\n\n  /**\n   * @return {HTMLCanvasElement} Canvas element.\n   */\n  ImageCanvas.prototype.getImage = function getImage () {\n    return this.canvas_;\n  };\n\n  return ImageCanvas;\n}(ImageBase));\n\n\nexport default ImageCanvas;\n\n//# sourceMappingURL=ImageCanvas.js.map"],"sourceRoot":""}