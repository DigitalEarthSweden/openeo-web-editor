{"version":3,"sources":["webpack:///./src/components/TextEditor.vue?dbe3","webpack:///src/components/TextEditor.vue","webpack:///./src/components/TextEditor.vue?9144","webpack:///./src/components/TextEditor.vue","webpack:///./src/formats/format.js","webpack:///./src/components/WorkPanelMixin.js","webpack:///./src/components/VisualEditor.vue?413d","webpack:///./src/components/TextEditor.vue?e4e1","webpack:///./src/components/Viewer.vue?b388","webpack:///./src/formats/geotiff.js","webpack:///./src/components/maps/projManager.js","webpack:///./src/export/exporter.js","webpack:///./src/components/IDE.vue?dcbd","webpack:///./src/components/JobPanel.vue?4b24","webpack:///./src/components/VisualEditor.vue?9fc9","webpack:///src/components/VisualEditor.vue","webpack:///./src/components/VisualEditor.vue?fdb7","webpack:///./src/components/VisualEditor.vue","webpack:///./src/components/ServicePanel.vue?c8eb","webpack:///./src/components/UserWorkspace.vue?13f5","webpack:///./src/components/TextEditor.vue?9964","webpack:///./src/export/javascript.js","webpack:///./src/formats/json.js","webpack:///./src/components/IDE.vue?32f3","webpack:///./src/components/UserMenu.vue?f5b8","webpack:///src/components/UserMenu.vue","webpack:///./src/components/UserMenu.vue?194a","webpack:///./src/components/UserMenu.vue","webpack:///./src/components/UserWorkspace.vue?b9d8","webpack:///./src/components/JobPanel.vue?eb14","webpack:///src/components/JobPanel.vue","webpack:///./src/components/JobPanel.vue?7f35","webpack:///./src/components/JobPanel.vue","webpack:///./src/components/ServicePanel.vue?3f5b","webpack:///src/components/ServicePanel.vue","webpack:///./src/components/ServicePanel.vue?7b25","webpack:///./src/components/ServicePanel.vue","webpack:///src/components/UserWorkspace.vue","webpack:///./src/components/UserWorkspace.vue?dec6","webpack:///./src/components/UserWorkspace.vue","webpack:///./src/components/Viewer.vue?c5b2","webpack:///./src/formats/browserImage.js","webpack:///./src/formats/csv.js","webpack:///./src/formats/native.js","webpack:///./src/formats/tsv.js","webpack:///./src/formats/formatRegistry.js","webpack:///src/components/Viewer.vue","webpack:///./src/components/Viewer.vue?c294","webpack:///./src/components/Viewer.vue","webpack:///src/components/IDE.vue","webpack:///./src/components/IDE.vue?bb34","webpack:///./src/components/IDE.vue","webpack:///./src/components/UserMenu.vue?b11a"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","class","languageString","_v","_s","title","_e","attrs","on","confirmClear","_t","canUndo","$event","editor","undo","canRedo","redo","element","id","staticRenderFns","window","name","components","FullscreenButton","props","editable","type","default","value","required","language","placeholder","computed","editorOptions","indentUnit","lineNumbers","indentWithTabs","matchBrackets","autoCloseBrackets","readOnly","options","data","emitValue","watch","mounted","methods","updateState","commit","pg","emit","insert","text","updateContent","insertProcess","Utils","component","Format","constructor","asset","Object","assign","context","setContext","getContext","getUrl","href","canGroup","isBinary","download","filename","tempLink","document","createElement","style","display","setAttribute","makeFileName","body","appendChild","click","removeChild","connection","loaded","fetchData","blob","url","startsWith","response","fetch","promise","Promise","resolve","reject","reader","FileReader","onload","event","target","result","onerror","readAsBinaryString","readAsText","parseData","SupportedFormat","icon","events","super","UnsupportedFormat","namespace","singular","plural","loadInitially","DataTable","columns","syncTimer","lastSyncTime","updateData","beforeDestroy","stopSyncTimer","mapState","mapGetters","mapActions","getTable","$refs","table","onShow","startSyncTimer","onHide","supportsList","setInterval","getSyncInterval","clearInterval","$config","dataRefreshInterval","obj","callback","old","updated","read","error","exception","nextSyncTime","Date","now","supportsCreate","isUpdate","length","setNoData","list","console","log","GDAL_MIN","GDAL_MAX","GDAL_NAME","GeoTIFF","stac","removableLayers","bands","nodata","undefined","img","projection","extent","parseMetadata","stacHasExtent","geometry","ProjManager","addFromStac","parseNodata","Array","isArray","forEach","band","i","setBandInfo","isObject","statistics","min","minimum","max","maximum","find","code","tiff","tiffFromUrl","getImage","getSamplesPerPixel","getGDALMetadata","parseFloat","getGDALNoData","geoKeys","ProjectedCSTypeGeoKey","GeographicTypeGeoKey","ProjLinearUnitsGeoKey","GeogAngularUnitsGeoKey","get","units","unitsFromCode","Projection","bbox","getBoundingBox","toUserExtent","warn","push","getNoData","getBands","getProjection","getExtent","_load","meta","proj4","defs","register","properties","add","crs","match","toUpperCase","substr","Number","isInteger","String","proj","ProcessImpl","BaseProcess","process","exporter","node","generateFunction","Exporter","ProcessGraph","registry","indent","fnCounter","allowEmpty","fillUndefinedParameters","createProcessGraphInstance","processRegistry","getJsonSchemaValidator","copyProcessGraphInstanceProperties","createProcessInstance","isKeyword","keyword","getKeywords","includes","toLowerCase","comment","generateImports","generateConnection","generateAuthentication","generateBuilder","generateMetadata","generateMissingParameter","generateFunctionParams","parameters","map","p","e","generateResult","makeNull","makeBoolean","val","makeArray","arr","join","makeObject","mapObject","key","makeString","str","JSON","stringify","makeNumber","num","mapObjectValues","hasComment","newLine","generateMetadataEntry","args","onExporter","filter","newArgs","from_node","var","from_parameter","fnName","resolveArguments","getArgument","getCallbackParameters","execute","replacement","generateCallback","ordered","arguments","async","resolveCallback","orderArguments","getProcessGraph","getProcess","orderedArgs","param","optional","definedValueFound","pop","prefix","getTab","addCode","tabs","repeat","lines","trim","split","line","count","getServerUrl","params","getProcessParameters","getResultNode","validate","reset","executeNodes","getStartNodes","isMath","_isMath","this$1","ref","blocks","hasSelection","deleteSelected","parent","editProcess","addParameter","highlightFormula","showExpressionModal","compactMode","toggleCompact","perfectScale","visualEditor","enabled","isFullScreen","showDiscoveryToolbar","onDrop","allowDrop","processes","collections","parentSchema","errorHandler","editParameter","openArgumentEditor","compact","selectionChanged","historyChanged","mixins","ModelBuilder","DiscoveryToolbar","defaultValue","formula","immediate","handler","getNameField","description","label","schema","pattern","getDescriptionField","subtype","getOptionalField","getDefaultField","toggledBy","getExperimentalField","getDeprecatedField","getSchemaField","minItems","items","info","additionalProperties","message","http","enum","returns","rel","newData","summary","categories","experimental","deprecated","examples","links","process_graph","js","save","openArgumentEditorForNode","processSpec","selectParameterName","clear","KEYWORDS","JavaScript","generateFormula","parse","parsed","variable","builderName","getParent","generateArguments","processId","process_id","arg","parameter","paramName","toFormulaString","escaped","toCode","resultNode","nodeToFormula","getArrayElementPlaceholder","getArgumentType","getRawArgument","index","findIndex","parentOperator","arrayElement","operator","Formula","reverseOperatorMapping","isArrayData","arrayOperatorMapping","convertValue","refNode","getNode","Error","argList","v","strongOps","weakOps","JSON_","isGeoJson","detectGeoJson","authenticated","isAuthenticated","showHelp","showServerInfo","resized","splitpaneSizeH","splitpaneSizeV","contextTitle","updateEditor","scopedSlots","_u","fn","importProcess","directives","rawName","expression","hasProcess","saveProcess","exportCode","validateProcess","proxy","login","empty","showViewer","onViewerEmpty","_m","userName","budget","storageUsedPercent","profileLink","settingsLink","preventDefault","logout","apply","registerLink","passwordLink","serverUrl","disconnect","userLinks","_l","link","userInfo","default_plan","paymentLink","formatMegabyte","storageUsed","storage","quota","serverLinks","hasStorage","logoutUser","resetEditor","showJobInfo","row","supports","estimateJob","isJobInactive","editMetadata","showInEditor","deleteJob","queueJob","isJobActive","cancelJob","mayHaveResults","downloadResults","viewResults","showLogs","slot","createJobFromScript","executeProcess","WorkPanelMixinInstance","WorkPanelMixin","primaryKey","hide","computedValue","format","edit","status","stylable","created","sort","actions","filterable","watchers","jobUpdater","runId","deep","timeout","buttons","action","abortController","toast","level","jobCreated","getTitleField","getBillingPlanField","getBudgetField","normalizeToDefaultData","executeWatchers","job","estimate","replaceProcess","updateTitle","serviceInfo","deleteService","isMapServiceSupported","viewService","createServiceFromScript","serviceCreated","getServiceTypeField","getEnabledField","getConfigField","service","toggleEnabled","FilePanel","JobPanel","CustomProcessPanel","ServicePanel","Tabs","Tab","showJobs","showServices","showCustomProcesses","showFiles","tab","onTabsEmpty","logViewerIcons","isCollectionPreview","_g","_b","tag","isFormat","BrowserImage","Image","crossOrigin","src","CSV","delim","array","parseCSV","col","isNaN","quote","c","cc","nc","NativeType","TSV","FormatRegistry","createFilesFromSTAC","resource","files","values","assets","createFileFromAsset","file","createFilesFromBlob","Blob","stac_version","URL","createObjectURL","mime","contentType","extension","DataViewer","TableViewer","ImageViewer","LogViewer","MapViewer","tabTitleCounter","tabIdCounter","nextTabId","collection","preview","showWebService","faIcon","selectTab","closeTabWithLogs","closeTab","showSyncResults","showJobResults","showMapViewer","uniqueTitle","makeTitle","Editor","Logo","Viewer","UserMenu","UserWorkspace","Splitpanes","Pane","resizeListener","userInfoUpdater","supportsJobUpdate","supportsServiceUpdate","supportsUserProcessUpdate","saveSupported","validateSupported","errors","showDataForm"],"mappings":"kHAAA,IAAIA,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACE,YAAY,aAAaC,MAAMP,EAAIQ,gBAAgB,CAACJ,EAAG,MAAM,CAACE,YAAY,gBAAgB,CAAEN,EAAS,MAAEI,EAAG,SAAS,CAACJ,EAAIS,GAAGT,EAAIU,GAAGV,EAAIW,UAAUX,EAAIY,KAAKR,EAAG,MAAM,CAACE,YAAY,iBAAiB,CAACF,EAAG,OAAO,CAACE,YAAY,QAAQ,CAAEN,EAAY,SAAEI,EAAG,SAAS,CAACS,MAAM,CAAC,KAAO,SAAS,MAAQ,qCAAqCC,GAAG,CAAC,MAAQd,EAAIe,eAAe,CAACX,EAAG,IAAI,CAACE,YAAY,kBAAkBN,EAAIY,KAAKZ,EAAIgB,GAAG,iBAAiB,GAAIhB,EAAY,SAAEI,EAAG,OAAO,CAACE,YAAY,QAAQ,CAACF,EAAG,SAAS,CAACS,MAAM,CAAC,KAAO,SAAS,UAAYb,EAAIiB,QAAQ,MAAQ,sBAAsBH,GAAG,CAAC,MAAQ,SAASI,GAAQ,OAAOlB,EAAImB,OAAOC,UAAU,CAAChB,EAAG,IAAI,CAACE,YAAY,sBAAsBF,EAAG,SAAS,CAACS,MAAM,CAAC,KAAO,SAAS,UAAYb,EAAIqB,QAAQ,MAAQ,6BAA6BP,GAAG,CAAC,MAAQ,SAASI,GAAQ,OAAOlB,EAAImB,OAAOG,UAAU,CAAClB,EAAG,IAAI,CAACE,YAAY,sBAAsBN,EAAIgB,GAAG,iBAAiB,GAAGhB,EAAIY,KAAKR,EAAG,mBAAmB,CAACS,MAAM,CAAC,QAAUb,EAAIuB,WAAWvB,EAAIgB,GAAG,YAAY,KAAKZ,EAAG,MAAM,CAACE,YAAY,mBAAmBO,MAAM,CAAC,GAAKb,EAAIwB,SAC/mCC,EAAkB,G,wMC4CtBC,OAAOA,SAAWA,IAEH,OACfC,kBACAC,YACAC,yBAEAC,OACAN,UACAO,UACAC,aACAC,YAEAC,OACAC,aAEAC,UACAJ,YACAC,cAEAI,aACAL,YACAC,YAEAtB,OACAqB,cAGAM,aACA,iCACA9B,iBACA,sEAEA+B,gBACA,OACAC,aACAC,eACAC,kBACAC,iBACAC,qBACAC,wBACAR,8BAEA,4BACA,QACAS,qBACA,MACA,aACAA,uBACA,MACA,WACAA,4BACA,MACA,eACAA,yBACAA,kBACA,MACA,iBACAA,yBACA,MACA,WACA,mBACAA,0BACAA,sCACAA,UACA,MAEA,WAGAC,OACA,OACA9B,WACAI,WACAF,YACA6B,qBACAzB,eAGA0B,OACA,cACA,8BACA,qBACA,6BAGAV,gBACA,gCACA,+CAEA,uBAGAW,UACA,qEACA,iCACA,sCACA,gDAEA,qBAGA,iCACA,IAEA,8DACA,cAEA,SACA,yBAIA,uBAEAC,SACApC,eACA,gEACA,IACA,gBACA,kBAGAqC,cAEA,8DAEA,yCACA,sBACA,sBAEA,sBAEA,uBAEAC,SACA,6BACA,4BACA,WACA,6CACA,mBACA,MACA,oBACA,qBACA,8CAGA,OAFAC,eACAA,UACA,cAGA,uBACA,WACA,SACA,yBAGA,gBAEA,QACA,sBAGAC,QACA,iBACA,uBAEAC,eAIA,GAHA,sBACAC,aAEA,GAEA,+BACA,UACA,oCACA,wBACA,yCAIA,iCAGAC,gBACA,cACA,4BACA,mBACA,4BACA,2EAGA,gBAEA,MACA,WACA,2EACA,MACA,QACA,6BAIA,gBAEA,oCACA,oBAGAC,iBACA,IACA,yCACA,SACAC,6BCjQoV,I,kCCShVC,EAAY,eACd,EACA9D,EACA0B,GACA,EACA,KACA,WACA,MAIa,OAAAoC,E,2CCpBf,sHAEO,MAAMC,EAEZC,YAAYC,GACXC,OAAOC,OAAOjE,KAAM+D,GACpB/D,KAAKkE,QAAU,KAGhBC,WAAWD,GACVlE,KAAKkE,QAAUA,EAGhBE,aACC,OAAOpE,KAAKkE,QAGbG,SACC,OAAOrE,KAAKsE,KAGbC,WACC,OAAO,EAGRC,WACC,OAAO,EAGRC,SAASC,EAAW,MACnB,IAAIC,EAAWC,SAASC,cAAc,KACtCF,EAASG,MAAMC,QAAU,OACzBJ,EAASL,KAAOtE,KAAKqE,SACrBM,EAASK,aAAa,WAAYN,GAAuBf,OAAMsB,aAAa,SAAUjF,KAAK+B,OAC1D,qBAAtB4C,EAASF,UACnBE,E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BACA,OACAtV,QACAP,kBACAoV,mBACAD,qJACA3D,YACA6D,QACAhV,gBAEAC,aAGAwV,4CACA,wCACA,OACAvV,QACAP,OACAoV,QACAD,mDACAE,QACA,CACArW,yBACAqB,cACAmV,WAEA,CACAxW,4BACAqB,aACA0V,WACAC,OACA3V,cACAmV,eAMAnC,eACAzG,0BACA,8CACA,OACA,6BACA,CACArM,gBACAP,eACAmV,4FACAC,gBACA5D,YACA6D,QACAhV,gBAGA,2CACA,CACAE,mBACAP,kBACAoV,mBACA5D,YACA6D,QACAhV,aACA2V,OACA3V,iBAIA,0CACA,sCACA,CACA+U,mBACAD,qFACAc,SAEA,8FACA,0EACA,CACA1V,mBACAP,kBACAmV,8QACAC,eACA5D,YACA6D,QACAhV,cACA6V,sBACA7V,cACAG,UACA,WAEAwL,YACAmK,SACAnX,sBACAqB,eAEA8U,aACAnW,oBACAqB,cACAmV,sBAEAY,MACApX,yBACAqB,eACAgW,MACA,IACA,IACA,UAOA,CACA9V,iBACAP,gBACAoV,iBACAD,gIACA3D,YACA6D,QACAhV,aACA2V,OACA3V,cACAG,UACA,aAEAwL,YACAhN,OACAA,cACAqB,eAEArB,OACAA,oBACAqB,cACAmV,sBAEAxE,WACAhS,kBACAqB,cACAC,YAEAgW,SACAtX,0BAMA,CACAuB,cACAP,aACAoV,cACAD,4EACA3D,YACA6D,QACAhV,aACA2V,OACA3V,cACAG,UACA,OACA,OAEAwL,YACApJ,MACA5D,YACAqB,eAEAkW,KACAvX,iBACAmW,2HACA9U,cACAC,iBAEAtB,OACAA,cACAqB,eAEAA,MACArB,mBACAmW,kHACA9U,oBAOA,oDACA,uIACA,8DACAmW,WACArB,kCACAE,0BAIA,mCACA,wBACA,SACAxV,MACA4W,WACAtB,eACAuB,cACAC,gBACAC,cACAC,YACAC,SACAC,kBAGA,eACA,iCACA,KAGA,kBAGAzD,eACA,OACA,oBACA,2BACA,wBACA,uBACA,4BACA,0BACA,uBAEA,qDACA,iDACA,uCAIAgB,2CACA,OACA,0BACA,wCACA,kCACA,gCACA,0CACA,sCACA,+BAEA,iCAEAd,sBACA,+DACAwD,4EACA,IACAA,UACA,OACApK,WAEA,GACAqK,uBAEA,6CACA,SACAhV,2BAGAiV,6BACA,mCACA,qBACA,+CACA,wBACAC,4EACArK,YACAqK,MACA,EACA,KACA/V,IACAkB,iBAAA0O,cACA,kBAIAuD,2DACA,OACAvV,QACAyP,aACArN,OACAhB,WACAgX,sBACAhE,UAEA,KACA,wBACAhO,UAEA,6CAEAhG,eACA,iEACA,GACA,cAGAiY,QACA,mBACA,0BAEA,mBAEArV,+BACA,IACA,kDACA,kBACA,4BACAuD,QAEA,2DACA,SACAtD,2BAGA,0BACA,uCACA8U,iBACA,CACAM,aCvjBsV,I,wBCQlVnV,EAAY,eACd,EACA9D,EACA0B,GACA,EACA,KACA,KACA,MAIa,OAAAoC,E,6CCnBf,W,yDCAA,W,yDCAA,W,6ICIA,MAAMoV,EAAW,CAChB,WACA,YACA,QACA,UACA,QACA,OACA,OACA,QACA,OACA,QACA,QACA,WACA,WACA,UACA,SACA,KACA,SACA,OACA,OACA,OACA,SACA,UACA,QACA,QACA,UACA,QACA,MACA,WACA,OACA,KACA,aACA,SACA,KACA,aACA,MACA,YACA,MACA,OACA,SACA,MACA,OACA,UACA,UACA,YACA,SACA,SACA,QACA,SACA,QACA,SACA,eACA,OACA,QACA,SACA,YACA,OACA,MACA,SACA,MACA,OACA,WACA,QACA,OACA,QAEA,UACA,aACA,UACA,SACA,UAGc,MAAMC,UAAmBvK,OAEvC5K,YAAYwK,EAASM,EAAUtJ,EAAY4T,GAAkB,GAC5DnS,MAAMuH,EAASM,EAAUtJ,GACzBtF,KAAKkZ,gBAAkBA,EAGxBjK,2BAA2BX,GAC1B,IAAIjL,EAAK,IAAI4V,EAAW3K,EAAStO,KAAKkP,gBAAiBlP,KAAKmP,yBAA0BnP,KAAKkZ,iBAC3F,OAAOlZ,KAAKoP,mCAAmC/L,GAGhD8V,QACKnZ,KAAKoZ,QAGTrS,MAAMoS,QAGP3J,cACC,OAAOwJ,EAGRrJ,QAAQA,GACP3P,KAAKuT,QAAQ5D,EAAS,OAGvBC,kBACC5P,KAAKuT,QAAS,wDAGf1D,qBACC7P,KAAKuT,QAAS,0CAAyCvT,KAAK+T,qBAG7DjE,yBACC9P,KAAK2P,QAAS,wDAGfI,kBACC/P,KAAKuT,QAAS,kDAGf7B,sBAAsBV,EAAK/O,GAC1BjC,KAAKuT,QAAS,WAAUvC,OAAShR,KAAKsQ,EAAErO,OAGnB,uBAACuM,GACtB,IAAI6K,EAAWrZ,KAAKgS,IAAIxD,EAAKjN,IACzB+X,EAAc9K,EAAK+K,YAAc,OAAS,UAC1C5H,QAAa3R,KAAKwZ,kBAAkBhL,GAAOA,EAAKvH,WAGpD,GADAjH,KAAK2P,QAAQnB,EAAKqI,aACdlT,OAAMyH,SAASuG,GAAO,CACzB,IAAI8H,EAAYjL,EAAKvH,UAAa,GAAEuH,EAAKkL,cAAclL,EAAKvH,YAAcuH,EAAKkL,WAC/E1Z,KAAKuT,QAAS,OAAM8F,OAAcC,cAAwBG,OAAezZ,KAAKsQ,EAAEqB,aAGhF3R,KAAKuT,QAAS,OAAM8F,OAAcC,KAAe9K,EAAKkL,cAAc/H,EAAKvB,IAAIuJ,GAAO3Z,KAAKsQ,EAAEqJ,IAAM9I,KAAK,WAIxGZ,yBAAyB2J,GACxB5Z,KAAK2P,QAAQiK,EAAU/C,aACvB,IAAIgD,EAAY7Z,KAAKgS,IAAI4H,EAAUlY,KAAM,SACrCO,EAAqC,qBAAtB2X,EAAU5X,QAA0B4X,EAAU5X,QAAU,KAC3EhC,KAAKuT,QAAS,OAAMsG,OAAe7Z,KAAKsQ,EAAErO,OAGrB,uBAAC2G,EAAUuH,EAAYkJ,GAC5C,GAAIrZ,KAAKkZ,iBAAmBtQ,GAAYA,EAAS2L,SAAU,CAC1D,IAAIkC,EAAU7N,EAASkR,kBACnBC,EAAU5I,KAAKC,UAAUqF,GAC7B,MAAQ,eAAcsD,KAElB,CACJ,IAAI/F,EAAShU,KAAKkQ,uBAAuBC,GACzCnQ,KAAKyR,UACLzR,KAAKuT,QAAS,OAAM8F,gBAAuBrF,EAAOnD,KAAK,YACvD7Q,KAAK6O,SACL7O,KAAKuT,cAAc3K,EAASoR,QAAO,IACnCha,KAAK6O,SACL7O,KAAKuT,QAAS,MAIhBhD,eAAe0J,EAAYrR,GAC1B,IAAKqR,EACJ,OAED,IAAIZ,EAAWrZ,KAAKgS,IAAIiI,EAAW1Y,IAC/BqH,EACH5I,KAAKuT,QAAS,UAAS8F,MAGvBrZ,KAAKuT,QAAS,+CAA8C8F,OAI9DS,kBACC,OAAI9Z,KAAKuU,SACDvU,KAAKka,cAAcla,KAAKkU,iBAGxB,GAITiG,2BAA2B3L,GAC1B,GAAwB,kBAApBA,EAAKkL,YAC6B,cAAjClL,EAAK4L,gBAAgB,QAAyB,CACjD,IAAIR,EAAYpL,EAAK6L,eAAe,QAAQpI,eACxCqI,EAAQta,KAAKqS,wBAAwBkI,UAAUtH,GAASA,EAAMvR,OAASkY,GAC3E,GAAIU,GAAS,EACZ,MAAO,IAAI7G,OAAO6G,EAAM,IAAM9L,EAAK4D,YAAY,UAAY5D,EAAK4D,YAAY,UAI/E,OAAO,KAGR8H,cAAc1L,EAAMgM,EAAiB,MACpC,GAAwB,kBAApBhM,EAAKkL,WAAgC,CACxC,IAAIe,EAAeza,KAAKma,2BAA2B3L,GACnD,GAAIiM,EACH,OAAOA,EAIT,IAAIC,EAAWC,aAAQC,uBAAuBpM,EAAKkL,YAC/CpL,EAAUtO,KAAKkP,gBAAgB1C,IAAIgC,EAAKkL,YACxCmB,EAAwE,qBAAlDF,aAAQG,qBAAqBtM,EAAKkL,YAExDqB,EAAe9Y,IAClB,GAAI0B,OAAMyH,SAASnJ,GAClB,GAAIA,EAAM8P,UAAW,CACpB,IAAIiJ,EAAUxM,EAAKsE,kBAAkBmI,QAAQhZ,EAAM8P,WAElD9P,EADG+Y,EACKhb,KAAKka,cAAcc,EAASN,GAG5B,IAAMzY,EAAM8P,cAGjB,KAAI9P,EAAMgQ,eAId,MAAM,IAAIiJ,MAAM,uBAHhBjZ,EAAQA,EAAMgQ,eAMhB,OAAOhQ,GAIJkZ,EAAU,GACVnH,EAASlJ,MAAMC,QAAQuD,EAAQ6B,YAAc7B,EAAQ6B,WAAa,GACtE,IAAI,IAAIyJ,KAAa5F,EAAQ,CAC5B,IAAI/R,EAAQ8Y,EAAavM,EAAK6L,eAAeT,EAAUlY,OAEvD,GAAImZ,GAAe/P,MAAMC,QAAQ9I,IAA6B,SAAnB2X,EAAUlY,KAAiB,CACrEyZ,EAAUlZ,EAAMmO,IAAIgL,GAAKL,EAAaK,IACtC,MAEI,GAAoB,qBAAVnZ,EACdkZ,EAAQnO,KAAK/K,OAET,IAAgC,qBAAtB2X,EAAU5X,QAIxB,MAAM,IAAIkZ,MAAM,2BAA6BtB,EAAUlY,KAAO,aAH9DyZ,EAAQnO,KAAK4M,EAAU5X,UAYzB,GAJI6Y,IACHM,EAAUA,EAAQtJ,OAAOuJ,GAAW,OAANA,IAG3BV,EAAU,CACb,IAAIW,EAAY,CAAC,IAAK,KAClBC,EAAU,CAAC,IAAK,KAChB7E,EAAU0E,EACZ/K,IAAIgL,GAAKA,EAAI,EAAI,IAAMA,EAAI,IAAMA,GACjCvK,KAAK6J,GAGP,OAEEF,GAEGc,EAAQ7L,SAAS+K,IAAmBc,EAAQ7L,SAASiL,IAIzC,MAAbA,GAECY,EAAQ7L,SAAS+K,IAAmBa,EAAU5L,SAASiL,GAEpDjE,EAGA,IAAMA,EAAU,IAIxB,OAAOjI,EAAKkL,WAAa,IAAMyB,EAAQtK,KAAK,MAAQ,O,yDC5RvD,4BAGA,MAAM0K,UAAc3U,OAEnB9C,YAAYC,EAAOH,EAAY,cAC9BmD,MAAMhD,EAAOH,GAEb5D,KAAKwb,WAAY,EAIH,gBAAC1Y,GACf,GAAoB,kBAATA,EACV,IACCA,EAAOqO,KAAKgI,MAAMrW,GAEnB,MAAOkG,GACNU,QAAQC,IAAIX,GAQd,OALIrF,OAAM8X,cAAc3Y,KACvB9C,KAAKwb,WAAY,EACjBxb,KAAK4D,UAAY,YACjB5D,KAAK6G,KAAO,UAEN/D,GAIMyY,U,gEC9Bf,IAAIzb,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACS,MAAM,CAAC,GAAK,YAAY,CAACT,EAAG,MAAM,CAACG,MAAM,CAACob,cAAe3b,EAAI4b,iBAAiB/a,MAAM,CAAC,GAAK,QAAQ,CAACT,EAAG,SAAS,CAACE,YAAY,UAAU,CAACF,EAAG,QAAQA,EAAG,KAAK,CAACS,MAAM,CAAC,GAAK,SAAS,CAACT,EAAG,KAAK,CAACA,EAAG,MAAM,CAACE,YAAY,WAAWO,MAAM,CAAC,MAAQ,uBAAuBC,GAAG,CAAC,MAAQd,EAAI6b,WAAW,CAACzb,EAAG,IAAI,CAACE,YAAY,0BAA0BN,EAAIS,GAAG,aAAaL,EAAG,KAAK,CAACA,EAAG,MAAM,CAACE,YAAY,WAAWO,MAAM,CAAC,MAAQ,0BAA0BC,GAAG,CAAC,MAAQd,EAAI8b,iBAAiB,CAAC1b,EAAG,IAAI,CAACE,YAAY,sBAAsBN,EAAIS,GAAG,eAAeL,EAAG,KAAK,CAACA,EAAG,aAAa,MAAM,GAAGA,EAAG,aAAa,CAACE,YAAY,gBAAgBQ,GAAG,CAAC,OAASd,EAAI+b,QAAQ,gBAAgB/b,EAAI+b,UAAU,CAAC3b,EAAG,OAAO,CAACS,MAAM,CAAC,GAAK,YAAY,KAAOb,EAAIgc,eAAe,KAAK,CAAC5b,EAAG,mBAAmB,CAACE,YAAY,6BAA6BO,MAAM,CAAC,aAAeb,EAAI2D,cAAc,mBAAoB,EAAK,SAAU,MAAS,GAAGvD,EAAG,OAAO,CAACS,MAAM,CAAC,GAAK,YAAY,KAAOb,EAAIgc,eAAe,KAAK,CAAC5b,EAAG,aAAa,CAACE,YAAY,gBAAgBO,MAAM,CAAC,WAAa,IAAIC,GAAG,CAAC,OAASd,EAAI+b,QAAQ,gBAAgB/b,EAAI+b,UAAU,CAAC3b,EAAG,OAAO,CAACS,MAAM,CAAC,GAAK,SAAS,KAAOb,EAAIic,eAAe,KAAK,CAAC7b,EAAG,SAAS,CAACuU,IAAI,SAASrU,YAAY,6BAA6BO,MAAM,CAAC,GAAK,OAAO,MAAQb,EAAIuO,QAAQ,MAAQvO,EAAIkc,cAAcpb,GAAG,CAAC,MAAQd,EAAImc,cAAcC,YAAYpc,EAAIqc,GAAG,CAAC,CAACpL,IAAI,eAAeqL,GAAG,WAAW,MAAO,CAAClc,EAAG,SAAS,CAACS,MAAM,CAAC,KAAO,SAAS,MAAQ,uCAAuCC,GAAG,CAAC,MAAQd,EAAIuc,gBAAgB,CAACnc,EAAG,IAAI,CAACE,YAAY,gCAAgCF,EAAG,SAAS,CAACoc,WAAW,CAAC,CAAC7a,KAAK,OAAO8a,QAAQ,SAASva,MAAOlC,EAAiB,cAAE0c,WAAW,kBAAkB7b,MAAM,CAAC,KAAO,SAAS,UAAYb,EAAI2c,WAAW,MAAQ,WAAa3c,EAAIkc,cAAcpb,GAAG,CAAC,MAAQd,EAAI4c,cAAc,CAACxc,EAAG,IAAI,CAACE,YAAY,kBAAkBF,EAAG,SAAS,CAACS,MAAM,CAAC,KAAO,SAAS,UAAYb,EAAI2c,WAAW,MAAQ,4CAA4C7b,GAAG,CAAC,MAAQd,EAAI6c,aAAa,CAACzc,EAAG,IAAI,CAACE,YAAY,yBAAyBF,EAAG,SAAS,CAACoc,WAAW,CAAC,CAAC7a,KAAK,OAAO8a,QAAQ,SAASva,MAAOlC,EAAqB,kBAAE0c,WAAW,sBAAsB7b,MAAM,CAAC,KAAO,SAAS,UAAYb,EAAI2c,WAAW,MAAQ,mCAAmC7b,GAAG,CAAC,MAAQd,EAAI8c,kBAAkB,CAAC1c,EAAG,IAAI,CAACE,YAAY,qBAAqByc,OAAM,QAAW,GAAG3c,EAAG,OAAO,CAACS,MAAM,CAAC,GAAK,OAAO,KAAOb,EAAIic,eAAe,KAAK,CAAEjc,EAAmB,gBAAEI,EAAG,gBAAgB,CAACE,YAAY,mCAAmCF,EAAG,MAAM,CAACE,YAAY,eAAeO,MAAM,CAAC,MAAQ,mDAAmD,CAACT,EAAG,IAAI,CAACE,YAAY,uBAAuBF,EAAG,OAAO,CAACE,YAAY,iBAAiB,CAACF,EAAG,SAAS,CAACA,EAAG,IAAI,CAACU,GAAG,CAAC,MAAQd,EAAIgd,QAAQ,CAAChd,EAAIS,GAAG,cAAcT,EAAIS,GAAG,kDAAkD,IAAI,IAAI,GAAGL,EAAG,OAAO,CAACG,MAAM,CAAC0c,OAAQjd,EAAIkd,YAAYrc,MAAM,CAAC,GAAK,SAAS,KAAOb,EAAIgc,eAAe,KAAK,CAAC5b,EAAG,SAAS,CAACE,YAAY,kBAAkBQ,GAAG,CAAC,MAAQd,EAAImd,kBAAkB,IAAI,IAAI,MAC9+F1b,EAAkB,G,wBCDlB,EAAS,WAAa,IAAIzB,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACS,MAAM,CAAC,GAAK,aAAa,CAACT,EAAG,MAAM,CAACE,YAAY,YAAY,CAACN,EAAIod,GAAG,GAAGhd,EAAG,MAAM,CAACE,YAAY,QAAQ,CAACF,EAAG,OAAO,CAACE,YAAY,eAAe,CAACF,EAAG,IAAI,CAACE,YAAY,gBAAgBN,EAAIS,GAAG,IAAIT,EAAIU,GAAGV,EAAIqd,aAAcrd,EAAU,OAAEI,EAAG,OAAO,CAACE,YAAY,kBAAkB,CAACF,EAAG,IAAI,CAACE,YAAY,6BAA6BN,EAAIS,GAAG,IAAIT,EAAIU,GAAGV,EAAIsd,WAAWtd,EAAIY,KAAMZ,EAAc,WAAEI,EAAG,OAAO,CAACE,YAAY,kBAAkB,CAACF,EAAG,IAAI,CAACE,YAAY,0BAA0BN,EAAIS,GAAG,IAAIT,EAAIU,GAAGV,EAAIud,oBAAoB,YAAYvd,EAAIY,SAASR,EAAG,MAAM,CAACE,YAAY,YAAY,CAAEN,EAAe,YAAEI,EAAG,IAAI,CAACE,YAAY,OAAOO,MAAM,CAAC,KAAOb,EAAIwd,YAAYjZ,KAAK,OAAS,WAAW,CAACvE,EAAIS,GAAG,YAAYT,EAAIU,GAAGV,EAAIqd,UAAU,OAAOjd,EAAG,MAAM,CAACE,YAAY,QAAQ,CAACN,EAAIS,GAAG,YAAYT,EAAIU,GAAGV,EAAIqd,UAAU,OAAQrd,EAAmB,gBAAE,CAAEA,EAAgB,aAAEI,EAAG,IAAI,CAACE,YAAY,OAAOO,MAAM,CAAC,KAAOb,EAAIyd,aAAalZ,KAAK,OAAS,WAAW,CAACnE,EAAG,IAAI,CAACE,YAAY,qBAAqBN,EAAIS,GAAG,IAAIT,EAAIU,GAAGV,EAAIyd,aAAa9c,OAAS,mBAAmBX,EAAIY,KAAKR,EAAG,IAAI,CAACE,YAAY,OAAOQ,GAAG,CAAC,MAAQ,SAASI,GAAgC,OAAxBA,EAAOwc,iBAAwB1d,EAAI2d,OAAOC,MAAM,KAAMjL,cAAc,CAACvS,EAAG,IAAI,CAACE,YAAY,wBAAwBN,EAAIS,GAAG,cAAc,CAACL,EAAG,IAAI,CAACE,YAAY,OAAOQ,GAAG,CAAC,MAAQ,SAASI,GAAgC,OAAxBA,EAAOwc,iBAAwB1d,EAAIgd,MAAMY,MAAM,KAAMjL,cAAc,CAACvS,EAAG,IAAI,CAACE,YAAY,uBAAuBN,EAAIS,GAAG,YAAaT,EAAgB,aAAEI,EAAG,IAAI,CAACE,YAAY,OAAOO,MAAM,CAAC,KAAOb,EAAI6d,aAAatZ,KAAK,OAAS,WAAW,CAACnE,EAAG,IAAI,CAACE,YAAY,qBAAqBN,EAAIS,GAAG,eAAeT,EAAIY,KAAMZ,EAAgB,aAAEI,EAAG,IAAI,CAACE,YAAY,OAAOO,MAAM,CAAC,KAAOb,EAAI8d,aAAavZ,KAAK,OAAS,WAAW,CAACnE,EAAG,IAAI,CAACE,YAAY,eAAeN,EAAIS,GAAG,0BAA0BT,EAAIY,MAAQZ,EAAI0I,QAAQqV,UAAgN/d,EAAIY,KAAzMR,EAAG,IAAI,CAACE,YAAY,OAAOQ,GAAG,CAAC,MAAQ,SAASI,GAAgC,OAAxBA,EAAOwc,iBAAwB1d,EAAIge,WAAWJ,MAAM,KAAMjL,cAAc,CAACvS,EAAG,IAAI,CAACE,YAAY,wBAAwBN,EAAIS,GAAG,iBAA2BT,EAAIie,UAAUzU,OAAS,EAAG,CAACpJ,EAAG,MAAMJ,EAAIke,GAAIle,EAAa,WAAE,SAASme,EAAKlN,GAAK,OAAO7Q,EAAG,IAAI,CAAC6Q,IAAIA,EAAI3Q,YAAY,OAAOO,MAAM,CAAC,KAAOsd,EAAK5Z,KAAK,OAAS,SAAS,IAAM4Z,EAAKjG,MAAM,CAAClY,EAAIS,GAAGT,EAAIU,GAAGyd,EAAKxd,cAAaX,EAAIY,KAAMZ,EAAIsd,QAAUtd,EAAIoe,SAASC,cAAgBre,EAAIse,YAAa,CAACle,EAAG,MAAMA,EAAG,MAAM,CAACE,YAAY,QAAQ,CAACF,EAAG,KAAK,CAACJ,EAAIS,GAAG,aAAcT,EAAIoe,SAAqB,aAAEhe,EAAG,MAAM,CAACE,YAAY,kBAAkB,CAACN,EAAIS,GAAG,SAAST,EAAIU,GAAGV,EAAIoe,SAASC,iBAAiBre,EAAIY,KAAMZ,EAAU,OAAEI,EAAG,MAAM,CAACE,YAAY,kBAAkB,CAACN,EAAIS,GAAG,WAAWT,EAAIU,GAAGV,EAAIsd,WAAWtd,EAAIY,OAAQZ,EAAe,YAAEI,EAAG,IAAI,CAACE,YAAY,OAAOO,MAAM,CAAC,KAAOb,EAAIse,YAAY/Z,KAAK,OAAS,WAAW,CAACnE,EAAG,IAAI,CAACE,YAAY,uBAAuBN,EAAIS,GAAG,IAAIT,EAAIU,GAAGV,EAAIse,YAAY3d,OAAS,eAAeX,EAAIY,MAAMZ,EAAIY,KAAMZ,EAAc,WAAE,CAACI,EAAG,MAAMA,EAAG,MAAM,CAACE,YAAY,QAAQ,CAACF,EAAG,KAAK,CAACJ,EAAIS,GAAG,aAAaL,EAAG,MAAM,CAACE,YAAY,yBAAyB,CAACN,EAAIS,GAAG,QAAQT,EAAIU,GAAGV,EAAIue,eAAeve,EAAIwe,cAAc,OAAOxe,EAAIU,GAAGV,EAAIue,eAAeve,EAAIoe,SAASK,QAAQC,QAAQ,OAAOte,EAAG,MAAM,CAACE,YAAY,kBAAkB,CAACF,EAAG,MAAM,CAACE,YAAY,OAAOyE,MAAO,UAAY/E,EAAIud,mBAAqB,WAAYvd,EAAIY,MAAM,MACzuG,EAAkB,CAAC,WAAa,IAAIZ,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACE,YAAY,QAAQ,CAACF,EAAG,IAAI,CAACE,YAAY,4BCqD9I,GACfqB,gBACA2U,gBACAhU,aACA,mDACA,+CACA2b,YACA,gGAEAU,cACA,uDAEAd,eACA,wDAEAC,eACA,0DAEAL,eACA,mGAEAa,cACA,iGAEAd,cACA,mGAEAoB,aACA,4IAEAtB,SACA,gEAEAD,WACA,2CACA,mBAEA,wCACA,sBAEA,qBACA,OAGA,SAGAmB,cACA,uBAGA,uDAFA,MAIAjB,qBACA,uBAGA,6DAFA,OAKApa,YACA,mBAAA0b,yBACA,8BAAAC,sBACA,qBACA,oBACAlb,sCAEA,yBACA,oBACA,mBACAlC,qCAEAsb,QACA,wBAEAuB,kBACA,iBACA,WACA,sBAGA,+BCvIkV,I,wBCQ9U1a,EAAY,eACd,EACA,EACA,GACA,EACA,KACA,WACA,MAIa,EAAAA,E,QCnBX,EAAS,WAAa,IAAI7D,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,OAAO,CAACuU,IAAI,OAAO9T,MAAM,CAAC,GAAK,gBAAgB,CAAEb,EAAY,SAAEI,EAAG,MAAM,CAACS,MAAM,CAAC,GAAK,OAAO,KAAO,kBAAkB,KAAO,YAAYC,GAAG,CAAC,KAAOd,EAAImI,OAAO,KAAOnI,EAAIqI,SAAS,CAACjI,EAAG,aAAa,GAAGJ,EAAIY,KAAMZ,EAAgB,aAAEI,EAAG,MAAM,CAACS,MAAM,CAAC,GAAK,WAAW,KAAO,eAAe,KAAO,YAAYC,GAAG,CAAC,KAAOd,EAAImI,OAAO,KAAOnI,EAAIqI,SAAS,CAACjI,EAAG,iBAAiB,GAAGJ,EAAIY,KAAMZ,EAAuB,oBAAEI,EAAG,MAAM,CAACS,MAAM,CAAC,GAAK,kBAAkB,KAAO,mBAAmB,KAAO,cAAcC,GAAG,CAAC,KAAOd,EAAImI,OAAO,KAAOnI,EAAIqI,SAAS,CAACjI,EAAG,uBAAuB,GAAGJ,EAAIY,KAAMZ,EAAa,UAAEI,EAAG,MAAM,CAACS,MAAM,CAAC,GAAK,QAAQ,KAAO,QAAQ,KAAO,WAAWC,GAAG,CAAC,KAAOd,EAAImI,OAAO,KAAOnI,EAAIqI,SAAS,CAACjI,EAAG,cAAc,GAAGJ,EAAIY,MAAM,IAChzB,EAAkB,G,oCCDlB,EAAS,WAAa,IAAIZ,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,YAAY,CAACuU,IAAI,QAAQrU,YAAY,WAAWO,MAAM,CAAC,KAAOb,EAAI+C,KAAK,QAAU/C,EAAIuH,SAAS6U,YAAYpc,EAAIqc,GAAG,CAAC,CAACpL,IAAI,UAAUqL,GAAG,SAAShM,GAAG,MAAO,CAAClQ,EAAG,SAAS,CAACoc,WAAW,CAAC,CAAC7a,KAAK,OAAO8a,QAAQ,SAASva,MAAOlC,EAAgB,aAAE0c,WAAW,iBAAiB7b,MAAM,CAAC,MAAQ,WAAWC,GAAG,CAAC,MAAQ,SAASI,GAAQ,OAAOlB,EAAI+e,YAAYzO,EAAE0O,QAAQ,CAAC5e,EAAG,IAAI,CAACE,YAAY,kBAAkBF,EAAG,SAAS,CAACoc,WAAW,CAAC,CAAC7a,KAAK,OAAO8a,QAAQ,SAASva,MAAOlC,EAAIif,SAAS,eAAgBvC,WAAW,4BAA4B7b,MAAM,CAAC,MAAQ,YAAYC,GAAG,CAAC,MAAQ,SAASI,GAAQ,OAAOlB,EAAIkf,YAAY5O,EAAE0O,QAAQ,CAAC5e,EAAG,IAAI,CAACE,YAAY,iCAAiCF,EAAG,SAAS,CAACoc,WAAW,CAAC,CAAC7a,KAAK,OAAO8a,QAAQ,SAASva,MAAOlC,EAAkB,eAAE0c,WAAW,mBAAmB7b,MAAM,CAAC,MAAQ,gBAAgB,UAAYb,EAAImf,cAAc7O,EAAE0O,MAAMle,GAAG,CAAC,MAAQ,SAASI,GAAQ,OAAOlB,EAAIof,aAAa9O,EAAE0O,QAAQ,CAAC5e,EAAG,IAAI,CAACE,YAAY,kBAAkBF,EAAG,SAAS,CAACoc,WAAW,CAAC,CAAC7a,KAAK,OAAO8a,QAAQ,SAASva,MAAOlC,EAAgB,aAAE0c,WAAW,iBAAiB7b,MAAM,CAAC,MAAQ,gBAAgBC,GAAG,CAAC,MAAQ,SAASI,GAAQ,OAAOlB,EAAIqf,aAAa/O,EAAE0O,QAAQ,CAAC5e,EAAG,IAAI,CAACE,YAAY,6BAA6BF,EAAG,SAAS,CAACoc,WAAW,CAAC,CAAC7a,KAAK,OAAO8a,QAAQ,SAASva,MAAOlC,EAAkB,eAAE0c,WAAW,mBAAmB7b,MAAM,CAAC,MAAQ,UAAUC,GAAG,CAAC,MAAQ,SAASI,GAAQ,OAAOlB,EAAIsf,UAAUhP,EAAE0O,QAAQ,CAAC5e,EAAG,IAAI,CAACE,YAAY,mBAAmBF,EAAG,SAAS,CAACoc,WAAW,CAAC,CAAC7a,KAAK,OAAO8a,QAAQ,SAASva,MAAOlC,EAAIif,SAAS,aAAejf,EAAImf,cAAc7O,EAAE0O,KAAMtC,WAAW,iDAAiD7b,MAAM,CAAC,MAAQ,oBAAoBC,GAAG,CAAC,MAAQ,SAASI,GAAQ,OAAOlB,EAAIuf,SAASjP,EAAE0O,QAAQ,CAAC5e,EAAG,IAAI,CAACE,YAAY,yBAAyBF,EAAG,SAAS,CAACoc,WAAW,CAAC,CAAC7a,KAAK,OAAO8a,QAAQ,SAASva,MAAOlC,EAAIif,SAAS,YAAcjf,EAAIwf,YAAYlP,EAAE0O,KAAMtC,WAAW,8CAA8C7b,MAAM,CAAC,MAAQ,qBAAqBC,GAAG,CAAC,MAAQ,SAASI,GAAQ,OAAOlB,EAAIyf,UAAUnP,EAAE0O,QAAQ,CAAC5e,EAAG,IAAI,CAACE,YAAY,yBAAyBF,EAAG,SAAS,CAACoc,WAAW,CAAC,CAAC7a,KAAK,OAAO8a,QAAQ,SAASva,MAAOlC,EAAIif,SAAS,oBAAsBjf,EAAI0f,eAAepP,EAAE0O,KAAMtC,WAAW,yDAAyD7b,MAAM,CAAC,MAAQ,YAAYC,GAAG,CAAC,MAAQ,SAASI,GAAQ,OAAOlB,EAAI2f,gBAAgBrP,EAAE0O,QAAQ,CAAC5e,EAAG,IAAI,CAACE,YAAY,sBAAsBF,EAAG,SAAS,CAACoc,WAAW,CAAC,CAAC7a,KAAK,OAAO8a,QAAQ,SAASva,MAAOlC,EAAIif,SAAS,oBAAsBjf,EAAI0f,eAAepP,EAAE0O,KAAMtC,WAAW,yDAAyD7b,MAAM,CAAC,MAAQ,gBAAgBC,GAAG,CAAC,MAAQ,SAASI,GAAQ,OAAOlB,EAAI4f,YAAYtP,EAAE0O,KAAK,MAAS,CAAC5e,EAAG,IAAI,CAACE,YAAY,iBAAiBF,EAAG,SAAS,CAACoc,WAAW,CAAC,CAAC7a,KAAK,OAAO8a,QAAQ,SAASva,MAAOlC,EAAIif,SAAS,YAAavC,WAAW,yBAAyB7b,MAAM,CAAC,MAAQ,aAAaC,GAAG,CAAC,MAAQ,SAASI,GAAQ,OAAOlB,EAAI6f,SAASvP,EAAE0O,QAAQ,CAAC5e,EAAG,IAAI,CAACE,YAAY,uBAAuB,CAACF,EAAG,WAAW,CAAC0f,KAAK,WAAW,CAAC1f,EAAG,SAAS,CAACoc,WAAW,CAAC,CAAC7a,KAAK,OAAO8a,QAAQ,SAASva,MAAOlC,EAAkB,eAAE0c,WAAW,mBAAmB7b,MAAM,CAAC,MAAQ,mCAAmC,UAAYZ,KAAK0c,YAAY7b,GAAG,CAAC,MAAQ,SAASI,GAAQ,OAAOlB,EAAI+f,yBAAyB,CAAC3f,EAAG,IAAI,CAACE,YAAY,gBAAgBN,EAAIS,GAAG,uBAAuBL,EAAG,SAAS,CAACoc,WAAW,CAAC,CAAC7a,KAAK,OAAO8a,QAAQ,SAASva,MAAOlC,EAAIif,SAAS,iBAAkBvC,WAAW,8BAA8B7b,MAAM,CAAC,MAAQ,iFAAiF,UAAYZ,KAAK0c,YAAY7b,GAAG,CAAC,MAAQd,EAAIggB,iBAAiB,CAAC5f,EAAG,IAAI,CAACE,YAAY,gBAAgBN,EAAIS,GAAG,uBAAuB,IACtsH,EAAkB,G,wBC0BtB,MAAMwf,EAAyB,OAAAC,EAAA,MAAe,OAAQ,YAAa,cAEpD,OACfve,gBACA2U,kBACAvT,OACA,OACAwE,SACA/F,IACAG,UACAwe,cACAC,SAEAzf,OACAgB,iBACA0e,4CACAC,oCACAC,uBAEAC,QACA7e,cACA8e,aAEAC,SACA/e,iBACA2e,mBACAK,aAEA5X,SACApH,mBACA2e,oBAEAM,SACAjf,eACAkf,cACAF,UAGAG,YACAC,gBACAC,UAGA9d,UACA,mDAEAZ,aACA,mCACA,4EACA,8CACA,uCAEAW,OACAF,MACA6T,oBAEA,iBACA,eACA,yCACA,wBAIAqK,UAGA9d,YACA,6CACAiF,iBACA6X,oCACA,uDAEArY,gBACAqY,mCACA,wBACAxX,gCAGA4W,gBACA,sDAEA,uBACA,IAYA,EAZA,2BACA,GACA6B,UACAlf,aACAmf,UACA1d,cACA2d,WACAC,UACA,kCAKA,IACA,aACA,yDACA,+BACA,0BACAC,+BACA,oEACA,8BACA,SACA,oBAGA,iGACA,uBACA9f,QACAoK,YACA2V,cACAzJ,kBACAW,qBAEA7U,yGAGAA,yCAvBA,QA0BA,GACA,gCAIA4d,cACA,SACA,8BACAL,QAAA1d,gBAAA2d,iCAEA,2BACAD,QAAA1d,wBAAA2d,8BAEA,4BACAD,QAAA1d,cAAA2d,+BAEAxd,wEAEA6d,sBACA,OACA9f,aACAoV,cACAC,QAAAhV,eACAC,aACAC,QACAiR,cAGA+D,4BACA,OACAvV,mBACAoV,oBACAC,QAAAhV,cAAAmV,sBACAlV,aACAC,QACA4U,gDACA3D,cAGAuO,uBACA,OACA/f,YACAoV,qBACAC,QAAAhV,cAAAmV,wBACAjV,QACAiR,cAGAwO,uBACA,OACAhgB,cACAoV,eACAC,QAAAhV,cAAAmV,kBACAlV,aACAC,QACAiR,cAGAyO,0BAaA,MAZA,8EACA7e,cAEA,gGACAA,oBAEA,2EACAA,aAEA,0EACAA,eAEA,GAEA,qBACA,IACAA,iCACA,yBAAAqN,uDACA,mBACA,SACAxM,8DAGAmc,sBACA,OACA,qBACA,2BACA,0DACA,iDAEA,sFAEA,mBACA,0FAIA,UACA,aAAAhd,SACA,iCACA,SACAa,2EAGAie,kBACA,2BACA,6CACA,iDACA,SACA,mCACAV,QAAA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A,oBACA,EACA,oDASA,uBACAb,EAAA,SAAAskB,EAAAzjB,GAAA,KACA+hB,kBACAA,oBAGA,2BACA,eACA,IACA,qBACA,eACA,KACA5iB,gCAEA,IACAA,oCAEA,2BACA,uBACAA,EAAA2kB,SAAA9jB,GAAA,KACA+hB,kBACAA,mBAEA,SACA3f,0CAIA,kCACA,MACA,iEACA4C,8BAEA,6BAIA,wBAHAA,aAQA,OAHA,uBACAA,WAEA,GAEA,gBACA,4DACA,MACA,OAEA,oBACA,qCACAF,mBACA,uDACA,IACA,uCACA,8BACA,SACA1C,0EAIAgS,aACAtP,oBAEA6B,UACA,oCAEAE,UACA,oCAEAmb,eACA,uBAEAyD,eACA,gCAKA,0BACA,qCALA,0BACA,IAOAC,oBACA,SAGA,EACA,oBAGA,EANA,uBC5PgV,MCQ5U,I,UAAY,eACd,GACA,EACA,GACA,EACA,KACA,KACA,OAIa,M,yECsCA,IACfvlB,WACA2U,gBACA1U,YACA4U,yBACA2Q,qBACAC,aACAC,UACAC,WACAC,gBACAC,mBACAC,cAEA1kB,OACA,OACAma,cACAwK,oBACAC,uBAGArlB,aACA,qDACA,uEACA,wDACA,0BAAAslB,wCACA,8BAAAC,4CACA,mCAAAC,6CACA5L,eACA,wEAEA6L,gBACA,6BACA,0DACA,kEACA,2EAGApL,aACA,oCAEAqL,oBACA,yCAEAhM,iBACA,uBACA,WAGA,WAGAC,iBACA,4BACA,QAGA,SAIA,gBACA,8CACA,4CACA,oCAEA,uCACAva,sDACA,uBACA,gGAEA,8BAEA,wBACA,oBACA,0DACA,mCAIAiG,gBACA,4BACAjG,yDAEA,6BACA+G,qCAGAtF,YACA,0CACA,+CACA,iFAEA4Y,WACA,8BAEAoB,iBACA,oBAGAH,QACA,6BAGAT,gBACA,OACA3D,wBAEA,kDAGAgE,cACA,uDAGA,mBACA,0CAGA,wBACA,2BACA,8DAEA,oBACA,kDAEA,IACA,0DACA,YACAqL,8BACA,wDAGArkB,uCAEA,SACAA,iDAIAuY,gBACA,mBACA,UACA,uBAIAnH,eACA,oBAGArR,iBACA,oCAGAmY,iBACA,0CAGAD,WACA,6BAGAqM,gCACA,4BACA,KACA,KACA,eACA,WAGA9X,sCACArN,mBAGA,OACApC,QACAyP,aACArN,OACAhB,YAEA,KACA,wBACAgF,UAEA,wBACAA,YAEA,+CCpP6U,MCQzU,I,UAAY,eACd,GACAhH,EACA0B,GACA,EACA,KACA,KACA,OAIa,gB,2CCnBf","file":"js/chunk-3862b1ce.46dbf491.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"textEditor\",class:_vm.languageString},[_c('div',{staticClass:\"sourceHeader\"},[(_vm.title)?_c('strong',[_vm._v(_vm._s(_vm.title))]):_vm._e(),_c('div',{staticClass:\"sourceToolbar\"},[_c('span',{staticClass:\"sepr\"},[(_vm.editable)?_c('button',{attrs:{\"type\":\"button\",\"title\":\"New script / Clear current script\"},on:{\"click\":_vm.confirmClear}},[_c('i',{staticClass:\"fas fa-file\"})]):_vm._e(),_vm._t(\"file-toolbar\")],2),(_vm.editable)?_c('span',{staticClass:\"sepr\"},[_c('button',{attrs:{\"type\":\"button\",\"disabled\":!_vm.canUndo,\"title\":\"Revert last change\"},on:{\"click\":function($event){return _vm.editor.undo()}}},[_c('i',{staticClass:\"fas fa-undo-alt\"})]),_c('button',{attrs:{\"type\":\"button\",\"disabled\":!_vm.canRedo,\"title\":\"Redo last reverted change\"},on:{\"click\":function($event){return _vm.editor.redo()}}},[_c('i',{staticClass:\"fas fa-redo-alt\"})]),_vm._t(\"edit-toolbar\")],2):_vm._e(),_c('FullscreenButton',{attrs:{\"element\":_vm.element}}),_vm._t(\"toolbar\")],2)]),_c('div',{staticClass:\"sourceCodeEditor\",attrs:{\"id\":_vm.id}})])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n\t<div class=\"textEditor\" :class=\"languageString\">\n\t\t<div class=\"sourceHeader\">\n\t\t\t<strong v-if=\"title\">{{ title }}</strong>\n\t\t\t<div class=\"sourceToolbar\">\n\t\t\t\t<span class=\"sepr\">\n\t\t\t\t\t<button type=\"button\" v-if=\"editable\" @click=\"confirmClear\" title=\"New script / Clear current script\"><i class=\"fas fa-file\"></i></button>\n\t\t\t\t\t<slot name=\"file-toolbar\"></slot>\n\t\t\t\t</span>\n\t\t\t\t<span class=\"sepr\" v-if=\"editable\">\n\t\t\t\t\t<button type=\"button\" @click=\"editor.undo()\" :disabled=\"!canUndo\" title=\"Revert last change\"><i class=\"fas fa-undo-alt\"></i></button>\n\t\t\t\t\t<button type=\"button\" @click=\"editor.redo()\" :disabled=\"!canRedo\" title=\"Redo last reverted change\"><i class=\"fas fa-redo-alt\"></i></button>\n\t\t\t\t\t<slot name=\"edit-toolbar\"></slot>\n\t\t\t\t</span>\n\t\t\t\t<FullscreenButton :element=\"element\" />\n\t\t\t\t<slot name=\"toolbar\"></slot>\n\t\t\t</div>\n\t\t</div>\n\t\t<div :id=\"id\" class=\"sourceCodeEditor\"></div>\n\t</div>\n</template>\n\n<script>\nimport Utils from '../utils.js';\nimport FullscreenButton from './FullscreenButton.vue';\nimport { ProcessGraph } from '@openeo/js-processgraphs';\n\nimport CodeMirror from 'codemirror';\nimport 'codemirror/lib/codemirror.css';\n\nimport 'codemirror/mode/javascript/javascript.js';\nimport 'codemirror/mode/markdown/markdown.js';\nimport 'codemirror/mode/mathematica/mathematica.js';\nimport 'codemirror/mode/python/python.js';\nimport 'codemirror/mode/r/r.js';\n\nimport 'codemirror/addon/display/placeholder.js';\n\nimport 'codemirror/addon/edit/matchbrackets.js';\nimport 'codemirror/addon/edit/closebrackets.js';\n\nimport 'codemirror/addon/lint/lint.css';\nimport 'codemirror/addon/lint/lint.js';\nimport 'codemirror/addon/lint/json-lint.js'\nimport jsonlint from 'jsonlint-mod';\nwindow.jsonlint = jsonlint;\n\nexport default {\n\tname: 'TextEditor',\n\tcomponents: {\n\t\tFullscreenButton\n\t},\n\tprops: {\n\t\tid: String,\n\t\teditable: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: true\n\t\t},\n\t\tvalue: {\n\t\t\trequired: true\n\t\t},\n\t\tlanguage: {\n\t\t\ttype: String,\n\t\t\tdefault: null // json, r, python, markdown, processgraph or null\n\t\t},\n\t\tplaceholder: {\n\t\t\ttype: String,\n\t\t\tdefault: \"\"\n\t\t},\n\t\ttitle: {\n\t\t\ttype: String\n\t\t}\n\t},\n\tcomputed: {\n\t\t...Utils.mapGetters(['processes']),\n\t\tlanguageString() {\n\t\t\treturn typeof this.language === 'string' ? this.language.toLowerCase() : '';\n\t\t},\n\t\teditorOptions() {\n\t\t\tlet options = {\n\t\t\t\tindentUnit: 2,\n\t\t\t\tlineNumbers: true,\n\t\t\t\tindentWithTabs: true,\n\t\t\t\tmatchBrackets: true,\n\t\t\t\tautoCloseBrackets: true,\n\t\t\t\treadOnly: !this.editable,\n\t\t\t\tplaceholder: this.placeholder\n\t\t\t};\n\t\t\tswitch(this.languageString) {\n\t\t\t\tcase 'r':\n\t\t\t\t\toptions.mode = 'text/x-rsrc';\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'python':\n\t\t\t\t\toptions.mode = 'text/x-python';\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'math':\n\t\t\t\t\toptions.mode = 'text/x-mathematica'; // Use mathematica mode until we have something better for openEO\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'markdown':\n\t\t\t\t\toptions.mode = 'text/x-markdown';\n\t\t\t\t\toptions.lineWrapping = true;\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'javascript':\n\t\t\t\t\toptions.mode = 'text/javascript';\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'json':\n\t\t\t\tcase 'processgraph':\n\t\t\t\t\toptions.mode = 'application/json';\n\t\t\t\t\toptions.gutters = ['CodeMirror-lint-markers'];\n\t\t\t\t\toptions.lint = true;\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t\treturn options;\n\t\t}\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tcanUndo: false,\n\t\t\tcanRedo: false,\n\t\t\teditor: null,\n\t\t\temitValue: this.value,\n\t\t\telement: null\n\t\t}\n\t},\n\twatch: {\n\t\tasync value() {\n\t\t\tif (this.emitValue !== this.value) {\n\t\t\t\tthis.updateContent();\n\t\t\t\tthis.editor.clearHistory();\n\t\t\t}\n\t\t},\n\t\teditorOptions() {\n\t\t\tfor(var key in this.editorOptions) {\n\t\t\t\tthis.editor.setOption(key, this.editorOptions[key]);\n\t\t\t}\n\t\t\tthis.updateContent();\n\t\t}\n\t},\n\tmounted() {\n\t\tthis.editor = CodeMirror(document.getElementById(this.id), this.editorOptions);\n\t\tthis.editor.setSize(null, \"100%\");\n\t\tif (this.languageString === 'processgraph') {\n\t\t\tthis.editor.on(\"change\", () => this.updateState());\n\t\t}\n\t\tthis.updateContent();\n\n\t\t// Listen for changes only after first initialization\n\t\tthis.editor.on('changes', (cm, evt) => {\n\t\t\ttry {\n\t\t\t\t// Don't commit external changes (i.e. coming from the value prop)\n\t\t\t\tif (Object.values(evt).filter(e => e.origin === 'setValue').length === 0) {\n\t\t\t\t\tthis.commit();\n\t\t\t\t}\n\t\t\t} catch (error) {\n\t\t\t\tthis.$emit('error', error);\n\t\t\t}\n\t\t});\n\n\t\tthis.element = this.$el;\n\t},\n\tmethods: {\n\t\tconfirmClear() {\n\t\t\tvar confirmed = confirm(\"Do you really want to clear the existing code?\");\n\t\t\tif (confirmed) {\n\t\t\t\tthis.insert(\"\");\n\t\t\t\tthis.emit(null);\n\t\t\t}\n\t\t},\n\t\tupdateState() {\n\t\t\t// Don't lint empty values\n\t\t\tthis.editor.setOption(\"lint\", !!this.editor.getValue().trim());\n\t\t\t// Update history state\n\t\t\tlet history = this.editor.getDoc().historySize();\n\t\t\tthis.canUndo = history.undo > 0;\n\t\t\tthis.canRedo = history.redo > 0;\n\t\t\t// Refresh editor\n\t\t\tthis.editor.refresh();\n\t\t\t// Refresh element for fullscreen\n\t\t\tthis.element = this.$el;\n\t\t},\n\t\tcommit() {\n\t\t\tvar value = this.editor.getValue();\n\t\t\tswitch(this.languageString) {\n\t\t\t\tcase 'math':\n\t\t\t\t\treturn this.emit(value.replace(/[\\r\\n\\t]+/, ' ')); // Replace line breaks and tabs with simple spaces\n\t\t\t\tcase 'processgraph':\n\t\t\t\t\tif (value) {\n\t\t\t\t\t\tvar process = JSON.parse(value);\n\t\t\t\t\t\tif (Utils.size(process) > 0) {\n\t\t\t\t\t\t\tvar pg = new ProcessGraph(process, this.processes);\n\t\t\t\t\t\t\tpg.allowEmpty();\n\t\t\t\t\t\t\tpg.parse();\n\t\t\t\t\t\t\treturn this.emit(process);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\treturn this.emit(null);\n\t\t\t\tcase 'json':\n\t\t\t\t\tif (value) {\n\t\t\t\t\t\treturn this.emit(JSON.parse(value));\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\treturn this.emit(null);\n\t\t\t\t\t}\n\t\t\t\tdefault:\n\t\t\t\t\treturn this.emit(value);\n\t\t\t}\n\t\t},\n\t\temit(value) {\n\t\t\tthis.emitValue = value;\n\t\t\tthis.$emit('input', value);\n\t\t},\n\t\tinsert(text, replace = true) {\n\t\t\tif (typeof text !== 'string') {\n\t\t\t\ttext = String(text);\n\t\t\t}\n\t\t\tif (replace) {\n\t\t\t\t// Only update if it has really changed\n\t\t\t\tconst cmValue = this.editor.getValue();\n\t\t\t\tif (text !== cmValue) {\n\t\t\t\t\tconst scrollInfo = this.editor.getScrollInfo();\n\t\t\t\t\tthis.editor.setValue(text);\n\t\t\t\t\tthis.editor.scrollTo(scrollInfo.left, scrollInfo.top)\n\t\t\t\t}\n\t\t\t}\n\t\t\telse {\n\t\t\t\tthis.editor.replaceSelection(text);\n\t\t\t}\n\t\t},\n\t\tupdateContent() {\n\t\t\tif (this.value) {\n\t\t\t\tswitch(this.languageString) {\n\t\t\t\t\tcase 'processgraph':\n\t\t\t\t\t\tif (Utils.isObject(this.value)) {\n\t\t\t\t\t\t\tthis.insert(JSON.stringify(this.value, null, this.editorOptions.indentUnit));\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\tthis.insert(\"\");\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'json':\n\t\t\t\t\t\tthis.insert(JSON.stringify(this.value, null, this.editorOptions.indentUnit));\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tthis.insert(this.value);\n\t\t\t\t}\n\t\t\t}\n\t\t\telse {\n\t\t\t\tthis.insert(\"\");\n\t\t\t}\n\t\t\tthis.editor.getDoc().clearHistory();\n\t\t\tthis.updateState();\n\t\t},\n\n\t\tinsertProcess(node) {\n\t\t\ttry {\n\t\t\t\tthis.insert(JSON.stringify(node, null, 2), false);\n\t\t\t} catch(error) {\n\t\t\t\tUtils.exception(this, error);\n\t\t\t}\n\t\t},\n\n\t}\n}\n</script>\n\n<style scoped>\n.textEditor {\n\theight: 100%;\n\tdisplay: flex;\n\tflex-direction: column;\n\tborder: 1px solid #ddd;\n}\n.sourceCodeEditor {\n\tflex-grow: 1;\n\theight: 100%;\n\toverflow: hidden;\n}\n</style>\n<style>\n.textEditor.math .cm-operator {\n\tmargin: 0 0.2em;\n}\n.textEditor.markdown .CodeMirror-wrap pre {\n    word-break: break-word;\n}\n.CodeMirror-placeholder {\n\topacity: 0.5;\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TextEditor.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TextEditor.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./TextEditor.vue?vue&type=template&id=100002bb&scoped=true&\"\nimport script from \"./TextEditor.vue?vue&type=script&lang=js&\"\nexport * from \"./TextEditor.vue?vue&type=script&lang=js&\"\nimport style0 from \"./TextEditor.vue?vue&type=style&index=0&id=100002bb&scoped=true&lang=css&\"\nimport style1 from \"./TextEditor.vue?vue&type=style&index=1&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"100002bb\",\n  null\n  \n)\n\nexport default component.exports","import Utils from '../utils.js';\n\nexport class Format {\n\n\tconstructor(asset) {\n\t\tObject.assign(this, asset);\n\t\tthis.context = null;\n\t}\n\n\tsetContext(context) {\n\t\tthis.context = context;\n\t}\n\n\tgetContext() {\n\t\treturn this.context;\n\t}\n\n\tgetUrl() {\n\t\treturn this.href;\n\t}\n\n\tcanGroup() {\n\t\treturn false;\n\t}\n\n\tisBinary() {\n\t\treturn true;\n\t}\n\n\tdownload(filename = null) {\n\t\tlet tempLink = document.createElement('a');\n\t\ttempLink.style.display = 'none';\n\t\ttempLink.href = this.getUrl();\n\t\ttempLink.setAttribute('download', filename ? filename :  Utils.makeFileName(\"result\", this.type));\n\t\tif (typeof tempLink.download === 'undefined') {\n\t\t\ttempLink.setAttribute('target', '_blank');\n\t\t}\n\t\tdocument.body.appendChild(tempLink);\n\t\ttempLink.click();\n\t\tdocument.body.removeChild(tempLink);\n\t}\n\n\tasync getData(connection) {\n\t\tif (!this.loaded) {\n\t\t\tthis.data = await this.fetchData(connection);\n\t\t\tthis.loaded = true;\n\t\t}\n\t\treturn this.data;\n\t}\n\n\tasync fetchData(connection) {\n\t\tlet blob;\n\t\tlet url = this.getUrl();\n\t\tif (url.startsWith('blob:')) {\n\t\t\tlet response = await fetch(url);\n\t\t\tblob = await response.blob();\n\t\t}\n\t\telse {\n\t\t\tblob = await connection.download(url);\n\t\t}\n\t\tlet promise = new Promise((resolve, reject) => {\n\t\t\tlet reader = new FileReader();\n\t\t\treader.onload = event => resolve(event.target.result);\n\t\t\treader.onerror = reject;\n\t\t\tif (this.isBinary()) {\n\t\t\t\treader.readAsBinaryString(blob);\n\t\t\t}\n\t\t\telse {\n\t\t\t\treader.readAsText(blob);\n\t\t\t}\n\t\t});\n\t\tlet data = await promise;\n\t\treturn this.parseData(data);\n\t}\n\n\tasync parseData(data) {\n\t\treturn data;\n\t}\n\n}\n\nexport class SupportedFormat extends Format {\n\n\tconstructor(asset, component = null, icon = 'fa-database', props = {}, events = {}) {\n\t\tsuper(asset);\n\t\tthis.loaded = false;\n\t\tthis.component = component;\n\t\tthis.props = props;\n\t\tif (!this.props.data) {\n\t\t\tthis.props.data = this;\n\t\t}\n\t\tthis.icon = icon;\n\t\tthis.events = events;\n\t}\n\n\tisBinary() {\n\t\treturn false;\n\t}\n\n}\n\nexport class UnsupportedFormat extends Format {\n\n\tconstructor(asset) {\n\t\tsuper(asset);\n\t}\n\n}\n\nexport class FormatCollection extends SupportedFormat {\n\n}","import DataTable from '@openeo/vue-components/components/DataTable.vue';\nimport Utils from '../utils.js';\n\nexport default (namespace, singular, plural, loadInitially = true) => {\n\treturn {\n\t\tcomponents: {\n\t\t\tDataTable\n\t\t},\n\t\tdata() {\n\t\t\treturn {\n\t\t\t\tcolumns: {},\n\t\t\t\tsyncTimer: null,\n\t\t\t\tlastSyncTime: null\n\t\t\t};\n\t\t},\n\t\tmounted() {\n\t\t\tif (loadInitially) {\n\t\t\t\tthis.updateData();\n\t\t\t}\n\t\t},\n\t\tbeforeDestroy() {\n\t\t\tthis.stopSyncTimer();\n\t\t},\n\t\tcomputed: {\n\t\t\t...Utils.mapState(namespace, {data: namespace}),\n\t\t\t...Utils.mapGetters(namespace, ['supportsList', 'supportsCreate', 'supportsRead', 'supportsUpdate', 'supportsDelete'])\n\t\t},\n\t\tmethods: {\n\t\t\t...Utils.mapActions(namespace, ['list', 'create', 'read', 'update', 'delete']),\n\t\t\tgetTable() { // To be overridden\n\t\t\t\treturn this.$refs && this.$refs.table ? this.$refs.table : null;\n\t\t\t},\n\t\t\tonShow() {\n\t\t\t\tthis.updateData();\n\t\t\t\tthis.startSyncTimer();\n\t\t\t},\n\t\t\tonHide() {\n\t\t\t\tthis.stopSyncTimer();\n\t\t\t},\n\t\t\tstartSyncTimer() {\n\t\t\t\tif (this.supportsList && this.syncTimer === null) {\n\t\t\t\t\tthis.syncTimer = setInterval(this.updateData, this.getSyncInterval());\n\t\t\t\t}\n\t\t\t},\n\t\t\tstopSyncTimer() {\n\t\t\t\tif (this.syncTimer !== null) {\n\t\t\t\t\tclearInterval(this.syncTimer);\n\t\t\t\t\tthis.syncTimer = null;\n\t\t\t\t}\n\t\t\t},\n\t\t\tgetSyncInterval() {\n\t\t\t\treturn this.$config.dataRefreshInterval*60*1000; // Refresh data every x minutes\n\t\t\t},\n\t\t\tasync refreshElement(obj, callback = null) {\n\t\t\t\tvar old = Object.assign({}, obj);\n\t\t\t\ttry {\n\t\t\t\t\tlet updated = await this.read({data: obj});\n\t\t\t\t\tif (typeof callback === 'function') {\n\t\t\t\t\t\tcallback(updated, old);\n\t\t\t\t\t}\n\t\t\t\t} catch(error) {\n\t\t\t\t\tUtils.exception(this, error, \"Load \" + singular + \" error\");\n\t\t\t\t}\n\t\t\t},\n\t\t\tasync updateData() {\n\t\t\t\tvar table = this.getTable();\n\t\t\t\tvar nextSyncTime = Date.now() - this.getSyncInterval();\n\t\t\t\tif (!table || this.lastSyncTime > nextSyncTime) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\telse if (!this.supportsList) {\n\t\t\t\t\ttable.setNoData(\"Sorry, listing stored \" + plural + \" is not supported by the server.\");\n\t\t\t\t}\n\t\t\t\telse if (!this.supportsCreate) {\n\t\t\t\t\ttable.setNoData(\"Sorry, this feature is not supported by the server.\");\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tvar isUpdate = this.data.length > 0;\n\t\t\t\t\tif (!isUpdate) {\n\t\t\t\t\t\ttable.setNoData(\"Loading \" + plural + \"...\");\n\t\t\t\t\t}\n\t\t\t\t\tthis.lastSyncTime = Date.now();\n\t\t\t\t\ttry {\n\t\t\t\t\t\tlet data = await this.list();\n\t\t\t\t\t\tif(data.length == 0) {\n\t\t\t\t\t\t\ttable.setNoData(\"Add your first \" + singular + \" here...\");\n\t\t\t\t\t\t}\n\t\t\t\t\t} catch(error) {\n\t\t\t\t\t\tif (!isUpdate) {\n\t\t\t\t\t\t\tUtils.exception(this, error);\n\t\t\t\t\t\t\ttable.setNoData(\"Sorry, unable to load data from the server.\");\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\tconsole.log(error);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n}","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./VisualEditor.vue?vue&type=style&index=0&lang=css&\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TextEditor.vue?vue&type=style&index=0&id=100002bb&scoped=true&lang=css&\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Viewer.vue?vue&type=style&index=0&lang=scss&\"","import { SupportedFormat } from './format';\nimport Utils from '../utils';\nimport ProjManager from '../components/maps/projManager';\n\nimport { fromUrl as tiffFromUrl } from 'geotiff';\n\nimport { toUserExtent } from 'ol/proj';\nimport Projection from 'ol/proj/Projection';\nimport { fromCode as unitsFromCode } from 'ol/proj/Units';\n\nconst GDAL_MIN = 'STATISTICS_MINIMUM';\nconst GDAL_MAX = 'STATISTICS_MAXIMUM';\nconst GDAL_NAME = 'DESCRIPTION';\n\nclass GeoTIFF extends SupportedFormat {\n\n\tconstructor(asset, stac) {\n\t\tsuper(asset, \"MapViewer\", 'fa-map', {removableLayers: true});\n\t\tthis.bands = [];\n\t\tthis.nodata = undefined;\n\t\tthis.img = null;\n\t\tthis.projection = null;\n\t\tthis.extent = null;\n\t\tthis.stac = stac;\n\t}\n\n\tisBinary() {\n\t\treturn true;\n\t}\n\n\tcanGroup() {\n\t\treturn true;\n\t}\n\n\tasync getData() {\n\t\tawait this.parseMetadata();\n\t\treturn this;\n\t}\n\n\tasync parseMetadata() {\n\t\tlet stacHasExtent = this.stac.geometry || this.stac.extent;\n\n\t\t// Get projection from STAC\n\t\tthis.projection = await ProjManager.addFromStac(this.stac);\n\n\t\t// Get nodata from STAC file:nodata\n\t\tthis.nodata = Utils.parseNodata(this['file:nodata']);\n\n\t\t// Get band names from STAC eo:bands\n\t\tif (Array.isArray(this['eo:bands']) && this['eo:bands'].length > 0) {\n\t\t\tthis['eo:bands'].forEach((band, i) => this.setBandInfo(i, {name: band.name}));\n\t\t}\n\n\t\t// Get min/max/nodata from STAC raster:bands\n\t\tif (Array.isArray(this['raster:bands']) && this['raster:bands'].length > 0) {\n\t\t\tthis['raster:bands'].forEach((band, i) => {\n\t\t\t\t// Set min/max from statistics\n\t\t\t\tif (Utils.isObject(band.statistics)) {\n\t\t\t\t\tthis.setBandInfo(i, {\n\t\t\t\t\t\tmin: band.statistics.minimum,\n\t\t\t\t\t\tmax: band.statistics.maximum\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\t// per-band no-data values are not supported, simply read the no-data from the first occurance if not defined yet\n\t\t\t\tif (typeof this.nodata === 'undefined' && typeof band.nodata !== 'undefined') {\n\t\t\t\t\tthis.nodata = Utils.parseNodata(band.nodata);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\t// If no metadata is present via STAC, try to read it from the GeoTiff itself\n\t\tif (this.bands.length === 0 || this.projection === null || !stacHasExtent || this.bands.find(band => typeof band.min === 'undefined' || typeof band.max === 'undefined')) {\n\t\t\t// Load example tiff image\n\t\t\tlet tiff = await tiffFromUrl(this.getUrl());\n\t\t\tthis.img = await tiff.getImage();\n\n\t\t\t// Get data for each band / sample\n\t\t\tfor(let i = 0; i < this.img.getSamplesPerPixel(); i++) {\n\t\t\t\t// Set min/max/name from statistics\n\t\t\t\tlet band = this.img.getGDALMetadata(i);\n\t\t\t\tlet data = {};\n\t\t\t\tif (GDAL_MIN in band) {\n\t\t\t\t\tdata.min = parseFloat(band[GDAL_MIN]);\n\t\t\t\t}\n\t\t\t\tif (GDAL_MAX in band) {\n\t\t\t\t\tdata.max = parseFloat(band[GDAL_MAX]);\n\t\t\t\t}\n\t\t\t\tif (GDAL_NAME in band) {\n\t\t\t\t\tdata.name = band[GDAL_NAME];\n\t\t\t\t}\n\t\t\t\tthis.setBandInfo(i, data);\n\n\t\t\t\t// get no-data values if needed\n\t\t\t\tlet nodata = this.img.getGDALNoData();\n\t\t\t\tif (typeof this.nodata === 'undefined' && nodata !== null) {\n\t\t\t\t\tthis.nodata = nodata;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Get projection from GeoTiff\n\t\t\tlet code;\n\t\t\tif (!this.projection && this.img.geoKeys) {\n\t\t\t\tlet { ProjectedCSTypeGeoKey, GeographicTypeGeoKey, ProjLinearUnitsGeoKey, GeogAngularUnitsGeoKey } = this.img.geoKeys;\n\t\t\t\tif (ProjectedCSTypeGeoKey) {\n\t\t\t\t\tcode = 'EPSG:' + ProjectedCSTypeGeoKey;\n\t\t\t\t\tthis.projection = await ProjManager.get(code);\n\t\t\t\t}\n\t\t\t\tif (!this.projection && GeographicTypeGeoKey) {\n\t\t\t\t\tcode = 'EPSG:' + GeographicTypeGeoKey;\n\t\t\t\t\tthis.projection = await ProjManager.get(code);\n\t\t\t\t}\n\n\t\t\t\tif (!this.projection && code) {\n\t\t\t\t\tconst units = (ProjLinearUnitsGeoKey && unitsFromCode(ProjLinearUnitsGeoKey)) || (GeogAngularUnitsGeoKey && unitsFromCode(GeogAngularUnitsGeoKey));\n\t\t\t\t\tif (units) {\n\t\t\t\t\t\tthis.projection = new Projection({code, units});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Get extent from geotiff\n\t\t\tif (!stacHasExtent) {\n\t\t\t\ttry {\n\t\t\t\t\tlet bbox = this.img.getBoundingBox();\n\t\t\t\t\tthis.extent = toUserExtent(bbox, this.projection);\n\t\t\t\t} catch (error) {\n\t\t\t\t\tconsole.warn(error);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tsetBandInfo(i, data) {\n\t\tif (this.bands[i]) {\n\t\t\tObject.assign(this.bands[i], data);\n\t\t}\n\t\telse {\n\t\t\tthis.bands.push(Object.assign({id: i+1}, data));\n\t\t}\n\t}\n\n\tgetNoData() {\n\t\treturn this.nodata;\n\t}\n\n\tgetContext() {\n\t\treturn this.stac;\n\t}\n\n\tgetBands() {\n\t\treturn this.bands;\n\t}\n\n\tgetProjection() {\n\t\treturn this.projection;\n\t}\n\n\tgetExtent() {\n\t\treturn this.extent;\n\t}\n\n}\n\nexport default GeoTIFF;","import proj4 from 'proj4';\nimport { get as getProjection } from 'ol/proj';\nimport Projection from 'ol/proj/Projection';\nimport { register } from 'ol/proj/proj4';\n\nimport Utils from '../../utils';\n\nexport default class ProjManager {\n\n\tstatic async get(data) {\n\t\tif (data instanceof Projection) {\n\t\t\treturn data;\n\t\t}\n\n\t\treturn await ProjManager._load(data);\n\t}\n\n\tstatic add(code, meta) {\n\t\ttry {\n\t\t\tproj4.defs(code, meta);\n\t\t\tregister(proj4);\n\t\t\treturn getProjection(code);\n\t\t} catch (error) {\n\t\t\tconsole.error(error);\n\t\t\treturn null;\n\t\t}\n\t}\n\n\t// Get projection details from STAC (todo: add collection support)\n\tstatic async addFromStac(stac) {\n\t\tif (Utils.isObject(stac) && Utils.isObject(stac.properties)) {\n\t\t\tif (stac.properties['proj:epsg']) {\n\t\t\t\treturn await ProjManager.get(stac.properties['proj:epsg']);\n\t\t\t}\n\t\t\telse if (stac.properties['proj:wkt2']) {\n\t\t\t\treturn ProjManager.add(stac.id, stac.properties['proj:wkt2']);\n\t\t\t}\n\t\t}\n\t\treturn null;\n\t}\n\n\tstatic async _load(crs) {\n\t\tlet code, id;\n\t\tif (typeof crs === 'string' && crs.match(/^EPSG:\\d+$/i)) {\n\t\t\tcode = crs.toUpperCase();\n\t\t\tid = crs.substr(5);\n\t\t}\n\t\telse if (Number.isInteger(crs)) {\n\t\t\tcode = `EPSG:${crs}`\n\t\t\tid = String(crs);\n\t\t}\n\t\telse {\n\t\t\treturn null;\n\t\t}\n\n\t\t// Get projection from cache\n\t\tlet projection = getProjection(code);\n\t\tif (projection) {\n\t\t\treturn projection;\n\t\t}\n\n\t\t// Get projection from database\n\t\tlet proj = await import('../../assets/epsg-proj.json');\n\t\tif (id in proj) {\n\t\t\treturn ProjManager.add(code, proj[id]);\n\t\t}\n\n\t\t// No projection found\n\t\treturn null;\n\t}\n\n}","import { BaseProcess, ProcessGraph } from '@openeo/js-processgraphs';\nimport Utils from \"../utils\";\n\nclass ProcessImpl extends BaseProcess {\n\tconstructor(process, exporter) {\n\t\tsuper(process);\n\t\tthis.exporter = exporter;\n\t}\n\tasync execute(node) {\n\t\tawait this.exporter.generateFunction(node);\n\t}\n}\n\nexport default class Exporter extends ProcessGraph {\n\n\tconstructor(process, registry, connection) {\n\t\tsuper(Utils.isObject(process) ? process : {}, registry);\n\t\tthis.connection = connection;\n\t\tthis.indent = 0;\n\t\tthis.code = [];\n\t\tthis.fnCounter = 1;\n\t\tthis.allowEmpty();\n\t\tthis.fillUndefinedParameters();\n\t}\n\n\t// inherited from ProcessGraph\n\n\tcreateProcessGraphInstance(process) {\n\t\tlet pg = new Exporter(process, this.processRegistry, this.getJsonSchemaValidator());\n\t\treturn this.copyProcessGraphInstanceProperties(pg);\n\t}\n\n\tcopyProcessGraphInstanceProperties(pg) {\n\t\tpg = super.copyProcessGraphInstanceProperties(pg);\n\t\tpg.connection = this.connection;\n\t\treturn pg;\n\t}\n\n\tcreateProcessInstance(process) {\n\t\treturn new ProcessImpl(process, this);\n\t}\n\n\tisKeyword(keyword) {\n\t\treturn this.getKeywords().includes(keyword.toLowerCase());\n\t}\n\n\t// Methods to be implemented by sub-class\n\n\tgetKeywords() {\n\t\treturn [];\n\t}\n\n\tcomment(/*comment*/) {}\n\n\tgenerateImports() {}\n\n\tgenerateConnection() {}\n\n\tgenerateAuthentication() {}\n\n\tgenerateBuilder() {}\n\n\tgenerateMetadata(/*key, value*/) {}\n\n\tgenerateMissingParameter() {}\n\n\tasync generateFunction(/*node*/) {}\n\n\tgenerateFunctionParams(parameters) {\n\t\treturn parameters.map(p => {\n\t\t\tif (typeof p.default !== 'undefined') {\n\t\t\t\treturn `${p.name} = ${this.e(p.default)}`;\n\t\t\t}\n\t\t\telse {\n\t\t\t\treturn p.name;\n\t\t\t}\n\t\t});\n\t}\n\n\tasync generateCallback(/*callback, parameters, variable*/) {}\n\n\tgenerateResult(/*resultNode, callback*/) {}\n\n\tmakeNull() {\n\t\treturn \"null\";\n\t}\n\tmakeBoolean(val) {\n\t\treturn val ? \"true\" : \"false\";\n\t}\n\tmakeArray(arr) {\n\t\treturn `[${arr.join(', ')}]`;\n\t}\n\tmakeObject(obj) {\n\t\tlet arr = Utils.mapObject(obj, (val, key) => `${this.makeString(key)}: ${val}`);\n\t\treturn `{${arr.join(', ')}}`;\n\t}\n\tmakeString(str) {\n\t\treturn JSON.stringify(str);\n\t}\n\tmakeNumber(num) {\n\t\treturn num;\n\t}\n\n\t// Helpers\n\n\te(value) {\n\t\tif (value === null) {\n\t\t\treturn this.makeNull();\n\t\t}\n\t\telse if (typeof value === 'boolean') {\n\t\t\treturn this.makeBoolean(value);\n\t\t}\n\t\telse if (typeof value === 'number') {\n\t\t\treturn this.makeNumber(value);\n\t\t}\n\t\telse if (typeof value === 'string') {\n\t\t\treturn this.makeString(value);\n\t\t}\n\t\telse if (Array.isArray(value)) {\n\t\t\treturn this.makeArray(value.map(val => this.e(val)));\n\t\t}\n\t\telse if (Utils.isObject(value)) {\n\t\t\treturn this.makeObject(Utils.mapObjectValues(value, val => this.e(val)));\n\t\t}\n\t\telse if (typeof value === 'function') {\n\t\t\treturn value();\n\t\t}\n\t\telse {\n\t\t\treturn this.makeNull();\n\t\t}\n\t}\n\n\tgenerateMetadata() {\n\t\tlet hasComment = false;\n\t\tfor(let key in this.process) {\n\t\t\tif (key === 'process_graph') {\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tlet val = this.process[key];\n\t\t\tif (Array.isArray(val) && val.length === 0) {\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\telse if (typeof val === 'string' && val.length === 0) {\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\telse if (typeof val === 'boolean' && !val) {\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tif (!hasComment) {\n\t\t\t\tthis.newLine();\n\t\t\t\tthis.comment(`Set the metadata for the process`);\n\t\t\t\thasComment = true;\n\t\t\t}\n\t\t\tthis.generateMetadataEntry(key, val);\n\t\t}\n\t}\n\n\tasync resolveArguments(args, onExporter, filter) {\n\t\tlet newArgs = Array.isArray(args) ? [] : {};\n\t\tfor(let key in args) {\n\t\t\tlet value = args[key];\n\t\t\tif (filter && filter(key, value)) {\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tif (Utils.isObject(value)) {\n\t\t\t\tif (value.from_node) {\n\t\t\t\t\tnewArgs[key] = () => this.var(value.from_node);\n\t\t\t\t\tcontinue; \n\t\t\t\t}\n\t\t\t\telse if (value.from_parameter) {\n\t\t\t\t\tnewArgs[key] = () => this.var(value.from_parameter);\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\telse if (value instanceof Exporter) {\n\t\t\t\t\tlet fnName = await onExporter(key);\n\t\t\t\t\tnewArgs[key] = () => fnName;\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tnewArgs[key] = await this.resolveArguments(value, onExporter, filter);\n\t\t\t\t}\n\t\t\t}\n\t\t\telse if (Array.isArray(value)) {\n\t\t\t\tnewArgs[key] = await this.resolveArguments(value, onExporter, filter);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tnewArgs[key] = value;\n\t\t\t}\n\t\t}\n\t\treturn newArgs;\n\t}\n\n\tasync resolveCallback(node, key) {\n\t\tlet callback = node.getArgument(key);\n\t\tlet parameters = callback.getCallbackParameters();\n\t\tawait callback.execute(parameters);\n\t\tlet fnName = this.var(`${key}${this.fnCounter++}`, 'fn_');\n\t\tlet replacement = await this.generateCallback(callback, parameters, fnName);\n\t\treturn replacement ? replacement : fnName;\n\t}\n\n\tasync generateArguments(node, ordered = false, filter = null) {\n\t\tlet args = await this.resolveArguments(node.arguments, async key => await this.resolveCallback(node, key), filter);\n\t\tif (ordered) {\n\t\t\targs = this.orderArguments(node, args);\n\t\t}\n\t\treturn args;\n\t}\n\n\torderArguments(node, args) {\n\t\tlet process = node.getProcessGraph().getProcess(node);\n\t\tif (process && Array.isArray(process.parameters)) {\n\t\t\tlet orderedArgs = process.parameters.map(param => {\n\t\t\t\tif (typeof args[param.name] !== 'undefined') {\n\t\t\t\t\treturn args[param.name];\n\t\t\t\t}\n\t\t\t\telse if (!param.optional) {\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\treturn undefined;\n\t\t\t\t}\n\t\t\t});\n\t\t\tlet definedValueFound = false;\n\t\t\tfor(let i = orderedArgs.length-1; i >= 0; i--) {\n\t\t\t\tif (typeof orderedArgs[i] === 'undefined') {\n\t\t\t\t\tif (definedValueFound) {\n\t\t\t\t\t\torderedArgs[i] = null;\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\torderedArgs.pop();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tdefinedValueFound = true;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn orderedArgs;\n\t\t}\n\t}\n\n\tvar(id, prefix = \"datacube\") {\n\t\tid = String(id);\n\t\tif (this.isKeyword(id)) {\n\t\t\treturn `${id}_`;\n\t\t}\n\t\tif (!id.match(/^[a-z_]\\w*$/)) {\n\t\t\treturn `${prefix}${id}`;\n\t\t}\n\t\telse {\n\t\t\treturn id;\n\t\t}\n\t}\n\n\tgetTab() {\n\t\treturn `\\t`;\n\t}\n\n\taddCode(code, prefix = '') {\n\t\tif (typeof code !== 'string') {\n\t\t\treturn;\n\t\t}\n\t\tlet tabs = this.getTab().repeat(this.indent);\n\t\tlet lines = code.trim().split(/\\r\\n|\\r|\\n/g);\n\t\tfor(let line of lines) {\n\t\t\tthis.code.push(`${tabs}${prefix}${line}\\n`);\n\t\t}\n\t}\n\n\tnewLine(count = 1) {\n\t\tfor(let i = 0; i < count; i++) {\n\t\t\tthis.addCode('');\n\t\t}\n\t}\n\n\tgetServerUrl() {\n\t\treturn this.connection.getUrl();\n\t}\n\n\tasync toCode(callback = false) {\n\t\tthis.code = [];\n\t\tif (!callback) {\n\t\t\tthis.comment(`Import required packages`);\n\t\t\tthis.generateImports();\n\t\t\tthis.newLine();\n\t\t\tthis.comment(`Connect to the back-end`);\n\t\t\tthis.generateConnection();\n\t\t\tthis.generateAuthentication();\n\t\t\tthis.newLine();\n\t\t\tthis.generateBuilder();\n\t\t\tthis.generateMetadata();\n\t\t\tthis.newLine();\n\t\t}\n\t\tlet params = this.getProcessParameters();\n\t\tif (params.length > 0) {\n\t\t\tthis.comment('ToDo: Here you need to set values for the parameters');\n\t\t\tfor(let param of params) {\n\t\t\t\tthis.generateMissingParameter(param);\n\t\t\t}\n\t\t\tthis.newLine();\n\t\t}\n\t\tawait this.execute();\n\t\tif (!callback) {\n\t\t\tthis.newLine();\n\t\t\tthis.comment(`The process can be executed synchronously (see below), as batch job or as web service now`);\n\t\t}\n\t\tthis.generateResult(this.getResultNode(), callback);\n\t\treturn this.code.join('').trim();\n\t}\n\n\tasync execute() {\n\t\tawait this.validate();\n\t\tthis.reset();\n\t\tawait this.executeNodes(this.getStartNodes());\n\t\treturn this.getResultNode();\n\t}\n\n\tisMath() {\n\t\tif (typeof this._isMath === 'undefined') {\n\t\t\t// Determine whether the process is just math\n\t\t\tthis._isMath = this.processRegistry.isMath(this);\n\t\t}\n\t\treturn this._isMath;\n\t}\n\n}","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./IDE.vue?vue&type=style&index=0&lang=scss&\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./JobPanel.vue?vue&type=style&index=0&lang=scss&\"","var render = function () {\nvar this$1 = this;\nvar _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{ref:\"visualEditor\",staticClass:\"visualEditor\"},[_c('div',{staticClass:\"sourceHeader\"},[(_vm.title)?_c('strong',[_vm._v(_vm._s(_vm.title))]):_vm._e(),_c('div',{staticClass:\"sourceToolbar\"},[(_vm.editable)?_c('span',{staticClass:\"sepr\"},[_c('button',{attrs:{\"type\":\"button\",\"title\":\"New script / Clear current script\"},on:{\"click\":_vm.confirmClear}},[_c('i',{staticClass:\"fas fa-file\"})]),_vm._t(\"file-toolbar\")],2):_vm._e(),(_vm.editable)?_c('span',{staticClass:\"sepr\"},[_c('button',{attrs:{\"type\":\"button\",\"disabled\":!_vm.canUndo,\"title\":\"Revert last change\"},on:{\"click\":function($event){return _vm.$refs.blocks.undo()}}},[_c('i',{staticClass:\"fas fa-undo-alt\"})]),_c('button',{attrs:{\"type\":\"button\",\"disabled\":!_vm.canRedo,\"title\":\"Redo last reverted change\"},on:{\"click\":function($event){return _vm.$refs.blocks.redo()}}},[_c('i',{staticClass:\"fas fa-redo-alt\"})]),_c('button',{attrs:{\"type\":\"button\",\"disabled\":!_vm.hasSelection,\"title\":\"Delete selected elements\"},on:{\"click\":function($event){return _vm.$refs.blocks.deleteSelected()}}},[_c('i',{staticClass:\"fas fa-trash\"})])]):_vm._e(),(_vm.editable)?_c('span',{staticClass:\"sepr\"},[(!_vm.parent)?_c('button',{attrs:{\"type\":\"button\",\"title\":\"Edit Process Metadata\"},on:{\"click\":function () { return _vm.editProcess(_vm.value); }}},[_c('i',{staticClass:\"fas fa-edit\"})]):_vm._e(),_c('button',{attrs:{\"type\":\"button\",\"title\":\"Add Parameter\"},on:{\"click\":_vm.addParameter}},[_c('i',{staticClass:\"fas fa-parking\"})]),(_vm.supportsMath)?_c('button',{class:{highlightFormula: _vm.isMath},attrs:{\"type\":\"button\",\"title\":\"Insert/Edit formula\"},on:{\"click\":_vm.showExpressionModal}},[_c('i',{staticClass:\"fas fa-square-root-alt\"})]):_vm._e()]):_vm._e(),_c('button',{class:{compactMode: _vm.compactMode},attrs:{\"type\":\"button\",\"title\":\"Compact Mode\"},on:{\"click\":function($event){return _vm.$refs.blocks.toggleCompact()}}},[_c('i',{staticClass:\"fas fa-compress-arrows-alt\"})]),_c('button',{attrs:{\"type\":\"button\",\"title\":\"Scale to perfect size\"},on:{\"click\":function($event){return _vm.$refs.blocks.perfectScale()}}},[_c('i',{staticClass:\"fas fa-arrows-alt\"})]),_c('FullscreenButton',{attrs:{\"element\":function () { return this$1.$refs.visualEditor; }},on:{\"changed\":function (enabled) {this$1.$refs.blocks.perfectScale(); _vm.isFullScreen = enabled}}}),_vm._t(\"toolbar\")],2)]),_c('div',{staticClass:\"editorSplitter\"},[((_vm.showDiscoveryToolbar || _vm.isFullScreen) && _vm.editable)?_c('DiscoveryToolbar',{staticClass:\"discoveryToolbar\",attrs:{\"onAddProcess\":_vm.insertProcess}}):_vm._e(),_c('div',{staticClass:\"graphBuilder\",on:{\"drop\":_vm.onDrop,\"dragover\":_vm.allowDrop}},[_c('ModelBuilder',{ref:\"blocks\",attrs:{\"editable\":_vm.editable,\"id\":_vm.id,\"processes\":_vm.processes,\"collections\":_vm.collections,\"parent\":_vm.parent,\"parentSchema\":_vm.parentSchema,\"value\":_vm.value},on:{\"input\":_vm.commit,\"error\":_vm.errorHandler,\"showProcess\":function (id, namespace) { return _vm.emit('showProcess', {id: id, namespace: namespace}); },\"showCollection\":function (id) { return _vm.emit('showCollection', id); },\"showParameter\":function (param) { return _vm.emit('showProcessParameter', param); },\"editParameter\":_vm.editParameter,\"editArguments\":_vm.openArgumentEditor,\"compactMode\":function (compact) { return this$1.compactMode = compact; },\"selectionChanged\":_vm.selectionChanged,\"historyChanged\":_vm.historyChanged}})],1)],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n\t<div class=\"visualEditor\" ref=\"visualEditor\">\n\t\t<div class=\"sourceHeader\">\n\t\t\t<strong v-if=\"title\">{{ title }}</strong>\n\t\t\t<div class=\"sourceToolbar\">\n\t\t\t\t<span class=\"sepr\" v-if=\"editable\">\n\t\t\t\t\t<button type=\"button\" @click=\"confirmClear\" title=\"New script / Clear current script\"><i class=\"fas fa-file\"></i></button>\n\t\t\t\t\t<slot name=\"file-toolbar\"></slot>\n\t\t\t\t</span>\n\t\t\t\t<span class=\"sepr\" v-if=\"editable\">\n\t\t\t\t\t<button type=\"button\" @click=\"$refs.blocks.undo()\" :disabled=\"!canUndo\" title=\"Revert last change\"><i class=\"fas fa-undo-alt\"></i></button>\n\t\t\t\t\t<button type=\"button\" @click=\"$refs.blocks.redo()\" :disabled=\"!canRedo\" title=\"Redo last reverted change\"><i class=\"fas fa-redo-alt\"></i></button>\n\t\t\t\t\t<button type=\"button\" @click=\"$refs.blocks.deleteSelected()\" :disabled=\"!hasSelection\" title=\"Delete selected elements\"><i class=\"fas fa-trash\"></i></button>\n\t\t\t\t</span>\n\t\t\t\t<span class=\"sepr\" v-if=\"editable\">\n\t\t\t\t\t<button type=\"button\" v-if=\"!parent\" @click=\"() => editProcess(value)\" title=\"Edit Process Metadata\"><i class=\"fas fa-edit\"></i></button>\n\t\t\t\t\t<button type=\"button\" @click=\"addParameter\" title=\"Add Parameter\"><i class=\"fas fa-parking\"></i></button>\n\t\t\t\t\t<button type=\"button\" v-if=\"supportsMath\" :class=\"{highlightFormula: isMath}\" @click=\"showExpressionModal\" title=\"Insert/Edit formula\"><i class=\"fas fa-square-root-alt\"></i></button>\n\t\t\t\t</span>\n\t\t\t\t<button type=\"button\" @click=\"$refs.blocks.toggleCompact()\" :class=\"{compactMode: compactMode}\" title=\"Compact Mode\"><i class=\"fas fa-compress-arrows-alt\"></i></button>\n\t\t\t\t<button type=\"button\" @click=\"$refs.blocks.perfectScale()\" title=\"Scale to perfect size\"><i class=\"fas fa-arrows-alt\"></i></button>\n\t\t\t\t<FullscreenButton :element=\"() => this.$refs.visualEditor\" @changed=\"enabled => {this.$refs.blocks.perfectScale(); isFullScreen = enabled}\" />\n\t\t\t\t<slot name=\"toolbar\"></slot>\n\t\t\t</div>\n\t\t</div>\n\t\t<div class=\"editorSplitter\">\n\t\t\t<DiscoveryToolbar v-if=\"(showDiscoveryToolbar || isFullScreen) && editable\" class=\"discoveryToolbar\" :onAddProcess=\"insertProcess\" />\n\t\t\t<div class=\"graphBuilder\" @drop=\"onDrop\" @dragover=\"allowDrop\">\n\t\t\t\t<ModelBuilder\n\t\t\t\t\tref=\"blocks\"\n\t\t\t\t\t:editable=\"editable\"\n\t\t\t\t\t:id=\"id\"\n\t\t\t\t\t:processes=\"processes\"\n\t\t\t\t\t:collections=\"collections\"\n\t\t\t\t\t:parent=\"parent\"\n\t\t\t\t\t:parentSchema=\"parentSchema\"\n\t\t\t\t\t:value=\"value\"\n\t\t\t\t\t@input=\"commit\"\n\t\t\t\t\t@error=\"errorHandler\"\n\t\t\t\t\t@showProcess=\"(id, namespace) => emit('showProcess', {id, namespace})\"\n\t\t\t\t\t@showCollection=\"id => emit('showCollection', id)\"\n\t\t\t\t\t@showParameter=\"param => emit('showProcessParameter', param)\"\n\t\t\t\t\t@editParameter=\"editParameter\"\n\t\t\t\t\t@editArguments=\"openArgumentEditor\"\n\t\t\t\t\t@compactMode=\"compact => this.compactMode = compact\"\n\t\t\t\t\t@selectionChanged=\"selectionChanged\"\n\t\t\t\t\t@historyChanged=\"historyChanged\"\n\t\t\t\t\t/>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</template>\n\n<script>\nimport ModelBuilder from '@openeo/vue-components/components/ModelBuilder.vue';\nimport Utils from '../utils.js';\nimport DiscoveryToolbar from './DiscoveryToolbar.vue';\nimport EventBusMixin from './EventBusMixin.vue';\nimport FullscreenButton from './FullscreenButton.vue';\nimport { ProcessParameter } from '@openeo/js-commons';\nimport JavaScript from '../export/javascript';\n\nexport default {\n\tname: 'VisualEditor',\n\tmixins: [EventBusMixin],\n\tcomponents: {\n\t\tModelBuilder,\n\t\tDiscoveryToolbar,\n\t\tFullscreenButton\n\t},\n\tprops: {\n\t\tid: String,\n\t\teditable: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: true\n\t\t},\n\t\tvalue: {\n\t\t\ttype: Object,\n\t\t\tdefault: () => null\n\t\t},\n\t\tparent: {\n\t\t\ttype: Object,\n\t\t\tdefault: null\n\t\t},\n\t\tparentSchema: {\n\t\t\ttype: Object,\n\t\t\tdefault: null\n\t\t},\n\t\tshowDiscoveryToolbar: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false\n\t\t},\n\t\ttitle: {\n\t\t\ttype: String\n\t\t},\n\t\tdefaultValue: {}\n\t},\n\tcomputed: {\n\t\t...Utils.mapState(['connection', 'collections']),\n\t\t...Utils.mapGetters(['processes', 'supportsMath']),\n\t\t...Utils.mapState('editor', ['initialNode']),\n\t\tisMath() {\n\t\t\treturn (this.supportsMath && this.processes.isMath(this.value));\n\t\t}\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tcanUndo: false,\n\t\t\tcanRedo: false,\n\t\t\tcompactMode: false,\n\t\t\thasSelection: false,\n\t\t\tformula: null,\n\t\t\tisFullScreen: false\n\t\t};\n\t},\n\twatch: {\n\t\tvalue: {\n\t\t\timmediate: true,\n\t\t\thandler(value) {\n\t\t\t\tif (this.initialNode && Utils.isObject(value) && Utils.isObject(value.process_graph)) {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tlet node = this.initialNode;\n\t\t\t\t\t\tif (node == \"1\" && Utils.size(value.process_graph)) {\n\t\t\t\t\t\t\tnode = Object.keys(value.process_graph)[0];\n\t\t\t\t\t\t}\n\t\t\t\t\t\tthis.openArgumentEditorForNode(node);\n\t\t\t\t\t} catch (error) {\n\t\t\t\t\t\tUtils.exception(this, error);\n\t\t\t\t\t} finally {\n\t\t\t\t\t\tthis.setInitialNode(null);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\tmethods: {\n\t\t...Utils.mapMutations('editor', ['setInitialNode']),\n\t\tcommit(value) {\n\t\t\t// Fix #115: Return the default value/null if no nodes are given\n\t\t\tif (typeof this.defaultValue !== 'undefined' && Utils.isObject(value) && Utils.size(value.process_graph) === 0) {\n\t\t\t\tvalue = this.defaultValue;\n\t\t\t}\n\t\t\tthis.$emit('input', value);\n\t\t},\n\t\terrorHandler(message, title = null) {\n\t\t\tUtils.exception(this, message, title)\n\t\t},\n\t\tselectionChanged(blocks, edges) {\n\t\t\tthis.hasSelection = Boolean(blocks.filter(block => block.$el.allowsDelete).length || edges.length);\n\t\t},\n\t\thistoryChanged(history, index) {\n\t\t\tthis.canUndo = !!history[index-1];\n\t\t\tthis.canRedo = !!history[index+1];\n\t\t},\n\t\tallowDrop(event) {\n\t\t\tevent.preventDefault();\n\t\t},\n\t\tonDrop(event) {\n\t\t\tvar editorNodeJson = event.dataTransfer.getData(\"application/vnd.openeo-node\");\n\t\t\tif (editorNodeJson) {\n\t\t\t\tlet node = JSON.parse(editorNodeJson);\n\t\t\t\tthis.insertProcess(node, event.pageX, event.pageY);\n\t\t\t\treturn event.preventDefault();\n\t\t\t}\n\n\t\t\t// Read a JSON file that has been dropped\n\t\t\tlet files = event.dataTransfer.files;\n\t\t\tif (files.length === 1) {\n\t\t\t\tlet file = event.dataTransfer.files[0];\n\t\t\t\tif (file.type === 'application/json') {\n\t\t\t\t\tvar reader = new FileReader();\n\t\t\t\t\treader.onload = async e => {\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tlet process = JSON.parse(e.target.result);\n\t\t\t\t\t\t\tawait this.$refs.blocks.import(process);\n\t\t\t\t\t\t} catch(error) {\n\t\t\t\t\t\t\tUtils.exception(this, error, \"Parsing JSON file failed\");\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t\treader.onerror = error => Utils.exception(this, error, \"Reading JSON file failed\");\n\t\t\t\t\treader.readAsText(file, \"UTF-8\");\n\t\t\t\t\treturn event.preventDefault();\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tgetNameField(value = undefined, name = \"name\") {\n\t\t\treturn {\n\t\t\t\tvalue,\n\t\t\t\tname,\n\t\t\t\tdescription: 'A unique identifier. Must contain only letters (`a`-`z`), digits (`0`-`9`) and underscores (`_`). `snake_case` is recommended.',\n\t\t\t\tlabel: 'Name',\n\t\t\t\tschema: {\n\t\t\t\t\ttype: 'string',\n\t\t\t\t\tpattern: '^\\\\w+$'\n\t\t\t\t},\n\t\t\t\tdefault: null\n\t\t\t};\n\t\t},\n\t\tgetDescriptionField(value = undefined, optional = false, name = \"description\", label = \"Description\") {\n\t\t\treturn {\n\t\t\t\tvalue,\n\t\t\t\tname,\n\t\t\t\tdescription: 'Provides a detailed description. CommonMark (Markdown) syntax can be used for rich text formatting.',\n\t\t\t\tlabel,\n\t\t\t\toptional,\n\t\t\t\tschema: {\n\t\t\t\t\ttype: 'string',\n\t\t\t\t\tsubtype: 'commonmark'\n\t\t\t\t}\n\t\t\t};\n\t\t},\n\t\tgetOptionalField(value = undefined) {\n\t\t\treturn {\n\t\t\t\tvalue,\n\t\t\t\tname: 'optional',\n\t\t\t\tlabel: 'Optional',\n\t\t\t\tdescription: 'Parameters by default are required. CHeck this option to make the parameter optional. For optional parameters a default value should be specified.',\n\t\t\t\toptional: true,\n\t\t\t\tschema: {\n\t\t\t\t\ttype: 'boolean'\n\t\t\t\t},\n\t\t\t\tdefault: false\n\t\t\t};\n\t\t},\n\t\tgetDefaultField(value = undefined) {\n\t\t\treturn {\n\t\t\t\tvalue,\n\t\t\t\tname: 'default',\n\t\t\t\tlabel: 'Default Value',\n\t\t\t\tdescription: 'This value is used whenever the user of this process did not specify a value for this parameter.',\n\t\t\t\ttoggledBy: 'optional',\n\t\t\t\toptional: true,\n\t\t\t\tschema: {}\n\t\t\t};\n\t\t},\n\t\tgetExperimentalField(value = undefined) {\n\t\t\treturn {\n\t\t\t\tvalue,\n\t\t\t\tname: 'experimental',\n\t\t\t\tlabel: 'Experimental',\n\t\t\t\tdescription: 'Declares that this is experimental, which means that it is unstable and likely to change.',\n\t\t\t\toptional: true,\n\t\t\t\tschema: {\n\t\t\t\t\ttype: 'boolean'\n\t\t\t\t},\n\t\t\t\tdefault: false\n\t\t\t};\n\t\t},\n\t\tgetDeprecatedField(value = undefined) {\n\t\t\treturn {\n\t\t\t\tvalue,\n\t\t\t\tname: 'deprecated',\n\t\t\t\tlabel: 'Deprecated',\n\t\t\t\tdescription: 'Declares that this is deprecated with the potential to be removed in any of the next versions. It should be transitioned out of usage.',\n\t\t\t\toptional: true,\n\t\t\t\tschema: {\n\t\t\t\t\ttype: 'boolean'\n\t\t\t\t},\n\t\t\t\tdefault: false\n\t\t\t};\n\t\t},\n\t\tgetSchemaField(value = undefined, name = \"schema\", label = \"Data Types\") {\n\t\t\tlet subtype = !value ? 'openeo-datatype' : 'json-schema';\n\t\t\treturn {\n\t\t\t\tvalue,\n\t\t\t\tname,\n\t\t\t\tlabel,\n\t\t\t\tdescription: 'Allowed data type(s) as JSON Schema.',\n\t\t\t\tschema: [\n\t\t\t\t\t{\n\t\t\t\t\t\ttitle: 'Single data type',\n\t\t\t\t\t\ttype: 'object',\n\t\t\t\t\t\tsubtype\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\ttitle: 'Multiple data types',\n\t\t\t\t\t\ttype: 'array',\n\t\t\t\t\t\tminItems: 2,\n\t\t\t\t\t\titems: {\n\t\t\t\t\t\t\ttype: 'object',\n\t\t\t\t\t\t\tsubtype\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t]\n\t\t\t};\n\t\t},\n\t\teditProcess(process) {\n\t\t\tprocess = Utils.isObject(process) ? process : {};\n\t\t\tlet returns = Utils.isObject(process.returns) ? process.returns : {};\n\t\t\tvar fields = [\n\t\t\t\tthis.getNameField(process.id, 'id'),\n\t\t\t\t{\n\t\t\t\t\tvalue: process.summary,\n\t\t\t\t\tname: 'summary',\n\t\t\t\t\tdescription: 'A very short description of the process with usually less than 60 characters.',\n\t\t\t\t\tlabel: 'Summary',\n\t\t\t\t\toptional: true,\n\t\t\t\t\tschema: {\n\t\t\t\t\t\ttype: 'string'\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tthis.getDescriptionField(process.description, true),\n\t\t\t\t{\n\t\t\t\t\tvalue: process.categories,\n\t\t\t\t\tname: 'categories',\n\t\t\t\t\tlabel: 'Categories',\n\t\t\t\t\toptional: true,\n\t\t\t\t\tschema: {\n\t\t\t\t\t\ttype: 'array',\n\t\t\t\t\t\titems: {\n\t\t\t\t\t\t\ttype: 'string'\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tthis.getExperimentalField(process.experimental),\n\t\t\t\tthis.getDeprecatedField(process.deprecated),\n\t\t\t\t{\n\t\t\t\t\tlabel: 'Parameters',\n\t\t\t\t\tdescription: 'The parameters can be edited directly in the \"Visual Model\" interface.',\n\t\t\t\t\tinfo: true\n\t\t\t\t},\n\t\t\t\tthis.getDescriptionField(returns.description, true, 'returns_description', 'Return Value > Description'),\n\t\t\t\tthis.getSchemaField(returns.schema, 'returns_schema', 'Return Value > Data Type'),\n\t\t\t\t{\n\t\t\t\t\tvalue: process.exceptions,\n\t\t\t\t\tname: 'exceptions',\n\t\t\t\t\tdescription: 'Declares exceptions (errors) that might occur during execution of this process. This list is just for informative purposes.\\n\\nThe keys of the object are the error codes, which should only consist of alphanumerical characters. `PascalCase` is recommended.',\n\t\t\t\t\tlabel: 'Errors',\n\t\t\t\t\toptional: true,\n\t\t\t\t\tschema: {\n\t\t\t\t\t\ttype: 'object',\n\t\t\t\t\t\tadditionalProperties: {\n\t\t\t\t\t\t\ttype: 'object',\n\t\t\t\t\t\t\trequired: [\n\t\t\t\t\t\t\t\t\"message\"\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\tproperties: {\n\t\t\t\t\t\t\t\tmessage: {\n\t\t\t\t\t\t\t\t\ttitle: 'Error Message',\n\t\t\t\t\t\t\t\t\ttype: 'string'\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tdescription: {\n\t\t\t\t\t\t\t\t\ttitle: 'Description',\n\t\t\t\t\t\t\t\t\ttype: 'string',\n\t\t\t\t\t\t\t\t\tsubtype: 'commonmark'\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\thttp: {\n\t\t\t\t\t\t\t\t\ttitle: 'HTTP Status Code',\n\t\t\t\t\t\t\t\t\ttype: 'integer',\n\t\t\t\t\t\t\t\t\tenum: [\n\t\t\t\t\t\t\t\t\t\t400,\n\t\t\t\t\t\t\t\t\t\t500,\n\t\t\t\t\t\t\t\t\t\t501\n\t\t\t\t\t\t\t\t\t]\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tvalue: process.examples,\n\t\t\t\t\tname: 'examples',\n\t\t\t\t\tlabel: 'Examples',\n\t\t\t\t\tdescription: 'Example calls for this process with specific values for the parameters (arguments) and the result (return value).',\n\t\t\t\t\toptional: true,\n\t\t\t\t\tschema: {\n\t\t\t\t\t\ttype: 'array',\n\t\t\t\t\t\titems: {\n\t\t\t\t\t\t\ttype: 'object',\n\t\t\t\t\t\t\trequired: [\n\t\t\t\t\t\t\t\t\"arguments\"\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\tproperties: {\n\t\t\t\t\t\t\t\ttitle: {\n\t\t\t\t\t\t\t\t\ttitle: 'Title',\n\t\t\t\t\t\t\t\t\ttype: 'string'\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\ttitle: {\n\t\t\t\t\t\t\t\t\ttitle: 'Description',\n\t\t\t\t\t\t\t\t\ttype: 'string',\n\t\t\t\t\t\t\t\t\tsubtype: 'commonmark'\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\targuments: {\n\t\t\t\t\t\t\t\t\ttitle: 'Arguments',\n\t\t\t\t\t\t\t\t\ttype: 'object',\n\t\t\t\t\t\t\t\t\tdefault: {}\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\treturns: {\n\t\t\t\t\t\t\t\t\ttitle: 'Return Value'\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tvalue: process.links,\n\t\t\t\t\tname: 'links',\n\t\t\t\t\tlabel: 'Links',\n\t\t\t\t\tdescription: 'Links related to this process, e.g. additional documentation.',\n\t\t\t\t\toptional: true,\n\t\t\t\t\tschema: {\n\t\t\t\t\t\ttype: 'array',\n\t\t\t\t\t\titems: {\n\t\t\t\t\t\t\ttype: 'object',\n\t\t\t\t\t\t\trequired: [\n\t\t\t\t\t\t\t\t\"href\",\n\t\t\t\t\t\t\t\t\"rel\"\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\tproperties: {\n\t\t\t\t\t\t\t\thref: {\n\t\t\t\t\t\t\t\t\ttitle: 'URL',\n\t\t\t\t\t\t\t\t\ttype: 'string'\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\trel: {\n\t\t\t\t\t\t\t\t\ttitle: 'Relation',\n\t\t\t\t\t\t\t\t\tdescription: 'For examples see [IANA relation types](https://www.iana.org/assignments/link-relations/link-relations.xhtml)',\n\t\t\t\t\t\t\t\t\ttype: 'string',\n\t\t\t\t\t\t\t\t\tdefault: 'about'\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\ttitle: {\n\t\t\t\t\t\t\t\t\ttitle: 'Title',\n\t\t\t\t\t\t\t\t\ttype: 'string'\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\ttype: {\n\t\t\t\t\t\t\t\t\ttitle: 'Media Type',\n\t\t\t\t\t\t\t\t\tdescription: 'For examples see [IANA media types](https://www.iana.org/assignments/media-types/media-types.xhtml)',\n\t\t\t\t\t\t\t\t\ttype: 'string'\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t];\n\t\t\tthis.emit('showDataForm', \"Edit Process\", fields, async data => {\n\t\t\t\tlet newData = Utils.pickFromObject(data, ['id', 'summary', 'description', 'categories', 'experimental', 'deprecated', 'exception', 'examples', 'links']);\n\t\t\t\tif (typeof newData.description === 'string' || Utils.isObject(newData.schema)) {\n\t\t\t\t\tnewData.returns = {\n\t\t\t\t\t\tdescription: data.returns_description,\n\t\t\t\t\t\tschema: data.returns_schema\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tlet process = this.$refs.blocks.export(true);\n\t\t\t\tlet newProcess = Object.assign({}, process, newData);\n\t\t\t\tconst defaults = {\n\t\t\t\t\tid: \"\",\n\t\t\t\t\tsummary: \"\",\n\t\t\t\t\tdescription: \"\",\n\t\t\t\t\tcategories: [],\n\t\t\t\t\texperimental: false,\n\t\t\t\t\tdeprecated: false,\n\t\t\t\t\texamples: [],\n\t\t\t\t\tlinks: [],\n\t\t\t\t\tprocess_graph: {},\n\t\t\t\t};\n\t\t\t\t// Clean up some defaults / empty values\n\t\t\t\tfor(let key in defaults) {\n\t\t\t\t\tif (Utils.equals(defaults[key], newProcess[key])) {\n\t\t\t\t\t\tdelete newProcess[key];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tthis.commit(newProcess);\n\t\t\t});\n\t\t},\n\t\taddParameter() {\n\t\t\tvar fields = [\n\t\t\t\tthis.getNameField(),\n\t\t\t\tthis.getDescriptionField(),\n\t\t\t\tthis.getOptionalField(),\n\t\t\t\tthis.getDefaultField(),\n\t\t\t\tthis.getExperimentalField(),\n\t\t\t\tthis.getDeprecatedField(),\n\t\t\t\tthis.getSchemaField()\n\t\t\t];\n\t\t\tthis.emit('showDataForm', \"Add Parameter\", fields, async data => {\n\t\t\t\tif (typeof data.name === 'string' && data.name.length > 0) {\n\t\t\t\t\tawait this.$refs.blocks.addPgParameter(data);\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\teditParameter(parameter, title = \"Edit Parameter\", saveCallback = null) {\n\t\t\tvar fields = [\n\t\t\t\tthis.getNameField(parameter.name),\n\t\t\t\tthis.getDescriptionField(parameter.description),\n\t\t\t\tthis.getOptionalField(parameter.optional),\n\t\t\t\tthis.getDefaultField(parameter.default),\n\t\t\t\tthis.getExperimentalField(parameter.experimental),\n\t\t\t\tthis.getDeprecatedField(parameter.deprecated),\n\t\t\t\tthis.getSchemaField(parameter.schema)\n\t\t\t];\n\t\t\tthis.emit('showDataForm', title, fields, saveCallback);\n\t\t},\n\t\tshowExpressionModal() {\n\t\t\tlet js = new JavaScript(this.value, this.processes, this.connection, true);\n\t\t\tjs.setCallbackParameters(this.$refs.blocks.getPgParameters().map(block => block.spec));\n\t\t\ttry {\n\t\t\t\tjs.parse();\n\t\t\t\tlet props = {\n\t\t\t\t\tprocess: js\n\t\t\t\t};\n\t\t\t\tlet events = {\n\t\t\t\t\tsave: this.insertNodes\n\t\t\t\t};\n\t\t\t\tthis.emit('showModal', 'ExpressionModal', props, events);\n\t\t\t} catch (error) {\n\t\t\t\tUtils.exception(this, error);\n\t\t\t}\n\t\t},\n\t\topenArgumentEditorForNode(nodeId) {\n\t\t\tlet process = Utils.deepClone(this.value);\n\t\t\tlet node = process.process_graph[nodeId];\n\t\t\tlet processSpec = this.processes.get(node.process_id, node.namespace);\n\t\t\tthis.openArgumentEditor(\n\t\t\t\tprocessSpec.parameters.map(p => new ProcessParameter(p)).filter(p => p.isEditable()),\n\t\t\t\tnode.arguments,\n\t\t\t\tprocessSpec.id,\n\t\t\t\ttrue,\n\t\t\t\tnull,\n\t\t\t\tdata => {\n\t\t\t\t\tObject.assign(node, {arguments: data});\n\t\t\t\t\tthis.commit(process);\n\t\t\t\t}\n\t\t\t);\n\t\t},\n\t\topenArgumentEditor(parameters, data, title = \"Edit\", editable = true, selectParameterName = null, saveCallback = null, parent = null) {\n\t\t\tlet props = {\n\t\t\t\ttitle,\n\t\t\t\tparameters,\n\t\t\t\tdata,\n\t\t\t\teditable,\n\t\t\t\tselectParameterName,\n\t\t\t\tparent\n\t\t\t};\n\t\t\tlet events = {};\n\t\t\tif (typeof saveCallback === 'function') {\n\t\t\t\tevents.save = saveCallback;\n\t\t\t}\n\t\t\tthis.emit('showModal', 'ParameterModal', props, events);\n\t\t},\n\t\tconfirmClear() {\n\t\t\tvar confirmed = confirm(\"Do you really want to clear the existing model?\");\n\t\t\tif (confirmed) {\n\t\t\t\tthis.clear();\n\t\t\t}\n\t\t},\n\t\tclear() {\n\t\t\tif (this.$refs.blocks) {\n\t\t\t\tthis.$refs.blocks.clear();\n\t\t\t}\n\t\t\tthis.commit(null);\n\t\t},\n\t\tinsertProcess(node, x = null, y = null) {\n\t\t\ttry {\n\t\t\t\tvar pos = this.$refs.blocks.getPositionForPageXY(x, y);\n\t\t\t\tlet namespace = node.namespace;\n\t\t\t\tif (namespace === 'backend' || namespace === 'user') {\n\t\t\t\t\tnamespace = null;\n\t\t\t\t}\n\t\t\t\tthis.$refs.blocks.addProcess(node.process_id, node.arguments, pos, namespace);\n\t\t\t} catch(error) {\n\t\t\t\tUtils.exception(this, error);\n\t\t\t}\n\t\t},\n\t\tasync insertNodes(nodes, replace = false) {\n\t\t\treturn await this.$refs.blocks.import({\n\t\t\t\tprocess_graph: nodes\n\t\t\t}, {\n\t\t\t\tclear: replace\n\t\t\t});\n\t\t}\n\t}\n}\n</script>\n\n<style>\n.visualEditor {\n\tbackground-color: white;\n\theight: 100%;\n\tdisplay: flex;\n\tflex-direction: column;\n}\n\n.visualEditor .vue-component.model-builder {\n\tmin-height: 100px;\n\tmin-width: 100px;\n}\n\n.visualEditor .editorSplitter {\n\tdisplay: flex;\n\tflex-direction: row-reverse;\n\tflex-grow: 1;\n\theight: 100%;\n\toverflow: hidden;\n}\n\n.visualEditor .discoveryToolbar {\n\twidth: 25%;\n\tmin-width: 150px;\n\tborder-left: 1px solid #ddd;\n}\n.visualEditor.fullscreen .discoveryToolbar {\n\twidth: 15%;\n\tmin-width: 250px;\n}\n\n.graphBuilder {\n\theight: 100%;\n\tflex-grow: 1;\n}\n\n.visualEditor.fullscreen {\n\tdisplay: flex;\n\tflex-direction: column;\n}\n\n.visualEditor.fullscreen .editorSplitter {\n\theight: 100%;\n}\n\n.compactMode {\n\tcolor: green;\n}\n\n@keyframes glowing {\n  0% {\n    box-shadow: 0 0 3px green;\n  }\n  50% {\n    box-shadow: 0 0 10px green;\n  }\n  100% {\n    box-shadow: 0 0 3px green;\n  }\n}\n\n.highlightFormula {\n    animation: glowing 1500ms infinite;\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./VisualEditor.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./VisualEditor.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./VisualEditor.vue?vue&type=template&id=161fe350&\"\nimport script from \"./VisualEditor.vue?vue&type=script&lang=js&\"\nexport * from \"./VisualEditor.vue?vue&type=script&lang=js&\"\nimport style0 from \"./VisualEditor.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ServicePanel.vue?vue&type=style&index=0&lang=css&\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UserWorkspace.vue?vue&type=style&index=0&lang=css&\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TextEditor.vue?vue&type=style&index=1&lang=css&\"","import Utils from \"../utils\";\nimport Exporter from \"./exporter\";\nimport { Formula } from '@openeo/js-client';\n\nconst KEYWORDS = [\n\t\"abstract\",\n\t\"arguments\",\n\t\"await\",\n\t\"boolean\",\n\t\"break\",\n\t\"byte\",\n\t\"case\",\n\t\"catch\",\n\t\"char\",\n\t\"class\",\n\t\"const\",\n\t\"continue\",\n\t\"debugger\",\n\t\"default\",\n\t\"delete\",\n\t\"do\",\n\t\"double\",\n\t\"else\",\n\t\"enum\",\n\t\"eval\",\n\t\"export\",\n\t\"extends\",\n\t\"false\",\n\t\"final\",\n\t\"finally\",\n\t\"float\",\n\t\"for\",\n\t\"function\",\n\t\"goto\",\n\t\"if\",\n\t\"implements\",\n\t\"import\",\n\t\"in\",\n\t\"instanceof\",\n\t\"int\",\n\t\"interface\",\n\t\"let\",\n\t\"long\",\n\t\"native\",\n\t\"new\",\n\t\"null\",\n\t\"package\",\n\t\"private\",\n\t\"protected\",\n\t\"public\",\n\t\"return\",\n\t\"short\",\n\t\"static\",\n\t\"super\",\n\t\"switch\",\n\t\"synchronized\",\n\t\"this\",\n\t\"throw\",\n\t\"throws\",\n\t\"transient\",\n\t\"true\",\n\t\"try\",\n\t\"typeof\",\n\t\"var\",\n\t\"void\",\n\t\"volatile\",\n\t\"while\",\n\t\"with\",\n\t\"yield\",\n\t// specific to this generator\n\t\"builder\",\n\t\"connection\",\n\t\"formula\",\n\t\"openeo\",\n\t\"result\"\n];\n\nexport default class JavaScript extends Exporter {\n\n\tconstructor(process, registry, connection, generateFormula = false) {\n\t\tsuper(process, registry, connection);\n\t\tthis.generateFormula = generateFormula;\n\t}\n\n\tcreateProcessGraphInstance(process) {\n\t\tlet pg = new JavaScript(process, this.processRegistry, this.getJsonSchemaValidator(), this.generateFormula);\n\t\treturn this.copyProcessGraphInstanceProperties(pg);\n\t}\n\n\tparse() {\n\t\tif (this.parsed) {\n\t\t\treturn;\n\t\t}\n\t\tsuper.parse();\n\t}\n\n\tgetKeywords() {\n\t\treturn KEYWORDS;\n\t}\n\n\tcomment(comment) {\n\t\tthis.addCode(comment, '// ');\n\t}\n\n\tgenerateImports() {\n\t\tthis.addCode(`import { OpenEO, Formula } from '@openeo/js-client';`);\n\t}\n\n\tgenerateConnection() {\n\t\tthis.addCode(`let connection = await OpenEO.connect('${this.getServerUrl()}');`);\n\t}\n\n\tgenerateAuthentication() {\n\t\tthis.comment(`ToDo: Here you need to add your authentication steps`);\n\t}\n\n\tgenerateBuilder() {\n\t\tthis.addCode(`let builder = await connection.buildProcess();`);\n\t}\n\n\tgenerateMetadataEntry(key, value) {\n\t\tthis.addCode(`builder.${key} = ${this.e(value)};`);\n\t}\n\n\tasync generateFunction(node) {\n\t\tlet variable = this.var(node.id);\n\t\tlet builderName = node.getParent() ? 'this' : 'builder';\n\t\tlet args = await this.generateArguments(node, !node.namespace);\n\n\t\tthis.comment(node.description);\n\t\tif (Utils.isObject(args)) {\n\t\t\tlet processId = node.namespace ? `${node.process_id}@${node.namespace}` : node.process_id;\n\t\t\tthis.addCode(`let ${variable} = ${builderName}.process(\"${processId}\", ${this.e(args)});`);\n\t\t}\n\t\telse {\n\t\t\tthis.addCode(`let ${variable} = ${builderName}.${node.process_id}(${args.map(arg => this.e(arg)).join(', ')});`);\n\t\t}\n\t}\n\n\tgenerateMissingParameter(parameter) {\n\t\tthis.comment(parameter.description);\n\t\tlet paramName = this.var(parameter.name, 'param');\n\t\tlet value = typeof parameter.default !== 'undefined' ? parameter.default : null;\n\t\tthis.addCode(`let ${paramName} = ${this.e(value)};`);\n\t}\n\n\tasync generateCallback(callback, parameters, variable) {\n\t\tif (this.generateFormula && callback && callback.isMath()) {\n\t\t\tlet formula = callback.toFormulaString();\n\t\t\tlet escaped = JSON.stringify(formula);\n\t\t\treturn `new Formula(${escaped})`;\n\t\t}\n\t\telse {\n\t\t\tlet params = this.generateFunctionParams(parameters);\n\t\t\tthis.newLine();\n\t\t\tthis.addCode(`let ${variable} = function(${params.join(', ')}) {`);\n\t\t\tthis.indent++;\n\t\t\tthis.addCode(await callback.toCode(true));\n\t\t\tthis.indent--;\n\t\t\tthis.addCode(`}`);\n\t\t}\n\t}\n\n\tgenerateResult(resultNode, callback) {\n\t\tif (!resultNode) {\n\t\t\treturn;\n\t\t}\n\t\tlet variable = this.var(resultNode.id);\n\t\tif (callback) {\n\t\t\tthis.addCode(`return ${variable};`);\n\t\t}\n\t\telse {\n\t\t\tthis.addCode(`let result = await connection.computeResult(${variable});`);\n\t\t}\n\t}\n\n\ttoFormulaString() {\n\t\tif (this.isMath()) {\n\t\t\treturn this.nodeToFormula(this.getResultNode());\n\t\t}\n\t\telse {\n\t\t\treturn '';\n\t\t}\n\t}\n\n\tgetArrayElementPlaceholder(node) {\n\t\tif (node.process_id === 'array_element') {\n\t\t\tif (node.getArgumentType('data') === 'parameter') {\n\t\t\t\tlet parameter = node.getRawArgument('data').from_parameter;\n\t\t\t\tlet index = this.getCallbackParameters().findIndex(param => param.name === parameter);\n\t\t\t\tif (index >= 0) {\n\t\t\t\t\treturn '$'.repeat(index+1) + (node.getArgument('label') || node.getArgument('index'));\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn null;\n\t}\n\n\tnodeToFormula(node, parentOperator = null) {\n\t\tif (node.process_id === 'array_element') {\n\t\t\tlet arrayElement = this.getArrayElementPlaceholder(node);\n\t\t\tif (arrayElement) {\n\t\t\t\treturn arrayElement;\n\t\t\t}\n\t\t}\n\n\t\tlet operator = Formula.reverseOperatorMapping[node.process_id];\n\t\tlet process = this.processRegistry.get(node.process_id);\n\t\tlet isArrayData = (typeof Formula.arrayOperatorMapping[node.process_id] !== 'undefined');\n\n\t\tlet convertValue = value => {\n\t\t\tif (Utils.isObject(value)) {\n\t\t\t\tif (value.from_node) {\n\t\t\t\t\tlet refNode = node.getProcessGraph().getNode(value.from_node);\n\t\t\t\t\tif (refNode) {\n\t\t\t\t\t\tvalue = this.nodeToFormula(refNode, operator);\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tvalue = '#' + value.from_node;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse if (value.from_parameter) {\n\t\t\t\t\tvalue = value.from_parameter;\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tthrow new Error('Objects not allowed');\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn value;\n\t\t};\n\n\t\t// Create the list of arguments\n\t\tlet argList = [];\n\t\tlet params = Array.isArray(process.parameters) ? process.parameters : [];\n\t\tfor(let parameter of params) {\n\t\t\tlet value = convertValue(node.getRawArgument(parameter.name));\n\n\t\t\tif (isArrayData && Array.isArray(value) && parameter.name === 'data') {\n\t\t\t\targList = value.map(v => convertValue(v));\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\telse if(typeof value !== 'undefined') {\n\t\t\t\targList.push(value);\n\t\t\t}\n\t\t\telse if(typeof parameter.default !== 'undefined') {\n\t\t\t\targList.push(parameter.default);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tthrow new Error('Argument for parameter \"' + parameter.name + '\" missing');\n\t\t\t}\n\t\t}\n\t\t \n\t\t // Filter null values for array data to handle ignore_nodata\n\t\tif (isArrayData) {\n\t\t\targList = argList.filter(v => v !== null);\n\t\t}\n\n\t\tif (operator) {\n\t\t\tlet strongOps = ['/', '*']; // \"Punktrechnung\" vor\n\t\t\tlet weakOps = ['-', '+']; // \"Strichrechung\"\n\t\t\tlet formula = argList\n\t\t\t\t.map(v => v < 0 ? '(' + v + ')' : v) // Put negative values in brackets\n\t\t\t\t.join(operator); // Merge everything together\n\t\t\t\n\t\t\t// Check whether brackets are required\n\t\t\tif (\n\t\t\t\t// No brackets on top-level\n\t\t\t\t!parentOperator\n\t\t\t\t// If operators are both weak, no brackets required\n\t\t\t\t|| (weakOps.includes(parentOperator) && weakOps.includes(operator))\n\t\t\t\t// If operators are both strong, no brackets required -> not correct, x/(a*b) needs it, see https://github.com/Open-EO/openeo-web-editor/issues/235\n//\t\t\t\t|| (strongOps.includes(parentOperator) && strongOps.includes(operator))\n\t\t\t\t// No brackets required for power, it's the strongest operation\n\t\t\t\t|| operator === '^'\n\t\t\t\t// If the parent operation is a weak operation (+/-) and this is a strong operation, no brackets required\n\t\t\t\t|| (weakOps.includes(parentOperator) && strongOps.includes(operator))\n\t\t\t) {\n\t\t\t\treturn formula;\n\t\t\t}\n\t\t\telse {\n\t\t\t\treturn '(' + formula + ')';\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\treturn node.process_id + '(' + argList.join(', ') + ')';\n\t\t}\n\t}\n\n}","import Utils from '../utils';\nimport { SupportedFormat } from './format';\n\nclass JSON_ extends SupportedFormat {\n\n\tconstructor(asset, component = \"DataViewer\") {\n\t\tsuper(asset, component);\n\n\t\tthis.isGeoJson = false;\n\t\t// this.isCovJson = false;\n\t}\n\n\tasync parseData(data) {\n\t\tif (typeof data === 'string') {\n\t\t\ttry {\n\t\t\t\tdata = JSON.parse(data);\n\t\t\t}\n\t\t\tcatch (error) {\n\t\t\t\tconsole.log(error);\n\t\t\t}\n\t\t}\n\t\tif (Utils.detectGeoJson(data)) {\n\t\t\tthis.isGeoJson = true;\n\t\t\tthis.component = 'MapViewer';\n\t\t\tthis.icon = 'fa-map';\n\t\t}\n\t\treturn data;\n\t}\n}\n\nexport default JSON_;","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"wrapper\"}},[_c('div',{class:{authenticated: _vm.isAuthenticated},attrs:{\"id\":\"ide\"}},[_c('header',{staticClass:\"navbar\"},[_c('Logo'),_c('ul',{attrs:{\"id\":\"menu\"}},[_c('li',[_c('div',{staticClass:\"menuItem\",attrs:{\"title\":\"Start a guided tour\"},on:{\"click\":_vm.showHelp}},[_c('i',{staticClass:\"fas fa-question fa-fw\"}),_vm._v(\" Help\")])]),_c('li',[_c('div',{staticClass:\"menuItem\",attrs:{\"title\":\"Get server information\"},on:{\"click\":_vm.showServerInfo}},[_c('i',{staticClass:\"fas fa-info fa-fw\"}),_vm._v(\" Server\")])]),_c('li',[_c('UserMenu')],1)])],1),_c('Splitpanes',{staticClass:\"default-theme\",on:{\"resize\":_vm.resized,\"pane-maximize\":_vm.resized}},[_c('Pane',{attrs:{\"id\":\"discovery\",\"size\":_vm.splitpaneSizeH[0]}},[_c('DiscoveryToolbar',{staticClass:\"toolbar tour-ide-discovery\",attrs:{\"onAddProcess\":_vm.insertProcess,\"collectionPreview\":true,\"persist\":true}})],1),_c('Pane',{attrs:{\"id\":\"workspace\",\"size\":_vm.splitpaneSizeH[1]}},[_c('Splitpanes',{staticClass:\"default-theme\",attrs:{\"horizontal\":\"\"},on:{\"resize\":_vm.resized,\"pane-maximize\":_vm.resized}},[_c('Pane',{attrs:{\"id\":\"editor\",\"size\":_vm.splitpaneSizeV[0]}},[_c('Editor',{ref:\"editor\",staticClass:\"mainEditor tour-ide-editor\",attrs:{\"id\":\"main\",\"value\":_vm.process,\"title\":_vm.contextTitle},on:{\"input\":_vm.updateEditor},scopedSlots:_vm._u([{key:\"file-toolbar\",fn:function(){return [_c('button',{attrs:{\"type\":\"button\",\"title\":\"Import process from external source\"},on:{\"click\":_vm.importProcess}},[_c('i',{staticClass:\"fas fa-cloud-download-alt\"})]),_c('button',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.saveSupported),expression:\"saveSupported\"}],attrs:{\"type\":\"button\",\"disabled\":!_vm.hasProcess,\"title\":'Save to ' + _vm.contextTitle},on:{\"click\":_vm.saveProcess}},[_c('i',{staticClass:\"fas fa-save\"})]),_c('button',{attrs:{\"type\":\"button\",\"disabled\":!_vm.hasProcess,\"title\":\"Export into another programming language\"},on:{\"click\":_vm.exportCode}},[_c('i',{staticClass:\"fas fa-file-export\"})]),_c('button',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.validateSupported),expression:\"validateSupported\"}],attrs:{\"type\":\"button\",\"disabled\":!_vm.hasProcess,\"title\":\"Validate process on server-side\"},on:{\"click\":_vm.validateProcess}},[_c('i',{staticClass:\"fas fa-tasks\"})])]},proxy:true}])})],1),_c('Pane',{attrs:{\"id\":\"user\",\"size\":_vm.splitpaneSizeV[1]}},[(_vm.isAuthenticated)?_c('UserWorkspace',{staticClass:\"userContent tour-ide-workspace\"}):_c('div',{staticClass:\"message info\",attrs:{\"title\":\"Login is required to interact with the server.\"}},[_c('i',{staticClass:\"fas fa-sign-in-alt\"}),_c('span',{staticClass:\"login-message\"},[_c('strong',[_c('a',{on:{\"click\":_vm.login}},[_vm._v(\"Log in\")])]),_vm._v(\" is required to interact with the server.\")])])],1)],1)],1),_c('Pane',{class:{empty: !_vm.showViewer},attrs:{\"id\":\"viewer\",\"size\":_vm.splitpaneSizeH[2]}},[_c('Viewer',{staticClass:\"tour-ide-viewer\",on:{\"empty\":_vm.onViewerEmpty}})],1)],1)],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"UserMenu\"}},[_c('div',{staticClass:\"menuItem\"},[_vm._m(0),_c('div',{staticClass:\"data\"},[_c('span',{staticClass:\"name nowrap\"},[_c('i',{staticClass:\"fas fa-user\"}),_vm._v(\" \"+_vm._s(_vm.userName))]),(_vm.budget)?_c('span',{staticClass:\"credits nowrap\"},[_c('i',{staticClass:\"fas fa-dollar-sign fa-fw\"}),_vm._v(\" \"+_vm._s(_vm.budget))]):_vm._e(),(_vm.hasStorage)?_c('span',{staticClass:\"storage nowrap\"},[_c('i',{staticClass:\"fas fa-database fa-fw\"}),_vm._v(\" \"+_vm._s(_vm.storageUsedPercent)+\"% used\")]):_vm._e()])]),_c('div',{staticClass:\"dropdown\"},[(_vm.profileLink)?_c('a',{staticClass:\"item\",attrs:{\"href\":_vm.profileLink.href,\"target\":\"_blank\"}},[_vm._v(\"Welcome, \"+_vm._s(_vm.userName)+\"!\")]):_c('div',{staticClass:\"item\"},[_vm._v(\"Welcome, \"+_vm._s(_vm.userName)+\"!\")]),(_vm.isAuthenticated)?[(_vm.settingsLink)?_c('a',{staticClass:\"item\",attrs:{\"href\":_vm.settingsLink.href,\"target\":\"_blank\"}},[_c('i',{staticClass:\"fas fa-user-edit\"}),_vm._v(\" \"+_vm._s(_vm.settingsLink.title || 'Edit Profile'))]):_vm._e(),_c('a',{staticClass:\"item\",on:{\"click\":function($event){$event.preventDefault();return _vm.logout.apply(null, arguments)}}},[_c('i',{staticClass:\"fas fa-sign-out-alt\"}),_vm._v(\" Logout\")])]:[_c('a',{staticClass:\"item\",on:{\"click\":function($event){$event.preventDefault();return _vm.login.apply(null, arguments)}}},[_c('i',{staticClass:\"fas fa-sign-in-alt\"}),_vm._v(\" Login\")]),(_vm.registerLink)?_c('a',{staticClass:\"item\",attrs:{\"href\":_vm.registerLink.href,\"target\":\"_blank\"}},[_c('i',{staticClass:\"fas fa-user-plus\"}),_vm._v(\" Register\")]):_vm._e(),(_vm.passwordLink)?_c('a',{staticClass:\"item\",attrs:{\"href\":_vm.passwordLink.href,\"target\":\"_blank\"}},[_c('i',{staticClass:\"fas fa-key\"}),_vm._v(\" Forgotten Password?\")]):_vm._e()],(!_vm.$config.serverUrl)?_c('a',{staticClass:\"item\",on:{\"click\":function($event){$event.preventDefault();return _vm.disconnect.apply(null, arguments)}}},[_c('i',{staticClass:\"fas fa-sign-out-alt\"}),_vm._v(\" Disconnect\")]):_vm._e(),(_vm.userLinks.length > 0)?[_c('hr'),_vm._l((_vm.userLinks),function(link,key){return _c('a',{key:key,staticClass:\"item\",attrs:{\"href\":link.href,\"target\":\"_blank\",\"rel\":link.rel}},[_vm._v(_vm._s(link.title))])})]:_vm._e(),(_vm.budget || _vm.userInfo.default_plan || _vm.paymentLink)?[_c('hr'),_c('div',{staticClass:\"item\"},[_c('h4',[_vm._v(\"Billing\")]),(_vm.userInfo.default_plan)?_c('div',{staticClass:\"secondary-text\"},[_vm._v(\"Plan: \"+_vm._s(_vm.userInfo.default_plan))]):_vm._e(),(_vm.budget)?_c('div',{staticClass:\"secondary-text\"},[_vm._v(\"Budget: \"+_vm._s(_vm.budget))]):_vm._e()]),(_vm.paymentLink)?_c('a',{staticClass:\"item\",attrs:{\"href\":_vm.paymentLink.href,\"target\":\"_blank\"}},[_c('i',{staticClass:\"fas fa-credit-card\"}),_vm._v(\" \"+_vm._s(_vm.paymentLink.title || 'Recharge'))]):_vm._e()]:_vm._e(),(_vm.hasStorage)?[_c('hr'),_c('div',{staticClass:\"item\"},[_c('h4',[_vm._v(\"Storage\")]),_c('div',{staticClass:\"secondary-text nowrap\"},[_vm._v(\"Used \"+_vm._s(_vm.formatMegabyte(_vm.storageUsed))+\" of \"+_vm._s(_vm.formatMegabyte(_vm.userInfo.storage.quota))+\".\")]),_c('div',{staticClass:\"storagePercent\"},[_c('div',{staticClass:\"used\",style:('width: ' + _vm.storageUsedPercent + '%')})])])]:_vm._e()],2)])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"down\"},[_c('i',{staticClass:\"fas fa-chevron-down\"})])}]\n\nexport { render, staticRenderFns }","<template>\n\t<div id=\"UserMenu\">\n\t\t<div class=\"menuItem\">\n\t\t\t<div class=\"down\">\n\t\t\t\t<i class=\"fas fa-chevron-down\"></i>\n\t\t\t</div>\n\t\t\t<div class=\"data\">\n\t\t\t\t<span class=\"name nowrap\"><i class=\"fas fa-user\"></i> {{ userName }}</span>\n\t\t\t\t<span v-if=\"budget\" class=\"credits nowrap\"><i class=\"fas fa-dollar-sign fa-fw\"></i> {{ budget }}</span>\n\t\t\t\t<span v-if=\"hasStorage\" class=\"storage nowrap\"><i class=\"fas fa-database fa-fw\"></i> {{ storageUsedPercent }}% used</span>\n\t\t\t</div>\n\t\t</div>\n\t\t<div class=\"dropdown\">\n\t\t\t<a v-if=\"profileLink\" class=\"item\" :href=\"profileLink.href\" target=\"_blank\">Welcome, {{ userName }}!</a>\n\t\t\t<div v-else class=\"item\">Welcome, {{ userName }}!</div>\n\t\t\t<template v-if=\"isAuthenticated\">\n\t\t\t\t<a v-if=\"settingsLink\" class=\"item\" :href=\"settingsLink.href\" target=\"_blank\"><i class=\"fas fa-user-edit\"></i> {{ settingsLink.title || 'Edit Profile' }}</a>\n\t\t\t\t<a class=\"item\" @click.prevent=\"logout\"><i class=\"fas fa-sign-out-alt\"></i> Logout</a>\n\t\t\t</template>\n\t\t\t<template v-else>\n\t\t\t\t<a class=\"item\" @click.prevent=\"login\"><i class=\"fas fa-sign-in-alt\"></i> Login</a>\n\t\t\t\t<a v-if=\"registerLink\" class=\"item\" :href=\"registerLink.href\" target=\"_blank\"><i class=\"fas fa-user-plus\"></i> Register</a>\n\t\t\t\t<a v-if=\"passwordLink\" class=\"item\" :href=\"passwordLink.href\" target=\"_blank\"><i class=\"fas fa-key\"></i>  Forgotten Password?</a>\n\t\t\t</template>\n\t\t\t<a v-if=\"!$config.serverUrl\" class=\"item\" @click.prevent=\"disconnect\"><i class=\"fas fa-sign-out-alt\"></i> Disconnect</a>\n\t\t\t<template v-if=\"userLinks.length > 0\">\n\t\t\t\t<hr />\n\t\t\t\t<a v-for=\"(link, key) in userLinks\" :key=\"key\" :href=\"link.href\" target=\"_blank\" class=\"item\" :rel=\"link.rel\">{{ link.title }}</a>\n\t\t\t</template>\n\t\t\t<template v-if=\"budget || userInfo.default_plan || paymentLink\">\n\t\t\t\t<hr />\n\t\t\t\t<div class=\"item\">\n\t\t\t\t\t<h4>Billing</h4>\n\t\t\t\t\t<div v-if=\"userInfo.default_plan\" class=\"secondary-text\">Plan: {{ userInfo.default_plan }}</div>\n\t\t\t\t\t<div v-if=\"budget\" class=\"secondary-text\">Budget: {{ budget }}</div>\n\t\t\t\t</div>\n\t\t\t\t<a v-if=\"paymentLink\" :href=\"paymentLink.href\" class=\"item\" target=\"_blank\"><i class=\"fas fa-credit-card\"></i> {{ paymentLink.title || 'Recharge' }}</a>\n\t\t\t</template>\n\t\t\t<template v-if=\"hasStorage\">\n\t\t\t\t<hr />\n\t\t\t\t<div class=\"item\">\n\t\t\t\t\t<h4>Storage</h4>\n\t\t\t\t\t<div class=\"secondary-text nowrap\">Used {{ formatMegabyte(storageUsed) }} of {{ formatMegabyte(userInfo.storage.quota) }}.</div>\n\t\t\t\t\t<div class=\"storagePercent\"><div class=\"used\" :style=\"'width: ' + storageUsedPercent + '%'\"></div></div>\n\t\t\t\t</div>\n\t\t\t</template>\n\t\t</div>\n\t</div>\n</template>\n\n<script>\nimport EventBusMixin from './EventBusMixin.vue';\nimport Utils from '../utils.js';\n\nexport default {\n\tname: 'UserMenu',\n\tmixins: [EventBusMixin],\n\tcomputed: {\n\t\t...Utils.mapState(['userInfo', 'isAuthenticated']),\n\t\t...Utils.mapGetters(['currency', 'capabilities']),\n\t\tuserLinks() {\n\t\t\treturn Utils.friendlyLinks(this.userInfo.links, true, ['self', 'edit-form', 'payment', 'alternate']);\n\t\t},\n\t\tserverLinks() {\n\t\t\treturn this.capabilities ? this.capabilities.links() : [];\n\t\t},\n\t\tregisterLink() {\n\t\t\treturn this.serverLinks.find(link => link.rel === 'create-form');\n\t\t},\n\t\tpasswordLink() {\n\t\t\treturn this.serverLinks.find(link => link.rel === 'recovery-form');\n\t\t},\n\t\tsettingsLink() {\n\t\t\treturn Array.isArray(this.userInfo.links) ? this.userInfo.links.find(link => link.rel === 'edit-form') : undefined;\n\t\t},\n\t\tpaymentLink() {\n\t\t\treturn Array.isArray(this.userInfo.links) ? this.userInfo.links.find(link => link.rel === 'payment') : undefined;\n\t\t},\n\t\tprofileLink() {\n\t\t\treturn Array.isArray(this.userInfo.links) ? this.userInfo.links.find(link => link.rel === 'alternate') : undefined;\n\t\t},\n\t\thasStorage() {\n\t\t\treturn Utils.isObject(this.userInfo.storage) && typeof this.userInfo.storage.quota === 'number' && typeof this.userInfo.storage.free === 'number';\n\t\t},\n\t\tbudget() {\n\t\t\treturn Utils.formatBudget(this.userInfo.budget, this.currency);\n\t\t},\n\t\tuserName() {\n\t\t\tif (typeof this.userInfo.name === 'string') {\n\t\t\t\treturn this.userInfo.name;\n\t\t\t}\n\t\t\telse if (typeof this.userInfo.user_id === 'string') {\n\t\t\t\treturn this.userInfo.user_id;\n\t\t\t}\n\t\t\telse if (this.isAuthenticated) {\n\t\t\t\treturn 'User';\n\t\t\t}\n\t\t\telse {\n\t\t\t\treturn 'Guest';\n\t\t\t}\n\t\t},\n\t\tstorageUsed() {\n\t\t\tif (!this.hasStorage) {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t\treturn this.userInfo.storage.quota - this.userInfo.storage.free;\n\t\t},\n\t\tstorageUsedPercent() {\n\t\t\tif (!this.hasStorage) {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t\treturn Math.round(this.storageUsed / this.userInfo.storage.quota * 100);\n\t\t}\n\t},\n\tmethods: {\n\t\t...Utils.mapActions({logoutUser: 'logout'}),\n\t\t...Utils.mapMutations('editor', {resetEditor: 'reset'}),\n\t\tasync logout() {\n\t\t\tawait this.logoutUser(false);\n\t\t\tUtils.ok(this, 'Logout successful.');\n\t\t},\n\t\tasync disconnect() {\n\t\t\tawait this.logoutUser(true);\n\t\t\tthis.resetEditor();\n\t\t\twindow.history.pushState({}, \"\", \"?\");\n\t\t},\n\t\tlogin() {\n\t\t\tthis.emit('showLogin');\n\t\t},\n\t\tformatMegabyte(num) {\n\t\t\tvar gb = 1024*1024*1024;\n\t\t\tif (num > gb) {\n\t\t\t\treturn Math.round(num/gb) + ' GB';\n\t\t\t}\n\t\t\telse {\n\t\t\t\treturn Math.round(num/(1024*1024)) + ' MB';\n\t\t\t}\n\t\t}\n\t}\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.down {\n\twidth: 1em;\n\tpadding-right: 10px;\n}\n.name, .credits, .storage {\n\tdisplay: block;\n}\n.name {\n\tmax-width: 250px;\n    text-overflow: ellipsis;\n    overflow: hidden;\n}\n.credits, .storage {\n\tmargin-top: 3px;\n\tfont-size: 12px;\n\tfont-weight: normal;\n}\n.storagePercent {\n\tbackground-color: green;\n\theight: 1em;\n\tborder-radius: 0.3em;\n\n\t.used {\n\t\tbackground-color: maroon;\n\t\twidth: 1px;\n\t\theight: 1em;\n\t\tborder-radius: 0.3em;\n\t}\n}\n.secondary-text {\n\tfont-size: 0.9em;\n\tline-height: 1.8em;\n\tcolor: #555;\n}\n.nowrap {\n\twhite-space: nowrap;\n}\nh4 {\n\tmargin: 0 0 10px 0;\n}\n.navButton {\n\tdisplay: block;\n\ttext-align: left;\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UserMenu.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UserMenu.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./UserMenu.vue?vue&type=template&id=76333d38&scoped=true&\"\nimport script from \"./UserMenu.vue?vue&type=script&lang=js&\"\nexport * from \"./UserMenu.vue?vue&type=script&lang=js&\"\nimport style0 from \"./UserMenu.vue?vue&type=style&index=0&id=76333d38&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"76333d38\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('Tabs',{ref:\"tabs\",attrs:{\"id\":\"userContent\"}},[(_vm.showJobs)?_c('Tab',{attrs:{\"id\":\"jobs\",\"name\":\"Data Processing\",\"icon\":\"fa-tasks\"},on:{\"show\":_vm.onShow,\"hide\":_vm.onHide}},[_c('JobPanel')],1):_vm._e(),(_vm.showServices)?_c('Tab',{attrs:{\"id\":\"services\",\"name\":\"Web Services\",\"icon\":\"fa-cloud\"},on:{\"show\":_vm.onShow,\"hide\":_vm.onHide}},[_c('ServicePanel')],1):_vm._e(),(_vm.showCustomProcesses)?_c('Tab',{attrs:{\"id\":\"customProcesses\",\"name\":\"Custom Processes\",\"icon\":\"fa-sitemap\"},on:{\"show\":_vm.onShow,\"hide\":_vm.onHide}},[_c('CustomProcessPanel')],1):_vm._e(),(_vm.showFiles)?_c('Tab',{attrs:{\"id\":\"files\",\"name\":\"Files\",\"icon\":\"fa-file\"},on:{\"show\":_vm.onShow,\"hide\":_vm.onHide}},[_c('FilePanel')],1):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('DataTable',{ref:\"table\",staticClass:\"JobPanel\",attrs:{\"data\":_vm.data,\"columns\":_vm.columns},scopedSlots:_vm._u([{key:\"actions\",fn:function(p){return [_c('button',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.supportsRead),expression:\"supportsRead\"}],attrs:{\"title\":\"Details\"},on:{\"click\":function($event){return _vm.showJobInfo(p.row)}}},[_c('i',{staticClass:\"fas fa-info\"})]),_c('button',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.supports('estimateJob')),expression:\"supports('estimateJob')\"}],attrs:{\"title\":\"Estimate\"},on:{\"click\":function($event){return _vm.estimateJob(p.row)}}},[_c('i',{staticClass:\"fas fa-file-invoice-dollar\"})]),_c('button',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.supportsUpdate),expression:\"supportsUpdate\"}],attrs:{\"title\":\"Edit metadata\",\"disabled\":!_vm.isJobInactive(p.row)},on:{\"click\":function($event){return _vm.editMetadata(p.row)}}},[_c('i',{staticClass:\"fas fa-edit\"})]),_c('button',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.supportsRead),expression:\"supportsRead\"}],attrs:{\"title\":\"Edit process\"},on:{\"click\":function($event){return _vm.showInEditor(p.row)}}},[_c('i',{staticClass:\"fas fa-project-diagram\"})]),_c('button',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.supportsDelete),expression:\"supportsDelete\"}],attrs:{\"title\":\"Delete\"},on:{\"click\":function($event){return _vm.deleteJob(p.row)}}},[_c('i',{staticClass:\"fas fa-trash\"})]),_c('button',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.supports('startJob') && _vm.isJobInactive(p.row)),expression:\"supports('startJob') && isJobInactive(p.row)\"}],attrs:{\"title\":\"Start processing\"},on:{\"click\":function($event){return _vm.queueJob(p.row)}}},[_c('i',{staticClass:\"fas fa-play-circle\"})]),_c('button',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.supports('stopJob') && _vm.isJobActive(p.row)),expression:\"supports('stopJob') && isJobActive(p.row)\"}],attrs:{\"title\":\"Cancel processing\"},on:{\"click\":function($event){return _vm.cancelJob(p.row)}}},[_c('i',{staticClass:\"fas fa-stop-circle\"})]),_c('button',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.supports('downloadResults') && _vm.mayHaveResults(p.row)),expression:\"supports('downloadResults') && mayHaveResults(p.row)\"}],attrs:{\"title\":\"Download\"},on:{\"click\":function($event){return _vm.downloadResults(p.row)}}},[_c('i',{staticClass:\"fas fa-download\"})]),_c('button',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.supports('downloadResults') && _vm.mayHaveResults(p.row)),expression:\"supports('downloadResults') && mayHaveResults(p.row)\"}],attrs:{\"title\":\"View results\"},on:{\"click\":function($event){return _vm.viewResults(p.row, true)}}},[_c('i',{staticClass:\"fas fa-eye\"})]),_c('button',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.supports('debugJob')),expression:\"supports('debugJob')\"}],attrs:{\"title\":\"View logs\"},on:{\"click\":function($event){return _vm.showLogs(p.row)}}},[_c('i',{staticClass:\"fas fa-bug\"})])]}}])},[_c('template',{slot:\"toolbar\"},[_c('button',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.supportsCreate),expression:\"supportsCreate\"}],attrs:{\"title\":\"Add new job for batch processing\",\"disabled\":!this.hasProcess},on:{\"click\":function($event){return _vm.createJobFromScript()}}},[_c('i',{staticClass:\"fas fa-plus\"}),_vm._v(\" Create Batch Job\")]),_c('button',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.supports('computeResult')),expression:\"supports('computeResult')\"}],attrs:{\"title\":\"Run the process directly and view the results without storing them permanently\",\"disabled\":!this.hasProcess},on:{\"click\":_vm.executeProcess}},[_c('i',{staticClass:\"fas fa-play\"}),_vm._v(\" Run / Preview\")])])],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n\t<DataTable ref=\"table\" :data=\"data\" :columns=\"columns\" class=\"JobPanel\">\n\t\t<template slot=\"toolbar\">\n\t\t\t<button title=\"Add new job for batch processing\" @click=\"createJobFromScript()\" v-show=\"supportsCreate\" :disabled=\"!this.hasProcess\"><i class=\"fas fa-plus\"></i> Create Batch Job</button>\n\t\t\t<button title=\"Run the process directly and view the results without storing them permanently\" @click=\"executeProcess\" v-show=\"supports('computeResult')\" :disabled=\"!this.hasProcess\"><i class=\"fas fa-play\"></i> Run / Preview</button>\n\t\t</template>\n\t\t<template #actions=\"p\">\n\t\t\t<button title=\"Details\" @click=\"showJobInfo(p.row)\" v-show=\"supportsRead\"><i class=\"fas fa-info\"></i></button>\n\t\t\t<button title=\"Estimate\" @click=\"estimateJob(p.row)\" v-show=\"supports('estimateJob')\"><i class=\"fas fa-file-invoice-dollar\"></i></button>\n\t\t\t<button title=\"Edit metadata\" @click=\"editMetadata(p.row)\" v-show=\"supportsUpdate\" :disabled=\"!isJobInactive(p.row)\"><i class=\"fas fa-edit\"></i></button>\n\t\t\t<button title=\"Edit process\" @click=\"showInEditor(p.row)\" v-show=\"supportsRead\"><i class=\"fas fa-project-diagram\"></i></button>\n\t\t\t<button title=\"Delete\" @click=\"deleteJob(p.row)\" v-show=\"supportsDelete\"><i class=\"fas fa-trash\"></i></button>\n\t\t\t<button title=\"Start processing\" @click=\"queueJob(p.row)\" v-show=\"supports('startJob') && isJobInactive(p.row)\"><i class=\"fas fa-play-circle\"></i></button>\n\t\t\t<button title=\"Cancel processing\" @click=\"cancelJob(p.row)\" v-show=\"supports('stopJob') && isJobActive(p.row)\"><i class=\"fas fa-stop-circle\"></i></button>\n\t\t\t<button title=\"Download\" @click=\"downloadResults(p.row)\" v-show=\"supports('downloadResults') && mayHaveResults(p.row)\"><i class=\"fas fa-download\"></i></button>\n\t\t\t<button title=\"View results\" @click=\"viewResults(p.row, true)\" v-show=\"supports('downloadResults') && mayHaveResults(p.row)\"><i class=\"fas fa-eye\"></i></button>\n\t\t\t<button title=\"View logs\" @click=\"showLogs(p.row)\" v-show=\"supports('debugJob')\"><i class=\"fas fa-bug\"></i></button>\n\t\t</template>\n\t</DataTable>\n</template>\n\n<script>\nimport EventBusMixin from './EventBusMixin.vue';\nimport WorkPanelMixin from './WorkPanelMixin';\nimport Utils from '../utils.js';\nimport { AbortController, Job } from '@openeo/js-client';\n\nconst WorkPanelMixinInstance = WorkPanelMixin('jobs', 'batch job', 'batch jobs');\n\nexport default {\n\tname: 'JobPanel',\n\tmixins: [WorkPanelMixinInstance, EventBusMixin],\n\tdata() {\n\t\treturn {\n\t\t\tcolumns: {\n\t\t\t\tid: {\n\t\t\t\t\tname: 'ID',\n\t\t\t\t\tprimaryKey: true,\n\t\t\t\t\thide: true\n\t\t\t\t},\n\t\t\t\ttitle: {\n\t\t\t\t\tname: 'Batch Job',\n\t\t\t\t\tcomputedValue: row => Utils.getResourceTitle(row),\n\t\t\t\t\tformat: value => Utils.formatIdOrTitle(value),\n\t\t\t\t\tedit: this.updateTitle\n\t\t\t\t},\n\t\t\t\tstatus: {\n\t\t\t\t\tname: 'Status',\n\t\t\t\t\tstylable: true\n\t\t\t\t},\n\t\t\t\tcreated: {\n\t\t\t\t\tname: 'Submitted',\n\t\t\t\t\tformat: 'Timestamp',\n\t\t\t\t\tsort: 'desc'\n\t\t\t\t},\n\t\t\t\tupdated: {\n\t\t\t\t\tname: 'Last update',\n\t\t\t\t\tformat: 'Timestamp'\n\t\t\t\t},\n\t\t\t\tactions: {\n\t\t\t\t\tname: 'Actions',\n\t\t\t\t\tfilterable: false,\n\t\t\t\t\tsort: false\n\t\t\t\t}\n\t\t\t},\n\t\t\twatchers: {},\n\t\t\tjobUpdater: null,\n\t\t\trunId: 0\n\t\t};\n\t},\n\tmounted() {\n\t\tthis.listen('replaceProcess', this.replaceProcess);\n\t},\n\tcomputed: {\n\t\t...Utils.mapState(['connection']),\n\t\t...Utils.mapGetters(['supports', 'supportsBilling', 'supportsBillingPlans']),\n\t\t...Utils.mapGetters('editor', ['hasProcess']),\n\t\t...Utils.mapState('editor', ['process'])\n\t},\n\twatch: {\n\t\tdata: {\n\t\t\thandler: function(updatedJobs) {\n\t\t\t\t// Update Watchers\n\t\t\t\tthis.watchers = {};\n\t\t\t\tfor(let job of updatedJobs) {\n\t\t\t\t\tif (Utils.isActiveJobStatusCode(job.status)) {\n\t\t\t\t\t\tthis.watchers[job.id] = job;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t\tdeep: true\n\t\t}\n\t},\n\tmethods: {\n\t\t...Utils.mapActions('jobs', ['queue', 'cancel']),\n\t\tstartSyncTimer() {\n\t\t\tWorkPanelMixinInstance.methods.startSyncTimer.call(this);\n\t\t\tthis.jobUpdater = setInterval(this.executeWatchers, 10000);\n\t\t},\n\t\tstopSyncTimer() {\n\t\t\tWorkPanelMixinInstance.methods.stopSyncTimer.call(this);\n\t\t\tif (this.jobUpdater !== null) {\n\t\t\t\tclearInterval(this.jobUpdater);\n\t\t\t}\n\t\t},\n\t\tshowInEditor(job) {\n\t\t\tthis.refreshElement(job, updatedJob => this.emit('editProcess', updatedJob));\n\t\t},\n\t\tasync executeProcess() {\n\t\t\tlet abortController = new AbortController();\n\t\t\tlet snotifyConfig = {\n\t\t\t\ttimeout: 0,\n\t\t\t\ttype: 'async',\n\t\t\t\tbuttons: [{\n\t\t\t\t\ttext: 'Cancel',\n\t\t\t\t\taction: toast => {\n\t\t\t\t\t\tabortController.abort();\n\t\t\t\t\t\tthis.$snotify.remove(toast.id, true);\n\t\t\t\t\t}\n\t\t\t\t}]\n\t\t\t};\n\t\t\tlet toast;\n\t\t\ttry {\n\t\t\t\tthis.runId++;\n\t\t\t\tlet message = \"A process is currently executed synchronously...\";\n\t\t\t\tlet title = `Run / Preview #${this.runId}`;\n\t\t\t\tlet endlessPromise = () => new Promise(() => {}); // Pass a promise to snotify that never resolves as we manually close the toast\n\t\t\t\ttoast = this.$snotify.async(message, title, endlessPromise, snotifyConfig);\n\t\t\t\tlet result = await this.connection.computeResult(this.process, null, null, abortController);\n\t\t\t\tthis.emit('viewSyncResult', result);\n\t\t\t} catch(error) {\n\t\t\t\tif (axios.isCancel(error)) {\n\t\t\t\t\t// Do nothing, we expected the cancellation\n\t\t\t\t}\n\t\t\t\telse if (typeof error.message === 'string' && Utils.isObject(error.response) && [400,500].includes(error.response.status)) {\n\t\t\t\t\tthis.emit('viewLogs', [{\n\t\t\t\t\t\tid: error.id,\n\t\t\t\t\t\tcode: error.code,\n\t\t\t\t\t\tlevel: 'error',\n\t\t\t\t\t\tmessage: error.message,\n\t\t\t\t\t\tlinks: error.links || []\n\t\t\t\t\t}]);\n\t\t\t\t\tUtils.error(this, \"Synchronous processing failed. Please see the logs for details.\", \"Processing Error\");\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tUtils.exception(this, error, \"Server Error\");\n\t\t\t\t}\n\t\t\t} finally {\n\t\t\t\tif (toast) {\n\t\t\t\t\tthis.$snotify.remove(toast.id, true);\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tjobCreated(job) {\n\t\t\tvar buttons = [];\n\t\t\tif (this.supports('estimateJob')) {\n\t\t\t\tbuttons.push({text: 'Estimate', action: () => this.estimateJob(job)});\n\t\t\t}\n\t\t\tif (this.supports('startJob')) {\n\t\t\t\tbuttons.push({text: 'Start processing', action: () => this.queueJob(job)});\n\t\t\t}\n\t\t\tif (this.supports('deleteJob')) {\n\t\t\t\tbuttons.push({text: 'Delete', action: () => this.deleteJob(job)});\n\t\t\t}\n\t\t\tUtils.confirm(this, 'Job \"' + Utils.getResourceTitle(job) + '\" created!', buttons);\n\t\t},\n\t\tgetTitleField(value = null) {\n\t\t\treturn {\n\t\t\t\tname: 'title',\n\t\t\t\tlabel: 'Title',\n\t\t\t\tschema: {type: 'string'},\n\t\t\t\tdefault: null,\n\t\t\t\tvalue: value,\n\t\t\t\toptional: true\n\t\t\t};\n\t\t},\n\t\tgetDescriptionField(value = null) {\n\t\t\treturn {\n\t\t\t\tname: 'description',\n\t\t\t\tlabel: 'Description',\n\t\t\t\tschema: {type: 'string', subtype: 'commonmark'},\n\t\t\t\tdefault: null,\n\t\t\t\tvalue: value,\n\t\t\t\tdescription: 'CommonMark (Markdown) is allowed.',\n\t\t\t\toptional: true\n\t\t\t};\n\t\t},\n\t\tgetBillingPlanField(value = undefined) {\n\t\t\treturn {\n\t\t\t\tname: 'plan',\n\t\t\t\tlabel: 'Billing plan',\n\t\t\t\tschema: {type: 'string', subtype: 'billing-plan'},\n\t\t\t\tvalue: value,\n\t\t\t\toptional: true\n\t\t\t};\n\t\t},\n\t\tgetBudgetField(value = null) {\n\t\t\treturn {\n\t\t\t\tname: 'budget',\n\t\t\t\tlabel: 'Budget',\n\t\t\t\tschema: {type: 'number', subtype: 'budget'},\n\t\t\t\tdefault: null,\n\t\t\t\tvalue: value,\n\t\t\t\toptional: true\n\t\t\t};\n\t\t},\n\t\tnormalizeToDefaultData(data) {\n\t\t\tif (typeof data.title !== 'undefined' && (typeof data.title !== 'string' || data.title.length === 0)) {\n\t\t\t\tdata.title = null;\n\t\t\t}\n\t\t\tif (typeof data.description !== 'undefined' && (typeof data.description !== 'string' || data.description.length === 0)) {\n\t\t\t\tdata.description = null;\n\t\t\t}\n\t\t\tif (typeof data.plan !== 'undefined' && (typeof data.plan !== 'string' || data.plan.length === 0)) {\n\t\t\t\tdata.plan = null;\n\t\t\t}\n\t\t\tif (typeof data.budget !== 'undefined' && (typeof data.budget !== 'number' || data.budget < 0)) {\n\t\t\t\tdata.budget = null;\n\t\t\t}\n\t\t\treturn data;\n\t\t},\n\t\tasync createJob(process, data) {\n\t\t\ttry {\n\t\t\t\tdata = this.normalizeToDefaultData(data);\n\t\t\t\tlet job = await this.create({parameters: [process, data.title, data.description, data.plan, data.budget]});\n\t\t\t\tthis.jobCreated(job);\n\t\t\t} catch (error) {\n\t\t\t\tUtils.exception(this, error, 'Create Job Error: ' + (data.title || ''));\n\t\t\t}\n\t\t},\n\t\tcreateJobFromScript() {\n\t\t\tvar fields = [\n\t\t\t\tthis.getTitleField(),\n\t\t\t\tthis.getDescriptionField(),\n\t\t\t\tthis.supportsBillingPlans ? this.getBillingPlanField() : null,\n\t\t\t\tthis.supportsBilling ? this.getBudgetField() : null\n\t\t\t];\n\t\t\tthis.emit('showDataForm', \"Create new batch job\", fields, data => this.createJob(this.process, data));\n\t\t},\n\t\tasync deleteJob(job) {\n\t\t\tif (!confirm(`Do you really want to delete the batch job \"${Utils.getResourceTitle(job)}\"?`)) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\ttry {\n\t\t\t\tawait this.delete({data: job});\n\t\t\t\tthis.emit('removeBatchJob', job.id);\n\t\t\t} catch(error) {\n\t\t\t\tUtils.exception(this, error, 'Delete Job Error: ' + Utils.getResourceTitle(job));\n\t\t\t}\n\t\t},\n\t\texecuteWatchers() {\n\t\t\tfor(var i in this.watchers) {\n\t\t\t\tthis.refreshElement(this.watchers[i], (updated, old) => {\n\t\t\t\t\tif (old.status !== 'finished' && updated.status === 'finished') {\n\t\t\t\t\t\tvar buttons = [];\n\t\t\t\t\t\tif (this.supports('downloadResults')) {\n\t\t\t\t\t\t\tbuttons.push({text: 'Download', action: () => this.downloadResults(updated)});\n\t\t\t\t\t\t\tbuttons.push({text: 'View', action: () => this.viewResults(updated)});\n\t\t\t\t\t\t}\n\t\t\t\t\t\tUtils.confirm(this, 'Job \"' + Utils.getResourceTitle(updated) + '\" has finished!', buttons);\n\t\t\t\t\t}\n\t\t\t\t\telse if (old.status !== 'error' && updated.status === 'error') {\n\t\t\t\t\t\tUtils.error(this, 'Job \"' + Utils.getResourceTitle(updated) + '\" has stopped due to an error or timeout.');\n\t\t\t\t\t}\n\n\t\t\t\t\tif (old.status !== updated.status) {\n\t\t\t\t\t\tthis.emit('jobStatusUpdated', updated, old);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\t\tasync showJobInfo(job) {\n\t\t\tthis.refreshElement(job, async (updatedJob) => {\n\t\t\t\tlet result = null;\n\t\t\t\tif (updatedJob.status === 'finished') {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tresult = await updatedJob.getResultsAsStac();\n\t\t\t\t\t} catch (error) {\n\t\t\t\t\t\tUtils.exception(this, error, \"Load Results Error: \" + Utils.getResourceTitle(updatedJob));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tthis.emit('showModal', 'JobInfoModal', {job: updatedJob.getAll(), result});\n\t\t\t});\n\t\t},\n\t\tasync estimateJob(job) {\n\t\t\t// Doesn't need to go through job store as it doesn't change job-related data\n\t\t\ttry {\n\t\t\t\tlet estimate = await job.estimateJob();\n\t\t\t\tthis.emit('showModal', 'JobEstimateModal', {job: job.getAll(), estimate});\n\t\t\t} catch(error) {\n\t\t\t\tUtils.exception(this, error, \"Job Estimate Error: \" + Utils.getResourceTitle(job));\n\t\t\t}\n\t\t},\n\t\tshowLogs(job) {\n\t\t\tthis.emit('viewLogs', job);\n\t\t},\n\t\treplaceProcess(job, process) {\n\t\t\tif (job instanceof Job) {\n\t\t\t\tif (this.isJobActive(job)) {\n\t\t\t\t\tUtils.error(this, \"Can't update process while batch job is running.\");\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tthis.updateJob(job, {process: process});\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\teditMetadata(oldJob) {\n\t\t\tthis.refreshElement(oldJob, job => {\n\t\t\t\tvar fields = [\n\t\t\t\t\tthis.getTitleField(job.title),\n\t\t\t\t\tthis.getDescriptionField(job.description),\n\t\t\t\t\tthis.supportsBillingPlans ? this.getBillingPlanField(job.plan) : null,\n\t\t\t\t\tthis.supportsBilling ? this.getBudgetField(job.budget) : null\n\t\t\t\t];\n\t\t\t\tthis.emit('showDataForm', \"Edit batch job\", fields, data => this.updateJob(job, data));\n\t\t\t});\n\t\t},\n\t\tupdateTitle(job, newTitle) {\n\t\t\tthis.updateJob(job, {title: newTitle});\n\t\t},\n\t\tasync updateJob(job, parameters) {\n\t\t\ttry {\n\t\t\t\tlet updatedJob = await this.update({data: job, parameters: this.normalizeToDefaultData(parameters)});\n\t\t\t\tUtils.ok(this, 'Job \"' + Utils.getResourceTitle(updatedJob) + '\" successfully updated.');\n\t\t\t} catch(error) {\n\t\t\t\tUtils.exception(this, error, 'Update Job Error: ' + Utils.getResourceTitle(job));\n\t\t\t}\n\t\t},\n\t\tasync queueJob(job) {\n\t\t\tthis.refreshElement(job, async (updatedJob) => {\n\t\t\t\tif (updatedJob.status === 'finished' && !confirm(`The batch job \"${Utils.getResourceTitle(updatedJob)}\" has already finished with results. Queueing the job again may discard all previous results! Do you really want to queue it again?`)) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\ttry {\n\t\t\t\t\tlet updatedJob = await this.queue({data: job});\n\t\t\t\t\tUtils.ok(this, 'Job \"' + Utils.getResourceTitle(updatedJob) + '\" successfully queued.');\n\t\t\t\t} catch(error) {\n\t\t\t\t\tUtils.exception(this, error, 'Queue Job Error: ' + Utils.getResourceTitle(job));\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tasync cancelJob(job) {\n\t\t\tif (!confirm(`Do you really want to cancel the execution of batch job \"${Utils.getResourceTitle(job)}\"?`)) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\ttry {\n\t\t\t\tlet updatedJob = await this.cancel({data: job});\n\t\t\t\tUtils.ok(this, 'Job \"' + Utils.getResourceTitle(updatedJob) + '\" successfully canceled.');\n\t\t\t} catch(error) {\n\t\t\t\tUtils.exception(this, error, 'Cancel Job Error: ' + Utils.getResourceTitle(job));\n\t\t\t}\n\t\t},\n\t\tasync viewResults(job) {\t\t\t\n\t\t\t// Doesn't need to go through job store as it doesn't change job-related data\n\t\t\ttry {\n\t\t\t\tlet stac = await job.getResultsAsStac()\n\t\t\t\tif(Utils.size(stac.assets) == 0) {\n\t\t\t\t\tUtils.error(this, 'No results available for job \"' + Utils.getResourceTitle(job) + '\".');\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tthis.emit('viewJobResults', stac, job);\n\t\t\t} catch(error) {\n\t\t\t\tUtils.exception(this, error, 'View Result Error: ' + Utils.getResourceTitle(job));\n\t\t\t}\n\t\t},\n\t\tasync downloadResults(job) {\t\n\t\t\t// Doesn't need to go through job store as it doesn't change job-related data\n\t\t\ttry {\n\t\t\t\tlet result = await job.getResultsAsStac();\n\t\t\t\tif(Utils.size(result.assets) == 0) {\n\t\t\t\t\tUtils.error(this, 'No results available for job \"' + Utils.getResourceTitle(job) + '\".');\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tthis.emit('showModal', 'DownloadAssetsModal', {job, result});\n\t\t\t} catch(error) {\n\t\t\t\tUtils.exception(this, error, 'Download Result Error: ' + Utils.getResourceTitle(job));\n\t\t\t}\n\t\t},\n\t\tmayHaveResults(job) {\n\t\t\treturn (typeof job.status !== 'string' || job.status.toLowerCase() == 'finished'); // todo: We may also want to check for canceled or errored here.\n\t\t},\n\t\tisJobInactive(job) {\n\t\t\treturn Utils.isActiveJobStatusCode(job.status) !== true;\n\t\t},\n\t\tisJobActive(job) {\n\t\t\treturn Utils.isActiveJobStatusCode(job.status) !== false;\n\t\t}\n\t}\n}\n</script>\n\n<style lang=\"scss\">\n.JobPanel {\n\t.title {\n\t\twidth: 25%;\n\n\t\t.id {\n\t\t\tcolor: #777;\n\t\t}\n\t}\n\t.consumed_credits, .updated, .created {\n\t\ttext-align: right;\n\t}\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./JobPanel.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./JobPanel.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./JobPanel.vue?vue&type=template&id=55aca08e&\"\nimport script from \"./JobPanel.vue?vue&type=script&lang=js&\"\nexport * from \"./JobPanel.vue?vue&type=script&lang=js&\"\nimport style0 from \"./JobPanel.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('DataTable',{ref:\"table\",staticClass:\"ServicePanel\",attrs:{\"data\":_vm.data,\"columns\":_vm.columns},scopedSlots:_vm._u([{key:\"actions\",fn:function(p){return [_c('button',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.supportsRead),expression:\"supportsRead\"}],attrs:{\"title\":\"Details\"},on:{\"click\":function($event){return _vm.serviceInfo(p.row)}}},[_c('i',{staticClass:\"fas fa-info\"})]),_c('button',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.supportsUpdate),expression:\"supportsUpdate\"}],attrs:{\"title\":\"Edit metadata\"},on:{\"click\":function($event){return _vm.editMetadata(p.row)}}},[_c('i',{staticClass:\"fas fa-edit\"})]),_c('button',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.supportsRead),expression:\"supportsRead\"}],attrs:{\"title\":\"Edit process\"},on:{\"click\":function($event){return _vm.showInEditor(p.row)}}},[_c('i',{staticClass:\"fas fa-project-diagram\"})]),_c('button',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.supportsDelete),expression:\"supportsDelete\"}],attrs:{\"title\":\"Delete\"},on:{\"click\":function($event){return _vm.deleteService(p.row)}}},[_c('i',{staticClass:\"fas fa-trash\"})]),_c('button',{directives:[{name:\"show\",rawName:\"v-show\",value:(p.row.enabled && _vm.isMapServiceSupported(p.row.type)),expression:\"p.row.enabled && isMapServiceSupported(p.row.type)\"}],attrs:{\"title\":\"View on map\"},on:{\"click\":function($event){return _vm.viewService(p.row)}}},[_c('i',{staticClass:\"fas fa-map\"})]),_c('button',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.supports('debugService')),expression:\"supports('debugService')\"}],attrs:{\"title\":\"View logs\"},on:{\"click\":function($event){return _vm.showLogs(p.row)}}},[_c('i',{staticClass:\"fas fa-bug\"})])]}}])},[_c('template',{slot:\"toolbar\"},[_c('button',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.supportsCreate),expression:\"supportsCreate\"}],attrs:{\"title\":\"Add new service\",\"disabled\":!this.hasProcess},on:{\"click\":function($event){return _vm.createServiceFromScript()}}},[_c('i',{staticClass:\"fas fa-plus\"}),_vm._v(\" Create\")])])],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n\t<DataTable ref=\"table\" :data=\"data\" :columns=\"columns\" class=\"ServicePanel\">\n\t\t<template slot=\"toolbar\">\n\t\t\t<button title=\"Add new service\" @click=\"createServiceFromScript()\" v-show=\"supportsCreate\" :disabled=\"!this.hasProcess\"><i class=\"fas fa-plus\"></i> Create</button>\n\t\t</template>\n\t\t<template #actions=\"p\">\n\t\t\t<button title=\"Details\" @click=\"serviceInfo(p.row)\" v-show=\"supportsRead\"><i class=\"fas fa-info\"></i></button>\n\t\t\t<button title=\"Edit metadata\" @click=\"editMetadata(p.row)\" v-show=\"supportsUpdate\"><i class=\"fas fa-edit\"></i></button>\n\t\t\t<button title=\"Edit process\" @click=\"showInEditor(p.row)\" v-show=\"supportsRead\"><i class=\"fas fa-project-diagram\"></i></button>\n\t\t\t<button title=\"Delete\" @click=\"deleteService(p.row)\" v-show=\"supportsDelete\"><i class=\"fas fa-trash\"></i></button>\n\t\t\t<button v-show=\"p.row.enabled && isMapServiceSupported(p.row.type)\" title=\"View on map\" @click=\"viewService(p.row)\"><i class=\"fas fa-map\"></i></button>\n\t\t\t<button title=\"View logs\" @click=\"showLogs(p.row)\" v-show=\"supports('debugService')\"><i class=\"fas fa-bug\"></i></button>\n\t\t</template>\n\t</DataTable>\n</template>\n\n<script>\nimport EventBusMixin from './EventBusMixin.vue';\nimport WorkPanelMixin from './WorkPanelMixin';\nimport Utils from '../utils';\nimport { Service } from '@openeo/js-client';\n\nexport default {\n\tname: 'ServicePanel',\n\tmixins: [WorkPanelMixin('services', 'web service', 'web services'), EventBusMixin],\n\tdata() {\n\t\treturn {\n\t\t\tcolumns: {\n\t\t\t\tid: {\n\t\t\t\t\tname: 'ID',\n\t\t\t\t\tprimaryKey: true,\n\t\t\t\t\thide: true\n\t\t\t\t},\n\t\t\t\ttitle: {\n\t\t\t\t\tname: 'Web Service',\n\t\t\t\t\tcomputedValue: row => Utils.getResourceTitle(row),\n\t\t\t\t\tformat: value => Utils.formatIdOrTitle(value),\n\t\t\t\t\tedit: this.updateTitle\n\t\t\t\t},\n\t\t\t\ttype: {\n\t\t\t\t\tname: 'Type',\n\t\t\t\t\tformat: value => typeof value === 'string' ? value.toUpperCase() : value,\n\t\t\t\t},\n\t\t\t\tenabled: {\n\t\t\t\t\tname: 'Enabled',\n\t\t\t\t\tedit: this.toggleEnabled\n\t\t\t\t},\n\t\t\t\tcreated: {\n\t\t\t\t\tname: 'Submitted',\n\t\t\t\t\tformat: 'Timestamp',\n\t\t\t\t\tsort: 'desc'\n\t\t\t\t},\n\t\t\t\tactions: {\n\t\t\t\t\tname: 'Actions',\n\t\t\t\t\tfilterable: false,\n\t\t\t\t\tsort: false\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t},\n\tcomputed: {\n\t\t...Utils.mapState('editor', ['process']),\n\t\t...Utils.mapGetters('editor', ['hasProcess']),\n\t\t...Utils.mapState(['serviceTypes']),\n\t\t...Utils.mapGetters(['supports', 'supportsBilling', 'supportsBillingPlans'])\n\t},\n\tmounted() {\n\t\tthis.listen('replaceProcess', this.replaceProcess);\n\t},\n\tmethods: {\n\t\tisMapServiceSupported(type) {\n\t\t\treturn Utils.isMapServiceSupported(type);\n\t\t},\n\t\tshowInEditor(service) {\n\t\t\tthis.refreshElement(service, updatedService => this.emit('editProcess', updatedService));\n\t\t},\n\t\tshowLogs(service) {\n\t\t\tthis.emit('viewLogs', service);\n\t\t},\n\t\tserviceCreated(service) {\n\t\t\tvar buttons = [];\n\t\t\tif (this.isMapServiceSupported(service.type)) {\n\t\t\t\tbuttons.push({text: 'View on map', action: () => this.viewService(service)});\n\t\t\t}\n\t\t\tif (this.supportsRead) {\n\t\t\t\tbuttons.push({text: 'Details', action: () => this.serviceInfo(service)});\n\t\t\t}\n\t\t\tif (this.supportsDelete) {\n\t\t\t\tbuttons.push({text: 'Delete', action: () => this.deleteService(service)});\n\t\t\t}\n\t\t\tUtils.confirm(this, 'Web Service created!', buttons);\n\t\t},\n\t\tgetTitleField(value = null) {\n\t\t\treturn {\n\t\t\t\tname: 'title',\n\t\t\t\tlabel: 'Title',\n\t\t\t\tschema: {type: 'string'},\n\t\t\t\tdefault: null,\n\t\t\t\tvalue: value,\n\t\t\t\toptional: true\n\t\t\t};\n\t\t},\n\t\tgetDescriptionField(value = null) {\n\t\t\treturn {\n\t\t\t\tname: 'description',\n\t\t\t\tlabel: 'Description',\n\t\t\t\tschema: {type: 'string', subtype: 'commonmark'},\n\t\t\t\tdefault: null,\n\t\t\t\tvalue: value,\n\t\t\t\tdescription: 'CommonMark (Markdown) is allowed.',\n\t\t\t\toptional: true\n\t\t\t};\n\t\t},\n\t\tgetServiceTypeField(value = undefined) {\n\t\t\treturn {\n\t\t\t\tname: 'type',\n\t\t\t\tlabel: 'Type',\n\t\t\t\tschema: {type: 'string', subtype: 'service-type'},\n\t\t\t\tvalue: value\n\t\t\t};\n\t\t},\n\t\tgetBillingPlanField(value = undefined) {\n\t\t\treturn {\n\t\t\t\tname: 'plan',\n\t\t\t\tlabel: 'Billing plan',\n\t\t\t\tschema: {type: 'string', subtype: 'billing-plan'},\n\t\t\t\tvalue: value,\n\t\t\t\toptional: true\n\t\t\t};\n\t\t},\n\t\tgetBudgetField(value = null) {\n\t\t\treturn {\n\t\t\t\tname: 'budget',\n\t\t\t\tlabel: 'Budget',\n\t\t\t\tschema: {type: 'number', subtype: 'budget'},\n\t\t\t\tdefault: null,\n\t\t\t\tvalue: value,\n\t\t\t\toptional: true\n\t\t\t};\n\t\t},\n\t\tgetEnabledField(value = true) {\n\t\t\treturn {\n\t\t\t\tname: 'enabled',\n\t\t\t\tlabel: 'Enabled',\n\t\t\t\tschema: {type: 'boolean'},\n\t\t\t\tdefault: true,\n\t\t\t\tvalue: value,\n\t\t\t\toptional: true\n\t\t\t};\n\t\t},\n\t\tgetConfigField(value = undefined) {\n\t\t\treturn {\n\t\t\t\tname: 'configuration',\n\t\t\t\tlabel: 'Service Configuration',\n\t\t\t\tschema: {type: 'object', subtype: 'service-config'},\n\t\t\t\tvalue: value,\n\t\t\t\toptional: true\n\t\t\t};\n\t\t},\n\t\tnormalizeToDefaultData(data) {\n\t\t\tif (typeof data.title !== 'undefined' && (typeof data.title !== 'string' || data.title.length === 0)) {\n\t\t\t\tdata.title = null;\n\t\t\t}\n\t\t\tif (typeof data.description !== 'undefined' && (typeof data.description !== 'string' || data.description.length === 0)) {\n\t\t\t\tdata.description = null;\n\t\t\t}\n\t\t\tif (typeof data.enabled !== 'undefined' && typeof data.enabled !== 'boolean') {\n\t\t\t\tdata.enabled = true;\n\t\t\t}\n\t\t\tif (typeof data.configuration !== 'undefined' && !Utils.isObject(data.configuration)) {\n\t\t\t\tdata.configuration = {};\n\t\t\t}\n\t\t\tif (typeof data.plan !== 'undefined' && (typeof data.plan !== 'string' || data.plan.length === 0)) {\n\t\t\t\tdata.plan = null;\n\t\t\t}\n\t\t\tif (typeof data.budget !== 'undefined' && (typeof data.budget !== 'number' || data.budget < 0)) {\n\t\t\t\tdata.budget = null;\n\t\t\t}\n\t\t\treturn data;\n\t\t},\n\t\tasync createService(script, data) {\n\t\t\tdata = this.normalizeToDefaultData(data);\n\t\t\ttry {\n\t\t\t\tlet service = await this.create({parameters: [script, data.type, data.title, data.description, data.enabled, data.configuration, data.plan, data.budget]});\n\t\t\t\tthis.serviceCreated(service);\n\t\t\t} catch(error) {\n\t\t\t\tUtils.exception(this, error, 'Create Service Error: ' + (data.title || ''));\n\t\t\t}\n\t\t},\n\t\tcreateServiceFromScript() {\n\t\t\tvar fields = [\n\t\t\t\tthis.getTitleField(),\n\t\t\t\tthis.getDescriptionField(),\n\t\t\t\tthis.getServiceTypeField(),\n\t\t\t\tthis.getEnabledField(),\n\t\t\t\tthis.supportsBillingPlans ? this.getBillingPlanField() : null,\n\t\t\t\tthis.supportsBilling ? this.getBudgetField() : null,\n\t\t\t\tthis.getConfigField()\n\t\t\t];\n\t\t\tthis.emit('showDataForm', \"Create new web service\", fields, data => this.createService(this.process, data));\n\t\t},\n\t\teditMetadata(oldService) {\n\t\t\tthis.refreshElement(oldService, service => {\n\t\t\t\tvar fields = [\n\t\t\t\t\tthis.getTitleField(service.title),\n\t\t\t\t\tthis.getDescriptionField(service.description),\n\t\t\t\t\tthis.getEnabledField(service.enabled),\n\t\t\t\t\tthis.supportsBillingPlans ? this.getBillingPlanField(service.plan) : null,\n\t\t\t\t\tthis.supportsBilling ? this.getBudgetField(service.budget) : null,\n\t\t\t\t\tthis.getConfigField(service.configuration)\n\t\t\t\t];\n\t\t\t\tthis.emit('showDataForm', \"Edit web service\", fields, data => this.updateService(service, data));\n\t\t\t});\n\t\t},\n\t\tserviceInfo(service) {\n\t\t\tthis.refreshElement(service, updatedService => {\n\t\t\t\tthis.emit('showModal', 'ServiceInfoModal', {service: updatedService.getAll()});\n\t\t\t});\n\t\t},\n\t\treplaceProcess(service, process) {\n\t\t\tif (service instanceof Service) {\n\t\t\t\tthis.updateService(service, {process: process});\n\t\t\t}\n\t\t},\n\t\tupdateTitle(service, newTitle) {\n\t\t\tthis.updateService(service, {title: newTitle});\n\t\t},\n\t\ttoggleEnabled(service) {\n\t\t\tthis.updateService(service, {enabled: !service.enabled});\n\t\t},\n\t\tasync updateService(service, parameters) {\n\t\t\ttry {\n\t\t\t\tlet updatedService = await this.update({data: service, parameters: this.normalizeToDefaultData(parameters)});\n\t\t\t\tUtils.ok(this, 'Service \"' + Utils.getResourceTitle(updatedService) + '\" successfully updated.');\n\t\t\t} catch(error) {\n\t\t\t\tUtils.exception(this, error, \"Update Service Error: \" + Utils.getResourceTitle(service));\n\t\t\t}\n\t\t},\n\t\tasync deleteService(service) {\n\t\t\tif (!confirm(`Do you really want to delete the service \"${Utils.getResourceTitle(service)}\"?`)) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\ttry {\n\t\t\t\tawait this.delete({data: service});\n\t\t\t\tthis.emit('removeWebService', service.id);\n\t\t\t} catch(error) {\n\t\t\t\tUtils.exception(this, error, 'Delete Service Error: ' + Utils.getResourceTitle(service));\n\t\t\t}\n\t\t},\n\t\tviewService(service) {\n\t\t\tthis.emit('viewWebService', service);\n\t\t}\n\t}\n}\n</script>\n\n<style>\n.ServicePanel .title {\n\twidth: 25%;\n}\n.ServicePanel .type {\n\ttext-align: center;\n}\n.ServicePanel .enabled {\n\ttext-align: center;\n}\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ServicePanel.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ServicePanel.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ServicePanel.vue?vue&type=template&id=9bae1426&\"\nimport script from \"./ServicePanel.vue?vue&type=script&lang=js&\"\nexport * from \"./ServicePanel.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ServicePanel.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\n\t<Tabs id=\"userContent\" ref=\"tabs\">\n\t\t<Tab v-if=\"showJobs\" id=\"jobs\" name=\"Data Processing\" icon=\"fa-tasks\" @show=\"onShow\" @hide=\"onHide\">\n\t\t\t<JobPanel />\n\t\t</Tab>\n\t\t<Tab v-if=\"showServices\" id=\"services\" name=\"Web Services\" icon=\"fa-cloud\" @show=\"onShow\" @hide=\"onHide\">\n\t\t\t<ServicePanel />\n\t\t</Tab>\n\t\t<Tab v-if=\"showCustomProcesses\" id=\"customProcesses\" name=\"Custom Processes\" icon=\"fa-sitemap\" @show=\"onShow\" @hide=\"onHide\">\n\t\t\t<CustomProcessPanel />\n\t\t</Tab>\n\t\t<Tab v-if=\"showFiles\" id=\"files\" name=\"Files\" icon=\"fa-file\" @show=\"onShow\" @hide=\"onHide\">\n\t\t\t<FilePanel />\n\t\t</Tab>\n\t</Tabs>\n</template>\n\n<script>\nimport Utils from '../utils.js';\nimport Tabs from '@openeo/vue-components/components/Tabs.vue';\nimport Tab from '@openeo/vue-components/components/Tab.vue';\nimport FilePanel from './FilePanel.vue';\nimport JobPanel from './JobPanel.vue';\nimport CustomProcessPanel from './CustomProcessPanel.vue';\nimport ServicePanel from './ServicePanel.vue';\n\nexport default {\n\tname: 'UserWorkspace',\n\tcomponents: {\n\t\tFilePanel,\n\t\tJobPanel,\n\t\tCustomProcessPanel,\n\t\tServicePanel,\n\t\tTabs,\n\t\tTab\n\t},\n\tcomputed: {\n\t\t...Utils.mapGetters(['supports']),\n\t\tshowJobs() {\n\t\t\treturn (this.supports('listJobs') || this.supports('createJob'));\n\t\t},\n\t\tshowServices() {\n\t\t\treturn (this.supports('listServices') || this.supports('createService'));\n\t\t},\n\t\tshowCustomProcesses() {\n\t\t\treturn (this.supports('listUserProcesses') || this.supports('setUserProcess'));\n\t\t},\n\t\tshowFiles() {\n\t\t\treturn (this.supports('listFiles') || this.supports('uploadFile'));\n\t\t}\n\t},\n\tmethods: {\n\t\tonShow(tab) {\n\t\t\tif (tab.$children.length && typeof tab.$children[0].onShow === 'function') {\n\t\t\t\ttab.$children[0].onShow();\n\t\t\t}\n\t\t},\n\t\tonHide(tab) {\n\t\t\tif (tab.$children.length && typeof tab.$children[0].onHide === 'function') {\n\t\t\t\ttab.$children[0].onHide();\n\t\t\t}\n\t\t}\n\t}\n}\n</script>\n\n<style>\n#userContent .tabContent {\n\tpadding: 5px;\n}\n#userContent .data-table .title {\n\tword-break: break-all;\n}\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UserWorkspace.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UserWorkspace.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./UserWorkspace.vue?vue&type=template&id=3fce6407&\"\nimport script from \"./UserWorkspace.vue?vue&type=script&lang=js&\"\nexport * from \"./UserWorkspace.vue?vue&type=script&lang=js&\"\nimport style0 from \"./UserWorkspace.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"viewerContainer\",on:{\"drop\":_vm.onDrop,\"dragover\":_vm.allowDrop}},[_c('Tabs',{ref:\"tabs\",attrs:{\"id\":\"viewerTabs\"},on:{\"empty\":_vm.onTabsEmpty},scopedSlots:_vm._u([{key:\"empty\",fn:function(){return [_vm._v(\"Nothing to show right now...\")]},proxy:true},{key:\"dynamic\",fn:function(ref){\nvar tab = ref.tab;\nreturn [(_vm.logViewerIcons.includes(tab.icon))?_c('LogViewer',{attrs:{\"data\":tab.data}}):(tab.icon === 'fa-map')?_c('MapViewer',{attrs:{\"data\":tab.data,\"removableLayers\":_vm.isCollectionPreview(tab.data)},on:{\"show\":_vm.onShow,\"hide\":_vm.onHide}}):(tab.data.component)?_c(tab.data.component,_vm._g(_vm._b({tag:\"component\",on:{\"show\":_vm.onShow,\"hide\":_vm.onHide}},'component',tab.data.props,false),tab.data.events)):_c('div',{staticClass:\"unsupported\"},[_vm._v(\" Sorry, the viewer doesn't support showing this type of data. \"),(_vm.isFormat(tab.data))?[_vm._v(\" Instead, you can download the data by clicking the link below.\"),_c('br'),_c('a',{attrs:{\"href\":tab.data.getUrl(),\"download\":\"\"}},[_vm._v(\"Download\")])]:_vm._e()],2)]}}])})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import { SupportedFormat } from './format';\n\nclass BrowserImage extends SupportedFormat {\n\n\tconstructor(asset) {\n\t\tsuper(asset, 'ImageViewer', 'fa-image');\n\t}\n\n\tisBinary() {\n\t\treturn true;\n\t}\n\n\tasync fetchData() {\n\t\tlet img = new Image();\n\t\timg.crossOrigin = 'anonymous';\n\t\timg.src = this.getUrl();\n\t\treturn img;\n\t}\n\n}\n\nexport default BrowserImage;","import { SupportedFormat } from './format';\n\nclass CSV extends SupportedFormat {\n\n\tconstructor(asset, delim = [',', ';']) {\n\t\tsuper(asset, 'TableViewer', 'fa-table');\n\t\tthis.delim = delim;\n\t}\n\n\tasync parseData(data) {\n\t\tif (typeof data === 'string') {\n\t\t\t// Parse CSV\n\t\t\tlet array = this.parseCSV(data.trim());\n\t\t\t// Convert values into numbers, if possible\n\t\t\treturn array.map(row => row.map(col => {\n\t\t\t\tlet num = Number.parseFloat(col);\n\t\t\t\treturn Number.isNaN(num) ? col : num;\n\t\t\t}));\n\t\t}\n\t\treturn data;\n\t}\n\n\t// From https://stackoverflow.com/questions/1293147/example-javascript-code-to-parse-csv-data\n\tparseCSV(str) {\n\t\tvar arr = [];\n\t\tvar quote = false;  // 'true' means we're inside a quoted field\n\t\n\t\t// Iterate over each character, keep track of current row and column (of the returned array)\n\t\tfor (var row = 0, col = 0, c = 0; c < str.length; c++) {\n\t\t\tvar cc = str[c], nc = str[c+1];        // Current character, next character\n\t\t\tarr[row] = arr[row] || [];             // Create a new row if necessary\n\t\t\tarr[row][col] = arr[row][col] || '';   // Create a new column (start with empty string) if necessary\n\t\n\t\t\t// If the current character is a quotation mark, and we're inside a\n\t\t\t// quoted field, and the next character is also a quotation mark,\n\t\t\t// add a quotation mark to the current column and skip the next character\n\t\t\tif (cc == '\"' && quote && nc == '\"') {\n\t\t\t\tarr[row][col] += cc; ++c;\n\t\t\t\tcontinue;\n\t\t\t}\n\t\n\t\t\t// If it's just one quotation mark, begin/end quoted field\n\t\t\tif (cc == '\"') {\n\t\t\t\tquote = !quote;\n\t\t\t\tcontinue;\n\t\t\t}\n\t\n\t\t\t// If it's a elimiter and we're not in a quoted field, move on to the next column\n\t\t\tif (this.delim.includes(cc) && !quote) {\n\t\t\t\t++col;\n\t\t\t\tcontinue;\n\t\t\t}\n\t\n\t\t\t// If it's a newline (CRLF) and we're not in a quoted field, skip the next character\n\t\t\t// and move on to the next row and move to column 0 of that new row\n\t\t\tif (cc == '\\r' && nc == '\\n' && !quote) {\n\t\t\t\t++row; col = 0; ++c;\n\t\t\t\tcontinue;\n\t\t\t}\n\t\n\t\t\t// If it's a newline (LF or CR) and we're not in a quoted field,\n\t\t\t// move on to the next row and move to column 0 of that new row\n\t\t\tif (cc == '\\n' && !quote) {\n\t\t\t\t++row; col = 0;\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tif (cc == '\\r' && !quote) {\n\t\t\t\t++row; col = 0;\n\t\t\t\tcontinue;\n\t\t\t}\n\t\n\t\t\t// Otherwise, append the current character to the current column\n\t\t\tarr[row][col] += cc;\n\t\t}\n\t\treturn arr;\n\t}\n\n}\n\nexport default CSV;","import { SupportedFormat } from './format';\n\nclass NativeType extends SupportedFormat {\n\n\tconstructor(asset) {\n\t\tsuper(asset, \"DataViewer\");\n\t}\n\n}\n\nexport default NativeType;","import CSV from './csv';\n\nclass TSV extends CSV {\n\n\tconstructor(asset) {\n\t\tsuper(asset, [\"\\t\"]);\n\t}\n\n}\n\nexport default TSV;","import contentType from 'content-type';\n\nimport BrowserImage from '../formats/browserImage';\nimport CSV from '../formats/csv';\nimport GeoTIFF from '../formats/geotiff';\nimport JSON_ from '../formats/json';\nimport NativeType from './native';\nimport TSV from '../formats/tsv';\nimport { UnsupportedFormat } from './format';\n\nexport default class FormatRegistry {\n\n\tconstructor() {\n\t}\n\n\tcreateFilesFromSTAC(stac, resource = null) {\n\t\tlet files = Object.values(stac.assets)\n\t\t\t.map(asset => this.createFileFromAsset(asset, stac));\n\t\tif (resource) {\n\t\t\tfiles.forEach(file => file.setContext(resource));\n\t\t}\n\t\treturn files;\n\t}\n\n\tcreateFilesFromBlob(data) {\n\t\tif (!(data instanceof Blob)) {\n\t\t\tthrow new Error(\"Given data is not a valid Blob\");\n\t\t}\n\t\treturn this.createFilesFromSTAC({\n\t\t\tstac_version: \"1.0.0\",\n\t\t\ttype: \"Feature\",\n\t\t\tgeometry: null,\n\t\t\tproperties: {},\n\t\t\tlinks: [],\n\t\t\tassets: {\n\t\t\t\tresult: {\n\t\t\t\t\thref: URL.createObjectURL(data),\n\t\t\t\t\ttype: data.type\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\tcreateFileFromAsset(asset, stac) {\n\t\ttry {\n\n\t\t\t// Detect by media type\n\t\t\tif (typeof asset.type === 'string') {\n\t\t\t\tlet mime = contentType.parse(asset.type.toLowerCase());\n\t\t\t\tswitch(mime.type) {\n\t\t\t\t\tcase 'image/png':\n\t\t\t\t\tcase 'image/jpg':\n\t\t\t\t\tcase 'image/jpeg':\n\t\t\t\t\tcase 'image/gif':\n\t\t\t\t\tcase 'image/webp':\n\t\t\t\t\t\treturn new BrowserImage(asset);\n\t\t\t\t\tcase 'application/json':\n\t\t\t\t\tcase 'text/json':\n\t\t\t\t\tcase 'application/geo+json':\n\t\t\t\t\t\treturn new JSON_(asset);\n\t\t\t\t\tcase 'text/plain':\n\t\t\t\t\t\treturn new NativeType(asset);\n\t\t\t\t\tcase 'text/csv':\n\t\t\t\t\t\treturn new CSV(asset);\n\t\t\t\t\tcase 'text/tab-separated-values':\n\t\t\t\t\t\treturn new TSV(asset);\n\t\t\t\t\tcase 'image/tiff':\n\t\t\t\t\t\treturn new GeoTIFF(asset, stac);\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\t// Fallback: Detect by file extension\n\t\t\tif (typeof asset.href === 'string') {\n\t\t\t\tlet extension = asset.href.split(/[#?]/)[0].split('.').pop().trim().toLowerCase();\n\t\t\t\tswitch(extension) {\n\t\t\t\t\tcase 'png':\n\t\t\t\t\tcase 'jpg':\n\t\t\t\t\tcase 'jpeg':\n\t\t\t\t\tcase 'gif':\n\t\t\t\t\tcase 'webp':\n\t\t\t\t\t\treturn new BrowserImage(asset);\n\t\t\t\t\tcase 'json':\n\t\t\t\t\tcase 'geojson':\n\t\t\t\t\t\treturn new JSON_(asset);\n\t\t\t\t\tcase 'txt':\n\t\t\t\t\t\treturn new NativeType(asset);\n\t\t\t\t\tcase 'csv':\n\t\t\t\t\t\treturn new CSV(asset);\n\t\t\t\t\tcase 'tsv':\n\t\t\t\t\t\treturn new TSV(asset);\n\t\t\t\t\tcase 'tif':\n\t\t\t\t\tcase 'tiff':\n\t\t\t\t\t\treturn new GeoTIFF(asset, stac);\n\t\t\t\t}\n\t\t\t}\n\n\t\t} catch (error) {\n\t\t\tconsole.log(error);\n\t\t}\n\n\t\treturn new UnsupportedFormat(asset);\n\t}\n\n}","<template>\n\t<div class=\"viewerContainer\" @drop=\"onDrop\" @dragover=\"allowDrop\">\n\t\t<Tabs id=\"viewerTabs\" ref=\"tabs\" @empty=\"onTabsEmpty\">\n\t\t\t<template #empty>Nothing to show right now...</template>\n\t\t\t<template #dynamic=\"{ tab }\">\n\t\t\t\t<LogViewer v-if=\"logViewerIcons.includes(tab.icon)\" :data=\"tab.data\" />\n\t\t\t\t<MapViewer v-else-if=\"tab.icon === 'fa-map'\" :data=\"tab.data\" :removableLayers=\"isCollectionPreview(tab.data)\" @show=\"onShow\" @hide=\"onHide\" /> <!-- for services -->\n\t\t\t\t<component v-else-if=\"tab.data.component\" :is=\"tab.data.component\" v-on=\"tab.data.events\" v-bind=\"tab.data.props\" @show=\"onShow\" @hide=\"onHide\" /> <!-- for file formats -->\n\t\t\t\t<div class=\"unsupported\" v-else>\n\t\t\t\t\tSorry, the viewer doesn't support showing this type of data.\n\t\t\t\t\t<template v-if=\"isFormat(tab.data)\">\n\t\t\t\t\t\tInstead, you can download the data by clicking the link below.<br />\n\t\t\t\t\t\t<a :href=\"tab.data.getUrl()\" download>Download</a>\n\t\t\t\t\t</template>\n\t\t\t\t</div>\n\t\t\t</template>\n\t\t</Tabs>\n\t</div>\n</template>\n\n<script>\nimport EventBusMixin from './EventBusMixin.vue';\nimport Utils from '../utils.js';\nimport Tabs from '@openeo/vue-components/components/Tabs.vue';\nimport { Service } from '@openeo/js-client';\nimport FormatRegistry from '../formats/formatRegistry';\nimport { Format } from '../formats/format';\n\nexport default {\n\tname: 'Viewer',\n\tmixins: [EventBusMixin],\n\tcomponents: {\n\t\tTabs,\n\t\tDataViewer: () => import('./viewer/DataViewer.vue'),\n\t\tTableViewer: () => import('./viewer/TableViewer.vue'),\n\t\tImageViewer: () => import('./viewer/ImageViewer.vue'),\n\t\tLogViewer: () => import('./viewer/LogViewer.vue'),\n\t\tMapViewer: () => import('./viewer/MapViewer.vue')\n\t},\n\tmounted() {\n\t\tthis.listen('viewSyncResult', this.showSyncResults);\n\t\tthis.listen('viewJobResults', this.showJobResults);\n\t\tthis.listen('viewWebService', this.showWebService);\n\t\tthis.listen('showCollectionPreview', this.showCollectionPreview);\n\t\tthis.listen('viewLogs', this.showLogs);\n\t\tthis.listen('removeWebService', this.closeTabWithLogs);\n\t\tthis.listen('removeBatchJob', this.closeTabWithLogs);\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tregistry: new FormatRegistry(),\n\t\t\ttabTitleCounter: {},\n\t\t\ttabIdCounter: 0,\n\t\t\tlogViewerIcons: [\n\t\t\t\t'fa-bug',\n\t\t\t\t'fa-bomb',\n\t\t\t\t'fa-tasks'\n\t\t\t]\n\t\t}\n\t},\n\tcomputed: {\n\t\t...Utils.mapState(['connection', 'userLocation']),\n\t\tnextTabId() {\n\t\t\treturn `viewer~${this.tabIdCounter}`;\n\t\t}\n\t},\n\tmethods: {\n\t\t...Utils.mapActions(['describeCollection']),\n\t\tisCollectionPreview(data) {\n\t\t\treturn (data instanceof Service && Utils.isObject(data.attributes) && data.attributes.preview === true);\n\t\t},\n\t\tisFormat(data) {\n\t\t\treturn (data instanceof Format);\n\t\t},\n\t\tasync showCollectionPreview(collection) {\n\t\t\tif (typeof collection === 'string') {\n\t\t\t\ttry {\n\t\t\t\t\tcollection = await this.describeCollection(collection);\n\t\t\t\t} catch (error) {\n\t\t\t\t\tUtils.error(this, \"Sorry, can't load collection '\" + collection + \"'.\");\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tlet link = Utils.getPreviewLinkFromSTAC(collection);\n\t\t\tif (!link) {\n\t\t\t\tUtils.error(this, 'No visualizations found for collection');\n\t\t\t}\n\n\t\t\tlet service = new Service(null, `collection-preview~${collection.id}`);\n\t\t\tservice.url = link.href;\n\t\t\tservice.type = link.rel.toLowerCase();\n\t\t\tservice.attributes = {\n\t\t\t\tpreview: true,\n\t\t\t\tbbox: Utils.extentToBBox(collection.extent.spatial.bbox[0])\n\t\t\t};\n\t\t\tif (link.rel.toLowerCase() === 'wmts') {\n\t\t\t\tif (typeof link['wmts:layer'] === 'string') {\n\t\t\t\t\tservice.attributes.layers = [\n\t\t\t\t\t\tlink['wmts:layer']\n\t\t\t\t\t];\n\t\t\t\t}\n\t\t\t\telse if (Array.isArray(link['wmts:layer'])) {\n\t\t\t\t\tservice.attributes.layers = link['wmts:layer'];\n\t\t\t\t}\n\t\t\t\tservice.attributes.dimensions = link['wmts:dimensions'];\n\t\t\t}\n\n\t\t\tthis.showMapViewer(service, service.id, Utils.getResourceTitle(collection, true), true);\n\t\t},\n\t\tshowWebService(service) {\n\t\t\tthis.showMapViewer(service, service.id, null, true);\n\t\t},\n\t\tshowLogs(resource, defaultTitle = 'Logs', selectTab = true, faIcon = 'fa-bug') {\n\t\t\tlet title = Array.isArray(resource) ? defaultTitle : Utils.getResourceTitle(resource, \"Logs\");\n\t\t\tlet id = Array.isArray(resource) ? null : `logs~${resource.id}`;\n\t\t\tthis.$refs.tabs.addTab(\n\t\t\t\ttitle, faIcon, resource, id, selectTab, true,\n\t\t\t\ttab => this.onShow(tab),\n\t\t\t\ttab => this.onHide(tab)\n\t\t\t);\n\t\t},\n\t\tcloseTabWithLogs(id) {\n\t\t\tthis.closeTab(id);\n\t\t\tthis.closeTab(`logs~${id}`);\n\t\t},\n\t\tcloseTab(id) {\n\t\t\tlet tab = this.$refs.tabs.getTab(id);\n\t\t\tif (tab) {\n\t\t\t\tthis.$refs.tabs.closeTab(tab);\n\t\t\t}\n\t\t},\n\t\tshowSyncResults(result) {\n\t\t\tlet title = this.makeTitle(\"Result\");\n\t\t\t// result.data should always be a blob\n\t\t\tlet files = this.registry.createFilesFromBlob(result.data);\n\t\t\t// Download files to disc so that nothing gets lost\n\t\t\tfiles.forEach(file => file.download());\n\t\t\t// Show the data in the viewer\n\t\t\tthis.showViewer(files, title).finally(() => {\n\t\t\t\t// Open the log files after the data tab has been opened -> it's in finally to spawn after the data tab\n\t\t\t\tif (Array.isArray(result.logs) && result.logs.length > 0) {\n\t\t\t\t\tthis.showLogs(result.logs, title, false);\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tshowJobResults(stac, job) {\n\t\t\tlet files = this.registry.createFilesFromSTAC(stac, job);\n\t\t\tthis.showViewer(files, Utils.getResourceTitle(job, true));\n\t\t},\n\t\tshowMapViewer(resource, id = null, title = null, reUseExistingTab = false) {\n\t\t\tif (!title) {\n\t\t\t\ttitle = Utils.getResourceTitle(resource, true);\n\t\t\t}\n\t\t\tif (!id) {\n\t\t\t\tid = this.nextTabId;\n\t\t\t\tthis.tabIdCounter++;\n\t\t\t\tif (reUseExistingTab) {\n\t\t\t\t\tthrow new Error(\"Tabs without id can't be re-used\");\n\t\t\t\t}\n\t\t\t}\n\t\t\telse if (reUseExistingTab) {\n\t\t\t\tlet tab = this.$refs.tabs.getTab(id);\n\t\t\t\tif (tab) {\n\t\t\t\t\treturn this.$refs.tabs.selectTab(tab);\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.$refs.tabs.addTab(\n\t\t\t\ttitle, \"fa-map\", resource, id, true, true,\n\t\t\t\ttab => this.onShow(tab),\n\t\t\t\ttab => this.onHide(tab)\n\t\t\t);\n\t\t},\n\t\tasync showViewer(files, title = null) {\n\t\t\tfor(let file of files) {\n\t\t\t\ttry {\n\t\t\t\t\tlet context = file.getContext();\n\t\t\t\t\tlet id = context ? context.id : null;\n\t\t\t\t\tif (!title && context) {\n\t\t\t\t\t\ttitle = Utils.getResourceTitle(context, true);\n\t\t\t\t\t}\n\t\t\t\t\telse if (!title) {\n\t\t\t\t\t\ttitle = this.makeTitle(\"Untitled\");\n\t\t\t\t\t}\n\t\t\t\t\tawait file.getData(this.connection);\n\t\t\t\t\tthis.$refs.tabs.addTab(\n\t\t\t\t\t\ttitle, file.icon, file, id, true, true,\n\t\t\t\t\t\ttab => this.onShow(tab),\n\t\t\t\t\t\ttab => this.onHide(tab)\n\t\t\t\t\t);\n\t\t\t\t} catch (error) {\n\t\t\t\t\tUtils.exception(this, error, \"Viewer Error\");\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tasync callChildFunction(tab, fn, ...args) {\n\t\t\tlet result;\n\t\t\tif (tab.$children.length === 1 && typeof tab.$children[0][fn] === 'function') {\n\t\t\t\tresult = tab.$children[0][fn](...args);\n\t\t\t}\n\t\t\telse if (typeof tab[fn] === 'function') {\n\t\t\t\tresult = tab[fn](...args);\n\t\t\t}\n\t\t\telse {\n\t\t\t\treturn Promise.reject();\n\t\t\t}\n\t\t\tif (result instanceof Promise) {\n\t\t\t\tresult = await result;\n\t\t\t}\n\t\t\treturn result;\n\t\t},\n\t\tasync onDrop(event) {\n\t\t\tvar json = event.dataTransfer.getData(\"application/vnd.openeo-node\");\n\t\t\tif (!json) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tlet node = JSON.parse(json);\n\t\t\tif (node.process_id === 'load_collection') {\n\t\t\t\tevent.preventDefault();\n\t\t\t\tlet id = Utils.isObject(node.arguments) ? node.arguments.id : null;\n\t\t\t\ttry {\n\t\t\t\t\tlet collection = await this.describeCollection(id);\n\t\t\t\t\tthis.showCollectionPreview(collection);\n\t\t\t\t} catch (error) {\n\t\t\t\t\tUtils.error(this, \"Sorry, can't load collection details for '\" + id + \"'.\");\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tallowDrop(event) {\n\t\t\tevent.preventDefault();\n\t\t},\n\t\tonShow(tab) {\n\t\t\tthis.callChildFunction(tab, 'onShow');\n\t\t},\n\t\tonHide(tab) {\n\t\t\tthis.callChildFunction(tab, 'onHide');\n\t\t},\n\t\tonTabsEmpty(hasNone) {\n\t\t\tthis.$emit('empty', hasNone);\n\t\t},\n\t\tuniqueTitle(title) {\n\t\t\tif (!this.tabTitleCounter[title]) {\n\t\t\t\tthis.tabTitleCounter[title] = 1;\n\t\t\t\treturn title;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tthis.tabTitleCounter[title]++;\n\t\t\t\treturn title + \" (\" + this.tabTitleCounter[title] + \")\";\n\t\t\t}\n\t\t},\n\t\tmakeTitle(title, type, unique = true) {\n\t\t\tif (!title) {\n\t\t\t\treturn this.uniqueTitle(type);\n\t\t\t}\n\t\t\telse if (unique) {\n\t\t\t\treturn this.uniqueTitle(title);\n\t\t\t}\n\t\t\telse {\n\t\t\t\treturn title;\n\t\t\t}\n\t\t}\n\t}\n}\n</script>\n\n<style lang=\"scss\">\n.map-viewer, .viewerContainer {\n\theight: 100%;\n}\n.viewerContainer {\n\t.unsupported {\n\t\tpadding: 1em;\n\t}\n\t.tabsEmpty {\n\t\theight: 100%;\n\t\tpadding: 1rem;\n\t\tmargin: auto;\n\t}\n}\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Viewer.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Viewer.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Viewer.vue?vue&type=template&id=25cf5b8a&\"\nimport script from \"./Viewer.vue?vue&type=script&lang=js&\"\nexport * from \"./Viewer.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Viewer.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\n\t<div id=\"wrapper\">\n\t\t<div id=\"ide\" :class=\"{authenticated: isAuthenticated}\">\n\t\t\t<header class=\"navbar\">\n\t\t\t\t<Logo />\n\t\t\t\t<ul id=\"menu\">\n\t\t\t\t\t<li><div class=\"menuItem\" @click=\"showHelp\" title=\"Start a guided tour\"><i class=\"fas fa-question fa-fw\"></i> Help</div></li>\n\t\t\t\t\t<li><div class=\"menuItem\" @click=\"showServerInfo\" title=\"Get server information\"><i class=\"fas fa-info fa-fw\"></i> Server</div></li>\n\t\t\t\t\t<li><UserMenu /></li>\n\t\t\t\t</ul>\n\t\t\t</header>\n\t\t\t<Splitpanes class=\"default-theme\" @resize=\"resized\" @pane-maximize=\"resized\">\n\t\t\t\t<Pane id=\"discovery\" :size=\"splitpaneSizeH[0]\">\n\t\t\t\t\t<DiscoveryToolbar class=\"toolbar tour-ide-discovery\" :onAddProcess=\"insertProcess\" :collectionPreview=\"true\" :persist=\"true\" />\n\t\t\t\t</Pane>\n\t\t\t\t<Pane id=\"workspace\" :size=\"splitpaneSizeH[1]\">\n\t\t\t\t\t<Splitpanes class=\"default-theme\" horizontal @resize=\"resized\" @pane-maximize=\"resized\">\n\t\t\t\t\t\t<Pane id=\"editor\" :size=\"splitpaneSizeV[0]\">\n\t\t\t\t\t\t\t<Editor ref=\"editor\" class=\"mainEditor tour-ide-editor\" id=\"main\" :value=\"process\" @input=\"updateEditor\" :title=\"contextTitle\">\n\t\t\t\t\t\t\t\t<template #file-toolbar>\n\t\t\t\t\t\t\t\t\t<button type=\"button\" @click=\"importProcess\" title=\"Import process from external source\"><i class=\"fas fa-cloud-download-alt\"></i></button>\n\t\t\t\t\t\t\t\t\t<button type=\"button\" v-show=\"saveSupported\" :disabled=\"!hasProcess\" @click=\"saveProcess\" :title=\"'Save to ' + contextTitle\"><i class=\"fas fa-save\"></i></button>\n\t\t\t\t\t\t\t\t\t<button type=\"button\" @click=\"exportCode\" :disabled=\"!hasProcess\" title=\"Export into another programming language\"><i class=\"fas fa-file-export\"></i></button>\n\t\t\t\t\t\t\t\t\t<button type=\"button\" v-show=\"validateSupported\" :disabled=\"!hasProcess\" @click=\"validateProcess\" title=\"Validate process on server-side\"><i class=\"fas fa-tasks\"></i></button>\n\t\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t</Editor>\n\t\t\t\t\t\t</Pane>\n\t\t\t\t\t\t<Pane id=\"user\" :size=\"splitpaneSizeV[1]\">\n\t\t\t\t\t\t\t<UserWorkspace v-if=\"isAuthenticated\" class=\"userContent tour-ide-workspace\" />\n\t\t\t\t\t\t\t<div v-else class=\"message info\" title=\"Login is required to interact with the server.\">\n\t\t\t\t\t\t\t\t<i class=\"fas fa-sign-in-alt\"></i>\n\t\t\t\t\t\t\t\t<span class=\"login-message\"><strong><a @click=\"login\">Log in</a></strong> is required to interact with the server.</span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</Pane>\n\t\t\t\t\t</Splitpanes>\n\t\t\t\t</Pane>\n\t\t\t\t<Pane id=\"viewer\" :class=\"{empty: !showViewer}\" :size=\"splitpaneSizeH[2]\">\n\t\t\t\t\t<Viewer class=\"tour-ide-viewer\" @empty=\"onViewerEmpty\" />\n\t\t\t\t</Pane>\n\t\t\t</Splitpanes>\n\t\t</div>\n\t</div>\n</template>\n\n<script>\nimport EventBusMixin from './EventBusMixin.vue';\nimport Utils from '../utils.js';\nimport UserMenu from './UserMenu.vue';\nimport UserWorkspace from './UserWorkspace.vue';\nimport Viewer from './Viewer.vue';\nimport Editor from './Editor.vue';\nimport Logo from './Logo.vue';\nimport DiscoveryToolbar from './DiscoveryToolbar.vue';\nimport { ProcessParameter } from '@openeo/js-commons';\nimport { Job, Service, UserProcess } from '@openeo/js-client';\nimport { Splitpanes, Pane } from 'splitpanes';\n\nexport default {\n\tname: 'IDE',\n\tmixins: [EventBusMixin],\n\tcomponents: {\n\t\tDiscoveryToolbar,\n\t\tEditor,\n\t\tLogo,\n\t\tViewer,\n\t\tUserMenu,\n\t\tUserWorkspace,\n\t\tSplitpanes,\n\t\tPane\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tshowViewer: false,\n\t\t\tresizeListener: null,\n\t\t\tuserInfoUpdater: null\n\t\t};\n\t},\n\tcomputed: {\n\t\t...Utils.mapState(['connection', 'isAuthenticated']),\n\t\t...Utils.mapState('editor', ['context', 'process', 'collectionPreview']),\n\t\t...Utils.mapGetters(['title', 'apiVersion', 'supports']),\n\t\t...Utils.mapGetters('jobs', {supportsJobUpdate: 'supportsUpdate'}),\n\t\t...Utils.mapGetters('services', {supportsServiceUpdate: 'supportsUpdate'}),\n\t\t...Utils.mapGetters('userProcesses', {supportsUserProcessUpdate: 'supportsUpdate'}),\n\t\tcontextTitle() {\n\t\t\treturn this.context !== null ? Utils.getResourceTitle(this.context, true) : ''\n\t\t},\n\t\tsaveSupported() {\n\t\t\treturn this.context !== null && (\n\t\t\t\t(this.context instanceof Job && this.supportsJobUpdate) ||\n\t\t\t\t(this.context instanceof Service && this.supportsServiceUpdate) ||\n\t\t\t\t(this.context instanceof UserProcess && this.supportsUserProcessUpdate)\n\t\t\t);\n\t\t},\n\t\thasProcess() {\n\t\t\treturn Utils.size(this.process) > 0;\n\t\t},\n\t\tvalidateSupported() {\n\t\t\treturn this.supports('validateProcess');\n\t\t},\n\t\tsplitpaneSizeH() {\n\t\t\tif (this.showViewer) {\n\t\t\t\treturn [20, 40, 40];\n\t\t\t}\n\t\t\telse {\n\t\t\t\treturn [25, 75, 0];\n\t\t\t}\n\t\t},\n\t\tsplitpaneSizeV() {\n\t\t\tif (this.isAuthenticated) {\n\t\t\t\treturn [50,50];\n\t\t\t}\n\t\t\telse {\n\t\t\t\treturn [99,1];\n\t\t\t}\n\t\t}\n\t},\n\tasync mounted() {\n\t\tthis.listen('showDataForm', this.showDataForm);\n\t\tthis.listen('editProcess', this.editProcess);\n\t\tthis.listen('showLogin', this.login);\n\n\t\tthis.resizeListener = event => this.resized(event);\n\t\twindow.addEventListener('resize', this.resizeListener);\n\t\tif (this.isAuthenticated) {\n\t\t\tthis.userInfoUpdater = setInterval(this.describeAccount, this.$config.dataRefreshInterval*60*1000); // Refresh user data every x minutes\n\t\t}\n\t\tthis.emit('title', this.title);\n\n\t\tif (this.collectionPreview) {\n\t\t\tthis.$nextTick(() => {\n\t\t\t\tthis.emit('showCollectionPreview', this.collectionPreview);\n\t\t\t\tthis.setCollectionPreview(null);\n\t\t\t});\n\t\t}\n\t},\n\tbeforeDestroy() {\n\t\tif (this.resizeListener !== null) {\n\t\t\twindow.removeEventListener('resize', this.resizeListener);\n\t\t}\n\t\tif (this.userInfoUpdater !== null) {\n\t\t\tclearInterval(this.userInfoUpdater);\n\t\t}\n\t},\n\tmethods: {\n\t\t...Utils.mapActions(['describeAccount']),\n\t\t...Utils.mapMutations(['discoveryCompleted']),\n\t\t...Utils.mapMutations('editor', ['setContext', 'setProcess', 'setCollectionPreview']),\n\n\t\tresized(event) {\n\t\t\tthis.emit('windowResized', event);\n\t\t},\n\t\tonViewerEmpty(empty) {\n\t\t\tthis.showViewer = !empty;\n\t\t},\n\n\t\tlogin() {\n\t\t\tthis.discoveryCompleted(false);\n\t\t},\n\n\t\timportProcess() {\n\t\t\tlet events = {\n\t\t\t\tsave: this.updateEditor\n\t\t\t};\n\t\t\tthis.emit('showModal', 'ImportProcessModal', {}, events);\n\t\t},\n\n\t\tsaveProcess() {\n\t\t\tthis.emit('replaceProcess', this.context, this.process);\n\t\t},\n\n\t\tasync exportCode() {\n\t\t\tthis.emit('showModal', 'ExportCodeModal');\n\t\t},\n\n\t\tasync validateProcess() {\n\t\t\tif (!this.validateSupported) {\n\t\t\t\treturn Utils.error(this, \"Server doesn't support validation\");\n\t\t\t}\n\t\t\telse if (!this.hasProcess) {\n\t\t\t\treturn Utils.info(this, 'Nothing to validate...');\n\t\t\t}\n\t\t\ttry {\n\t\t\t\tlet errors = await this.connection.validateProcess(this.process);\n\t\t\t\tif (errors.length > 0) {\n\t\t\t\t\terrors.forEach(error => error.level = 'error');\n\t\t\t\t\tthis.emit('viewLogs', errors, 'Validation Result', 'fa-tasks');\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tUtils.ok(this, \"The process is valid\");\n\t\t\t\t}\n\t\t\t} catch (error) {\n\t\t\t\tUtils.exception(this, error, \"Validation rejected\");\n\t\t\t}\n\t\t},\n\n\t\tupdateEditor(value) {\n\t\t\tthis.setProcess(value);\n\t\t\tif (value === null) {\n\t\t\t\tthis.setContext(null);\n\t\t\t}\n\t\t},\n\n\t\teditProcess(obj) {\n\t\t\tthis.setContext(obj);\n\t\t},\n\n\t\tinsertProcess(node) {\n\t\t\tthis.$refs.editor.insertProcess(node);\n\t\t},\n\n\t\tshowServerInfo() {\n\t\t\tthis.emit('showModal', 'ServerInfoModal');\n\t\t},\n\n\t\tshowHelp() {\n\t\t\tthis.emit('showTour', 'ide');\n\t\t},\n\n\t\tshowDataForm(title, fields, saveCallback = null, closeCallback = null) {\n\t\t\tvar editable = typeof saveCallback === 'function';\n\t\t\tvar data = {};\n\t\t\tvar parameters = [];\n\t\t\tfor(let field of fields) {\n\t\t\t\tif (field === null) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tparameters.push(new ProcessParameter(field));\n\t\t\t\tdata[field.name] = field.value;\n\t\t\t}\n\t\n\t\t\tlet props = {\n\t\t\t\ttitle,\n\t\t\t\tparameters,\n\t\t\t\tdata,\n\t\t\t\teditable\n\t\t\t};\n\t\t\tlet events = {};\n\t\t\tif (typeof saveCallback === 'function') {\n\t\t\t\tevents.save = saveCallback;\n\t\t\t}\n\t\t\tif (typeof closeCallback === 'function') {\n\t\t\t\tevents.closed = closeCallback;\n\t\t\t}\n\t\t\tthis.emit('showModal', 'ParameterModal', props, events);\n\t\t}\n\n\t}\n}\n</script>\n\n<style lang=\"scss\">\n@import '../../theme.scss';\n@import '~splitpanes/dist/splitpanes.css';\n\n.splitpanes.default-theme {\n  .splitpanes__pane {\n    background-color: transparent;\n  }\n  .splitpanes__splitter {\n\t  border: 0;\n  }\n  > * {\n\t-webkit-transition: none;\n\ttransition: none;\n  }\n}\n\n#ide {\n\tmargin-top: 80px;\n\theight: calc(100% - 80px);\n\tbackground-color: white;\n}\n#wrapper {\n\theight: 100%;\n}\n#workspace, #viewer {\n\theight: 100%;\n\tmin-width: 200px;\n\tpadding: 1rem;\n\tbox-sizing: border-box;\n\n\t&.empty {\n\t\tmin-width: 0;\n\t\tpadding: 0;\n\t}\n}\n#workspace {\n\tmin-width: 300px;\n}\n#discovery {\n\theight: 100%;\n\toverflow: auto;\n\n\t.search-box {\n\t\tmargin: 1rem;\n\t}\n\t.category {\n\t\tpadding: 5px 1em;\n\t}\n}\n#user {\n\tmin-height: 2.5em;\n}\n#editor, .authenticated #user {\n\tmin-height: 150px;\n}\n#editor {\n\tpadding-bottom: 0.5rem;\n\n\t&:last-child {\n\t\tpadding-bottom: 0;\n\t}\n}\n\n#user {\n\tpadding-top: 0.5rem;\n\n\t.login-message {\n\t\twhite-space: nowrap;\n\t\toverflow: hidden;\n\t\ttext-overflow: ellipsis;\n\t}\n}\n#ide header.navbar {\n\twidth: 100%;\n\tbackground-color: $mainColor;\n\tcolor: white;\n\theight: 80px;\n\tposition: fixed;\n\ttop: 0;\n\tdisplay: flex;\n\tjustify-content: space-between;\n\tz-index: 100;\n}\n#ide .logo {\n\tflex-grow: 1;\n\talign-content: flex-start;\n\twhite-space: nowrap;\n\toverflow: hidden;\n\tjustify-content: left;\n\tpadding-left: 1rem;\n}\n\n#menu {\n\tlist-style-type: none;\n\tmargin: 0 1rem;\n\tpadding: 0;\n\tdisplay: flex;\n\talign-items: center;\n\n\tli {\n\t\tposition: relative;\n\t\tdisplay: inline-block;\n\t\theight: 80px;\n\n\t\t&:hover {\n\t\t\tbackground-color: white;\n\t\t\tcolor: $mainColor;\n\n\t\t\t.dropdown {\n\t\t\t\tdisplay: block;\n\t\t\t\tborder-color: #ddd;\n\t\t\t\tborder-style: solid;\n\t\t\t\tborder-width: 0 1px 1px 1px;\n\t\t\t}\n\t\t}\n\n\t\t.menuItem {\n\t\t\tdisplay: flex;\n\t\t\talign-items: center;\n\t\t\tcursor: pointer;\n\t\t\tpadding: 10px 20px;\n\t\t\theight: 60px;\n\t\t\tfont-size: 16px;\n\t\t\tfont-weight: bold;\n\t\t}\n\n\t\t.dropdown {\n\t\t\tdisplay: none;\n\t\t\tposition: absolute;\n\t\t\tbackground-color: white;\n\t\t\tcolor: black;\n\t\t\tmin-width: 200px;\n\t\t\tbox-shadow: 8px 8px 8px 0px rgba(0,0,0,0.3);\n\t\t\ttop: 80px;\n\t\t\tright: -1px;\n\n\t\t\t.item {\n\t\t\t\tpadding: 10px;\n\t\t\t\tdisplay: block;\n\n\t\t\t\t&.separator {\n\t\t\t\t\tborder-bottom: 1px dotted $mainColor;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\thr {\n\t\t\t\tmargin: 5px 10px;\n\t\t\t}\n\n\t\t\ta.item:hover {\n\t\t\t\tbackground-color: $mainColor;\n\t\t\t\tcolor: white;\n\t\t\t}\n\t\t}\n\t}\n}\n\n.tabContent .dataTable,\n.tabContent table {\n\twidth: 100%;\n\tborder-collapse: collapse;\n\tfont-size: 0.95em;\n\n\ttd, th {\n\t\tborder: 1px solid #ddd;\n\t\tpadding: 3px;\n\t}\n}\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./IDE.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./IDE.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./IDE.vue?vue&type=template&id=c2af5cc4&\"\nimport script from \"./IDE.vue?vue&type=script&lang=js&\"\nexport * from \"./IDE.vue?vue&type=script&lang=js&\"\nimport style0 from \"./IDE.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UserMenu.vue?vue&type=style&index=0&id=76333d38&lang=scss&scoped=true&\""],"sourceRoot":""}